2b74fc24debf6549c5d2be45a5ab370e
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useStreakNotifications = useStreakNotifications;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _streakNotificationService = require("../services/firebase/streakNotificationService");
var _errorHandling = require("../utils/errorHandling");
var _react = require("react");
var _useAuth2 = require("./useAuth");
function useStreakNotifications() {
  var _useAuth = (0, _useAuth2.useAuth)(),
    user = _useAuth.user;
  var _useState = (0, _react.useState)(null),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    preferences = _useState2[0],
    setPreferences = _useState2[1];
  var _useState3 = (0, _react.useState)(false),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    loading = _useState4[0],
    setLoading = _useState4[1];
  var _useState5 = (0, _react.useState)(null),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    error = _useState6[0],
    setError = _useState6[1];
  var loadPreferences = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    if (!user) return;
    try {
      setLoading(true);
      setError(null);
      var userPreferences = yield _streakNotificationService.streakNotificationService.getUserNotificationPreferences(user.uid);
      setPreferences(userPreferences);
    } catch (err) {
      var message = (0, _errorHandling.getUserFriendlyErrorMessage)(err);
      setError(message);
      console.error("Error loading notification preferences:", err);
    } finally {
      setLoading(false);
    }
  }), [user]);
  var updatePreferences = (0, _react.useCallback)(function () {
    var _ref2 = (0, _asyncToGenerator2.default)(function* (newPreferences) {
      if (!user) {
        throw new Error("User must be authenticated");
      }
      try {
        setLoading(true);
        setError(null);
        yield _streakNotificationService.streakNotificationService.updateNotificationPreferences(user.uid, newPreferences);
        setPreferences(function (prev) {
          return prev ? Object.assign({}, prev, newPreferences) : null;
        });
        return true;
      } catch (err) {
        var message = (0, _errorHandling.getUserFriendlyErrorMessage)(err);
        setError(message);
        console.error("Error updating notification preferences:", err);
        return false;
      } finally {
        setLoading(false);
      }
    });
    return function (_x) {
      return _ref2.apply(this, arguments);
    };
  }(), [user]);
  var sendMilestoneNotification = (0, _react.useCallback)(function () {
    var _ref3 = (0, _asyncToGenerator2.default)(function* (habitId, habitName, milestone) {
      if (!user) {
        throw new Error("User must be authenticated");
      }
      try {
        var success = yield _streakNotificationService.streakNotificationService.sendMilestoneNotification(user.uid, habitId, habitName, milestone);
        return success;
      } catch (err) {
        var message = (0, _errorHandling.getUserFriendlyErrorMessage)(err);
        setError(message);
        console.error("Error sending milestone notification:", err);
        return false;
      }
    });
    return function (_x2, _x3, _x4) {
      return _ref3.apply(this, arguments);
    };
  }(), [user]);
  var sendStreakRiskReminder = (0, _react.useCallback)(function () {
    var _ref4 = (0, _asyncToGenerator2.default)(function* (habitId, habitName, currentStreak) {
      if (!user) {
        throw new Error("User must be authenticated");
      }
      try {
        var success = yield _streakNotificationService.streakNotificationService.sendStreakRiskReminder(user.uid, habitId, habitName, currentStreak);
        return success;
      } catch (err) {
        var message = (0, _errorHandling.getUserFriendlyErrorMessage)(err);
        setError(message);
        console.error("Error sending streak risk reminder:", err);
        return false;
      }
    });
    return function (_x5, _x6, _x7) {
      return _ref4.apply(this, arguments);
    };
  }(), [user]);
  var sendRecoveryNotification = (0, _react.useCallback)(function () {
    var _ref5 = (0, _asyncToGenerator2.default)(function* (habitId, habitName, previousBestStreak) {
      if (!user) {
        throw new Error("User must be authenticated");
      }
      try {
        var success = yield _streakNotificationService.streakNotificationService.sendRecoveryNotification(user.uid, habitId, habitName, previousBestStreak);
        return success;
      } catch (err) {
        var message = (0, _errorHandling.getUserFriendlyErrorMessage)(err);
        setError(message);
        console.error("Error sending recovery notification:", err);
        return false;
      }
    });
    return function (_x8, _x9, _x0) {
      return _ref5.apply(this, arguments);
    };
  }(), [user]);
  var sendWeeklyProgressNotification = (0, _react.useCallback)(function () {
    var _ref6 = (0, _asyncToGenerator2.default)(function* (habitId, habitName, currentStreak, weeklyCompletions) {
      if (!user) {
        throw new Error("User must be authenticated");
      }
      try {
        var success = yield _streakNotificationService.streakNotificationService.sendWeeklyProgressNotification(user.uid, habitId, habitName, currentStreak, weeklyCompletions);
        return success;
      } catch (err) {
        var message = (0, _errorHandling.getUserFriendlyErrorMessage)(err);
        setError(message);
        console.error("Error sending weekly progress notification:", err);
        return false;
      }
    });
    return function (_x1, _x10, _x11, _x12) {
      return _ref6.apply(this, arguments);
    };
  }(), [user]);
  var toggleNotificationType = (0, _react.useCallback)(function () {
    var _ref7 = (0, _asyncToGenerator2.default)(function* (type, enabled) {
      return yield updatePreferences((0, _defineProperty2.default)({}, type, enabled));
    });
    return function (_x13, _x14) {
      return _ref7.apply(this, arguments);
    };
  }(), [updatePreferences]);
  var updateReminderTime = (0, _react.useCallback)(function () {
    var _ref8 = (0, _asyncToGenerator2.default)(function* (hours) {
      if (hours < 1 || hours > 12) {
        throw new Error("Reminder time must be between 1 and 12 hours");
      }
      return yield updatePreferences({
        reminderTime: hours
      });
    });
    return function (_x15) {
      return _ref8.apply(this, arguments);
    };
  }(), [updatePreferences]);
  (0, _react.useEffect)(function () {
    if (user) {
      loadPreferences();
    } else {
      setPreferences(null);
      setError(null);
    }
  }, [user, loadPreferences]);
  return {
    preferences: preferences,
    loading: loading,
    error: error,
    loadPreferences: loadPreferences,
    updatePreferences: updatePreferences,
    sendMilestoneNotification: sendMilestoneNotification,
    sendStreakRiskReminder: sendStreakRiskReminder,
    sendRecoveryNotification: sendRecoveryNotification,
    sendWeeklyProgressNotification: sendWeeklyProgressNotification,
    toggleNotificationType: toggleNotificationType,
    updateReminderTime: updateReminderTime
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZSIsInJlcXVpcmUiLCJfZXJyb3JIYW5kbGluZyIsIl9yZWFjdCIsIl91c2VBdXRoMiIsInVzZVN0cmVha05vdGlmaWNhdGlvbnMiLCJfdXNlQXV0aCIsInVzZUF1dGgiLCJ1c2VyIiwiX3VzZVN0YXRlIiwidXNlU3RhdGUiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiZGVmYXVsdCIsInByZWZlcmVuY2VzIiwic2V0UHJlZmVyZW5jZXMiLCJfdXNlU3RhdGUzIiwiX3VzZVN0YXRlNCIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiX3VzZVN0YXRlNSIsIl91c2VTdGF0ZTYiLCJlcnJvciIsInNldEVycm9yIiwibG9hZFByZWZlcmVuY2VzIiwidXNlQ2FsbGJhY2siLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJ1c2VyUHJlZmVyZW5jZXMiLCJzdHJlYWtOb3RpZmljYXRpb25TZXJ2aWNlIiwiZ2V0VXNlck5vdGlmaWNhdGlvblByZWZlcmVuY2VzIiwidWlkIiwiZXJyIiwibWVzc2FnZSIsImdldFVzZXJGcmllbmRseUVycm9yTWVzc2FnZSIsImNvbnNvbGUiLCJ1cGRhdGVQcmVmZXJlbmNlcyIsIl9yZWYyIiwibmV3UHJlZmVyZW5jZXMiLCJFcnJvciIsInVwZGF0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2VzIiwicHJldiIsIk9iamVjdCIsImFzc2lnbiIsIl94IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJzZW5kTWlsZXN0b25lTm90aWZpY2F0aW9uIiwiX3JlZjMiLCJoYWJpdElkIiwiaGFiaXROYW1lIiwibWlsZXN0b25lIiwic3VjY2VzcyIsIl94MiIsIl94MyIsIl94NCIsInNlbmRTdHJlYWtSaXNrUmVtaW5kZXIiLCJfcmVmNCIsImN1cnJlbnRTdHJlYWsiLCJfeDUiLCJfeDYiLCJfeDciLCJzZW5kUmVjb3ZlcnlOb3RpZmljYXRpb24iLCJfcmVmNSIsInByZXZpb3VzQmVzdFN0cmVhayIsIl94OCIsIl94OSIsIl94MCIsInNlbmRXZWVrbHlQcm9ncmVzc05vdGlmaWNhdGlvbiIsIl9yZWY2Iiwid2Vla2x5Q29tcGxldGlvbnMiLCJfeDEiLCJfeDEwIiwiX3gxMSIsIl94MTIiLCJ0b2dnbGVOb3RpZmljYXRpb25UeXBlIiwiX3JlZjciLCJ0eXBlIiwiZW5hYmxlZCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJfeDEzIiwiX3gxNCIsInVwZGF0ZVJlbWluZGVyVGltZSIsIl9yZWY4IiwiaG91cnMiLCJyZW1pbmRlclRpbWUiLCJfeDE1IiwidXNlRWZmZWN0Il0sInNvdXJjZXMiOlsidXNlU3RyZWFrTm90aWZpY2F0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIE5vdGlmaWNhdGlvblByZWZlcmVuY2VzLFxuICAgIHN0cmVha05vdGlmaWNhdGlvblNlcnZpY2UsXG59IGZyb20gXCJAL3NlcnZpY2VzL2ZpcmViYXNlL3N0cmVha05vdGlmaWNhdGlvblNlcnZpY2VcIjtcbmltcG9ydCB7IGdldFVzZXJGcmllbmRseUVycm9yTWVzc2FnZSB9IGZyb20gXCJAL3V0aWxzL2Vycm9ySGFuZGxpbmdcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSBcIi4vdXNlQXV0aFwiO1xuXG4vKipcbiAqIHVzZVN0cmVha05vdGlmaWNhdGlvbnMgSG9va1xuICpcbiAqIEN1c3RvbSBob29rIGZvciBtYW5hZ2luZyBzdHJlYWsgbm90aWZpY2F0aW9uIHByZWZlcmVuY2VzIGFuZCBzZW5kaW5nIG5vdGlmaWNhdGlvbnNcbiAqIFJlcXVpcmVtZW50czogMTEuMSwgMTEuMiwgMTEuMywgMTEuNCwgMTEuNVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlU3RyZWFrTm90aWZpY2F0aW9ucygpIHtcbiAgICBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgICBjb25zdCBbcHJlZmVyZW5jZXMsIHNldFByZWZlcmVuY2VzXSA9XG4gICAgICAgIHVzZVN0YXRlPE5vdGlmaWNhdGlvblByZWZlcmVuY2VzIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHVzZXIgbm90aWZpY2F0aW9uIHByZWZlcmVuY2VzXG4gICAgICovXG4gICAgY29uc3QgbG9hZFByZWZlcmVuY2VzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIXVzZXIpIHJldHVybjtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgIHNldEVycm9yKG51bGwpO1xuXG4gICAgICAgICAgICBjb25zdCB1c2VyUHJlZmVyZW5jZXMgPVxuICAgICAgICAgICAgICAgIGF3YWl0IHN0cmVha05vdGlmaWNhdGlvblNlcnZpY2UuZ2V0VXNlck5vdGlmaWNhdGlvblByZWZlcmVuY2VzKFxuICAgICAgICAgICAgICAgICAgICB1c2VyLnVpZCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgc2V0UHJlZmVyZW5jZXModXNlclByZWZlcmVuY2VzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlKGVycik7XG4gICAgICAgICAgICBzZXRFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIG5vdGlmaWNhdGlvbiBwcmVmZXJlbmNlczpcIiwgZXJyKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSwgW3VzZXJdKTtcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBub3RpZmljYXRpb24gcHJlZmVyZW5jZXNcbiAgICAgKi9cbiAgICBjb25zdCB1cGRhdGVQcmVmZXJlbmNlcyA9IHVzZUNhbGxiYWNrKFxuICAgICAgICBhc3luYyAobmV3UHJlZmVyZW5jZXM6IFBhcnRpYWw8Tm90aWZpY2F0aW9uUHJlZmVyZW5jZXM+KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG11c3QgYmUgYXV0aGVudGljYXRlZFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICAgICAgICAgIHNldEVycm9yKG51bGwpO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZS51cGRhdGVOb3RpZmljYXRpb25QcmVmZXJlbmNlcyhcbiAgICAgICAgICAgICAgICAgICAgdXNlci51aWQsXG4gICAgICAgICAgICAgICAgICAgIG5ld1ByZWZlcmVuY2VzLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgbG9jYWwgc3RhdGVcbiAgICAgICAgICAgICAgICBzZXRQcmVmZXJlbmNlcygocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgcHJldiA/IHsgLi4ucHJldiwgLi4ubmV3UHJlZmVyZW5jZXMgfSA6IG51bGwsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGdldFVzZXJGcmllbmRseUVycm9yTWVzc2FnZShlcnIpO1xuICAgICAgICAgICAgICAgIHNldEVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBub3RpZmljYXRpb24gcHJlZmVyZW5jZXM6XCIsIGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgW3VzZXJdLFxuICAgICk7XG5cbiAgICAvKipcbiAgICAgKiBTZW5kIG1pbGVzdG9uZSBub3RpZmljYXRpb25cbiAgICAgKiBSZXF1aXJlbWVudHM6IDExLjJcbiAgICAgKi9cbiAgICBjb25zdCBzZW5kTWlsZXN0b25lTm90aWZpY2F0aW9uID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIGFzeW5jIChcbiAgICAgICAgICAgIGhhYml0SWQ6IHN0cmluZyxcbiAgICAgICAgICAgIGhhYml0TmFtZTogc3RyaW5nLFxuICAgICAgICAgICAgbWlsZXN0b25lOiB7IGRheXM6IG51bWJlcjsgYWNoaWV2ZWRBdDogYW55OyBjZWxlYnJhdGVkOiBib29sZWFuIH0sXG4gICAgICAgICkgPT4ge1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBtdXN0IGJlIGF1dGhlbnRpY2F0ZWRcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHN0cmVha05vdGlmaWNhdGlvblNlcnZpY2Uuc2VuZE1pbGVzdG9uZU5vdGlmaWNhdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXIudWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFiaXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhYml0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbGVzdG9uZSxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBnZXRVc2VyRnJpZW5kbHlFcnJvck1lc3NhZ2UoZXJyKTtcbiAgICAgICAgICAgICAgICBzZXRFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2VuZGluZyBtaWxlc3RvbmUgbm90aWZpY2F0aW9uOlwiLCBlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgW3VzZXJdLFxuICAgICk7XG5cbiAgICAvKipcbiAgICAgKiBTZW5kIHN0cmVhayByaXNrIHJlbWluZGVyXG4gICAgICogUmVxdWlyZW1lbnRzOiAxMS4xXG4gICAgICovXG4gICAgY29uc3Qgc2VuZFN0cmVha1Jpc2tSZW1pbmRlciA9IHVzZUNhbGxiYWNrKFxuICAgICAgICBhc3luYyAoaGFiaXRJZDogc3RyaW5nLCBoYWJpdE5hbWU6IHN0cmluZywgY3VycmVudFN0cmVhazogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG11c3QgYmUgYXV0aGVudGljYXRlZFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZS5zZW5kU3RyZWFrUmlza1JlbWluZGVyKFxuICAgICAgICAgICAgICAgICAgICB1c2VyLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgaGFiaXRJZCxcbiAgICAgICAgICAgICAgICAgICAgaGFiaXROYW1lLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RyZWFrLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlKGVycik7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNlbmRpbmcgc3RyZWFrIHJpc2sgcmVtaW5kZXI6XCIsIGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBbdXNlcl0sXG4gICAgKTtcblxuICAgIC8qKlxuICAgICAqIFNlbmQgcmVjb3Zlcnkgbm90aWZpY2F0aW9uXG4gICAgICogUmVxdWlyZW1lbnRzOiAxMS4zXG4gICAgICovXG4gICAgY29uc3Qgc2VuZFJlY292ZXJ5Tm90aWZpY2F0aW9uID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIGFzeW5jIChoYWJpdElkOiBzdHJpbmcsIGhhYml0TmFtZTogc3RyaW5nLCBwcmV2aW91c0Jlc3RTdHJlYWs6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBtdXN0IGJlIGF1dGhlbnRpY2F0ZWRcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHN0cmVha05vdGlmaWNhdGlvblNlcnZpY2Uuc2VuZFJlY292ZXJ5Tm90aWZpY2F0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlci51aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYWJpdElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFiaXROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNCZXN0U3RyZWFrLFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGdldFVzZXJGcmllbmRseUVycm9yTWVzc2FnZShlcnIpO1xuICAgICAgICAgICAgICAgIHNldEVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzZW5kaW5nIHJlY292ZXJ5IG5vdGlmaWNhdGlvbjpcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFt1c2VyXSxcbiAgICApO1xuXG4gICAgLyoqXG4gICAgICogU2VuZCB3ZWVrbHkgcHJvZ3Jlc3Mgbm90aWZpY2F0aW9uXG4gICAgICogUmVxdWlyZW1lbnRzOiAxMS40XG4gICAgICovXG4gICAgY29uc3Qgc2VuZFdlZWtseVByb2dyZXNzTm90aWZpY2F0aW9uID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIGFzeW5jIChcbiAgICAgICAgICAgIGhhYml0SWQ6IHN0cmluZyxcbiAgICAgICAgICAgIGhhYml0TmFtZTogc3RyaW5nLFxuICAgICAgICAgICAgY3VycmVudFN0cmVhazogbnVtYmVyLFxuICAgICAgICAgICAgd2Vla2x5Q29tcGxldGlvbnM6IG51bWJlcixcbiAgICAgICAgKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG11c3QgYmUgYXV0aGVudGljYXRlZFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzID1cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZS5zZW5kV2Vla2x5UHJvZ3Jlc3NOb3RpZmljYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhYml0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYWJpdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RyZWFrLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2Vla2x5Q29tcGxldGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlKGVycik7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNlbmRpbmcgd2Vla2x5IHByb2dyZXNzIG5vdGlmaWNhdGlvbjpcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFt1c2VyXSxcbiAgICApO1xuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlIHNwZWNpZmljIG5vdGlmaWNhdGlvbiB0eXBlXG4gICAgICovXG4gICAgY29uc3QgdG9nZ2xlTm90aWZpY2F0aW9uVHlwZSA9IHVzZUNhbGxiYWNrKFxuICAgICAgICBhc3luYyAodHlwZToga2V5b2YgTm90aWZpY2F0aW9uUHJlZmVyZW5jZXMsIGVuYWJsZWQ6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB1cGRhdGVQcmVmZXJlbmNlcyh7IFt0eXBlXTogZW5hYmxlZCB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgW3VwZGF0ZVByZWZlcmVuY2VzXSxcbiAgICApO1xuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHJlbWluZGVyIHRpbWUgKGhvdXJzIGJlZm9yZSBkYXkgZW5kKVxuICAgICAqL1xuICAgIGNvbnN0IHVwZGF0ZVJlbWluZGVyVGltZSA9IHVzZUNhbGxiYWNrKFxuICAgICAgICBhc3luYyAoaG91cnM6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGhvdXJzIDwgMSB8fCBob3VycyA+IDEyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVtaW5kZXIgdGltZSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgMTIgaG91cnNcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB1cGRhdGVQcmVmZXJlbmNlcyh7IHJlbWluZGVyVGltZTogaG91cnMgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFt1cGRhdGVQcmVmZXJlbmNlc10sXG4gICAgKTtcblxuICAgIC8vIExvYWQgcHJlZmVyZW5jZXMgd2hlbiB1c2VyIGNoYW5nZXNcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgbG9hZFByZWZlcmVuY2VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRQcmVmZXJlbmNlcyhudWxsKTtcbiAgICAgICAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgICB9XG4gICAgfSwgW3VzZXIsIGxvYWRQcmVmZXJlbmNlc10pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJlZmVyZW5jZXMsXG4gICAgICAgIGxvYWRpbmcsXG4gICAgICAgIGVycm9yLFxuICAgICAgICBsb2FkUHJlZmVyZW5jZXMsXG4gICAgICAgIHVwZGF0ZVByZWZlcmVuY2VzLFxuICAgICAgICBzZW5kTWlsZXN0b25lTm90aWZpY2F0aW9uLFxuICAgICAgICBzZW5kU3RyZWFrUmlza1JlbWluZGVyLFxuICAgICAgICBzZW5kUmVjb3ZlcnlOb3RpZmljYXRpb24sXG4gICAgICAgIHNlbmRXZWVrbHlQcm9ncmVzc05vdGlmaWNhdGlvbixcbiAgICAgICAgdG9nZ2xlTm90aWZpY2F0aW9uVHlwZSxcbiAgICAgICAgdXBkYXRlUmVtaW5kZXJUaW1lLFxuICAgIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBQUEsMEJBQUEsR0FBQUMsT0FBQTtBQUlBLElBQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLE1BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFNBQUEsR0FBQUgsT0FBQTtBQVFPLFNBQVNJLHNCQUFzQkEsQ0FBQSxFQUFHO0VBQ3JDLElBQUFDLFFBQUEsR0FBaUIsSUFBQUMsaUJBQU8sRUFBQyxDQUFDO0lBQWxCQyxJQUFJLEdBQUFGLFFBQUEsQ0FBSkUsSUFBSTtFQUNaLElBQUFDLFNBQUEsR0FDSSxJQUFBQyxlQUFRLEVBQWlDLElBQUksQ0FBQztJQUFBQyxVQUFBLE9BQUFDLGVBQUEsQ0FBQUMsT0FBQSxFQUFBSixTQUFBO0lBRDNDSyxXQUFXLEdBQUFILFVBQUE7SUFBRUksY0FBYyxHQUFBSixVQUFBO0VBRWxDLElBQUFLLFVBQUEsR0FBOEIsSUFBQU4sZUFBUSxFQUFDLEtBQUssQ0FBQztJQUFBTyxVQUFBLE9BQUFMLGVBQUEsQ0FBQUMsT0FBQSxFQUFBRyxVQUFBO0lBQXRDRSxPQUFPLEdBQUFELFVBQUE7SUFBRUUsVUFBVSxHQUFBRixVQUFBO0VBQzFCLElBQUFHLFVBQUEsR0FBMEIsSUFBQVYsZUFBUSxFQUFnQixJQUFJLENBQUM7SUFBQVcsVUFBQSxPQUFBVCxlQUFBLENBQUFDLE9BQUEsRUFBQU8sVUFBQTtJQUFoREUsS0FBSyxHQUFBRCxVQUFBO0lBQUVFLFFBQVEsR0FBQUYsVUFBQTtFQUt0QixJQUFNRyxlQUFlLEdBQUcsSUFBQUMsa0JBQVcsTUFBQUMsa0JBQUEsQ0FBQWIsT0FBQSxFQUFDLGFBQVk7SUFDNUMsSUFBSSxDQUFDTCxJQUFJLEVBQUU7SUFFWCxJQUFJO01BQ0FX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