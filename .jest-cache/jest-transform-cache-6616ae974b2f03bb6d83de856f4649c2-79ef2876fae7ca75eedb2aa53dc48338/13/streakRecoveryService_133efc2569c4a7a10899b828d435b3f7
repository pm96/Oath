686cb07c9b3e8fccee29abb5e844be3f
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.streakRecoveryService = exports.StreakRecoveryService = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _streakService = require("./streakService");
var StreakRecoveryService = exports.StreakRecoveryService = function () {
  function StreakRecoveryService() {
    (0, _classCallCheck2.default)(this, StreakRecoveryService);
  }
  return (0, _createClass2.default)(StreakRecoveryService, [{
    key: "generateBrokenStreakMessage",
    value: function generateBrokenStreakMessage(habitId, previousStreak, habitName) {
      var messages = [{
        title: "Don't Give Up! ðŸ’ª",
        message: `Your ${previousStreak}-day streak with ${habitName} was amazing! Every expert was once a beginner who refused to give up. Today is a fresh start.`
      }, {
        title: "Progress, Not Perfection âœ¨",
        message: `You built a ${previousStreak}-day streak with ${habitName} - that's real progress! One missed day doesn't erase your achievement. Let's get back on track.`
      }, {
        title: "Comeback Time! ðŸš€",
        message: `The best comeback stories start with a single step. Your ${previousStreak}-day streak proves you can do this. Ready to start your next chapter?`
      }, {
        title: "Resilience in Action ðŸŒ±",
        message: `Building habits is like growing a garden - sometimes you need to replant. Your ${previousStreak}-day streak shows your dedication. Time to grow again!`
      }];
      var randomMessage = messages[Math.floor(Math.random() * messages.length)];
      return {
        type: "broken_streak",
        title: randomMessage.title,
        message: randomMessage.message,
        actionText: "Start Fresh Today",
        reminderOffered: true
      };
    }
  }, {
    key: "generateRestartEncouragement",
    value: function generateRestartEncouragement(habitId, bestStreak, habitName) {
      var targetStreak = bestStreak + 1;
      var encouragementMessages = [{
        title: "Beat Your Record! ðŸŽ¯",
        message: `Your best streak with ${habitName} was ${bestStreak} days. You've done it before - now let's aim for ${targetStreak} days and set a new personal record!`
      }, {
        title: "Level Up Challenge ðŸ“ˆ",
        message: `Time to level up! Your ${bestStreak}-day streak was impressive. Can you push it to ${targetStreak} days this time? You've got this!`
      }, {
        title: "New Personal Best Awaits ðŸ†",
        message: `You crushed ${bestStreak} days before with ${habitName}. Your next goal: ${targetStreak} days. Every champion has comeback stories!`
      }];
      var randomMessage = encouragementMessages[Math.floor(Math.random() * encouragementMessages.length)];
      return {
        type: "restart_encouragement",
        title: randomMessage.title,
        message: randomMessage.message,
        actionText: `Aim for ${targetStreak} Days`,
        targetStreak: targetStreak
      };
    }
  }, {
    key: "generateAchievementPreservationMessage",
    value: function generateAchievementPreservationMessage(habitId, bestStreak, totalCompletions, habitName) {
      return {
        type: "achievement_preservation",
        title: "Your Progress Still Counts! ðŸ…",
        message: `Remember: You've completed ${habitName} ${totalCompletions} times and achieved a ${bestStreak}-day streak. That's real progress that no one can take away. One missed day doesn't erase your dedication and growth.`,
        actionText: "View My Achievements"
      };
    }
  }, {
    key: "generateMultipleBreakGuidance",
    value: function generateMultipleBreakGuidance(brokenStreakCount) {
      var guidance = [];
      if (brokenStreakCount >= 2) {
        guidance.push({
          type: "habit_stacking",
          title: "Try Habit Stacking",
          description: "Link your new habit to an existing routine you already do consistently.",
          actionSteps: ["Choose a habit you never miss (like brushing teeth)", "Do your new habit immediately after the existing one", "Start with just 2 minutes to build the connection", "Gradually increase duration once the link is strong"]
        });
      }
      if (brokenStreakCount >= 3) {
        guidance.push({
          type: "easier_goals",
          title: "Start Smaller",
          description: "Sometimes we aim too high too fast. Let's build momentum with easier wins.",
          actionSteps: ["Reduce your habit to the smallest possible version", "Focus on consistency over intensity", "Celebrate small wins to build confidence", "Gradually increase difficulty after 2 weeks of consistency"]
        });
      }
      if (brokenStreakCount >= 4) {
        guidance.push({
          type: "schedule_adjustment",
          title: "Optimize Your Timing",
          description: "Your schedule might be working against you. Let's find your optimal time.",
          actionSteps: ["Track when you have the most energy and motivation", "Schedule habits during your peak performance times", "Prepare everything the night before", "Set up environmental cues to trigger the habit"]
        });
      }
      if (brokenStreakCount >= 5) {
        guidance.push({
          type: "accountability_partner",
          title: "Get Support",
          description: "Sometimes we need external accountability to stay on track.",
          actionSteps: ["Share your goals with friends or family", "Find an accountability partner with similar goals", "Join online communities focused on your habit", "Consider working with a coach or mentor"]
        });
      }
      return guidance;
    }
  }, {
    key: "generateRestartReminderOffer",
    value: function generateRestartReminderOffer(habitId, habitName, userTimezone) {
      var defaultTime = this.getOptimalReminderTime(habitName);
      return {
        type: "restart_reminder",
        title: "Set a Restart Reminder? â°",
        message: `Would you like me to remind you tomorrow to restart your ${habitName} habit? I can send you a gentle nudge at the perfect time.`,
        actionText: "Set Reminder",
        reminderOffered: true
      };
    }
  }, {
    key: "getStreakRecoverySupport",
    value: (function () {
      var _getStreakRecoverySupport = (0, _asyncToGenerator2.default)(function* (habitId, userId, habitName) {
        var streak = yield _streakService.streakService.getHabitStreak(habitId, userId);
        if (!streak) {
          throw new Error("Streak data not found");
        }
        var brokenStreakCount = this.estimateBrokenStreakCount(streak);
        var motivationalMessage = this.generateBrokenStreakMessage(habitId, streak.bestStreak, habitName);
        var restartEncouragement = this.generateRestartEncouragement(habitId, streak.bestStreak, habitName);
        var achievementPreservation = this.generateAchievementPreservationMessage(habitId, streak.bestStreak, this.estimateTotalCompletions(streak), habitName);
        var restartReminder = this.generateRestartReminderOffer(habitId, habitName, "UTC");
        var result = {
          motivationalMessage: motivationalMessage,
          restartEncouragement: restartEncouragement,
          achievementPreservation: achievementPreservation,
          restartReminder: restartReminder
        };
        if (brokenStreakCount >= 2) {
          result.multipleBreakGuidance = this.generateMultipleBreakGuidance(brokenStreakCount);
        }
        return result;
      });
      function getStreakRecoverySupport(_x, _x2, _x3) {
        return _getStreakRecoverySupport.apply(this, arguments);
      }
      return getStreakRecoverySupport;
    }())
  }, {
    key: "isStreakBroken",
    value: function isStreakBroken(streak) {
      var timezone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "UTC";
      if (streak.currentStreak === 0) {
        return true;
      }
      var today = new Date().toISOString().split("T")[0];
      var yesterday = new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString().split("T")[0];
      return streak.lastCompletionDate !== today && streak.lastCompletionDate !== yesterday;
    }
  }, {
    key: "getRecoveryMessageForStreak",
    value: (function () {
      var _getRecoveryMessageForStreak = (0, _asyncToGenerator2.default)(function* (habitId, userId, habitName) {
        var streak = yield _streakService.streakService.getHabitStreak(habitId, userId);
        if (!streak) {
          return null;
        }
        if (this.isStreakBroken(streak)) {
          return this.generateBrokenStreakMessage(habitId, streak.bestStreak, habitName);
        }
        return null;
      });
      function getRecoveryMessageForStreak(_x4, _x5, _x6) {
        return _getRecoveryMessageForStreak.apply(this, arguments);
      }
      return getRecoveryMessageForStreak;
    }())
  }, {
    key: "getOptimalReminderTime",
    value: function getOptimalReminderTime(habitName) {
      var morningHabits = ["exercise", "meditation", "reading", "journaling"];
      var eveningHabits = ["reflection", "planning", "stretching"];
      var habitLower = habitName.toLowerCase();
      if (morningHabits.some(function (h) {
        return habitLower.includes(h);
      })) {
        return "08:00";
      } else if (eveningHabits.some(function (h) {
        return habitLower.includes(h);
      })) {
        return "20:00";
      } else {
        return "10:00";
      }
    }
  }, {
    key: "estimateBrokenStreakCount",
    value: function estimateBrokenStreakCount(streak) {
      if (streak.bestStreak === 0) return 0;
      var performanceRatio = streak.currentStreak / streak.bestStreak;
      if (performanceRatio < 0.1) return 5;
      if (performanceRatio < 0.3) return 4;
      if (performanceRatio < 0.5) return 3;
      if (performanceRatio < 0.7) return 2;
      return 1;
    }
  }, {
    key: "estimateTotalCompletions",
    value: function estimateTotalCompletions(streak) {
      return streak.bestStreak + Math.floor(streak.bestStreak * 0.3);
    }
  }]);
}();
var streakRecoveryService = exports.streakRecoveryService = new StreakRecoveryService();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3RyZWFrU2VydmljZSIsInJlcXVpcmUiLCJTdHJlYWtSZWNvdmVyeVNlcnZpY2UiLCJleHBvcnRzIiwiX2NsYXNzQ2FsbENoZWNrMiIsImRlZmF1bHQiLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJnZW5lcmF0ZUJyb2tlblN0cmVha01lc3NhZ2UiLCJoYWJpdElkIiwicHJldmlvdXNTdHJlYWsiLCJoYWJpdE5hbWUiLCJtZXNzYWdlcyIsInRpdGxlIiwibWVzc2FnZSIsInJhbmRvbU1lc3NhZ2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJ0eXBlIiwiYWN0aW9uVGV4dCIsInJlbWluZGVyT2ZmZXJlZCIsImdlbmVyYXRlUmVzdGFydEVuY291cmFnZW1lbnQiLCJiZXN0U3RyZWFrIiwidGFyZ2V0U3RyZWFrIiwiZW5jb3VyYWdlbWVudE1lc3NhZ2VzIiwiZ2VuZXJhdGVBY2hpZXZlbWVudFByZXNlcnZhdGlvbk1lc3NhZ2UiLCJ0b3RhbENvbXBsZXRpb25zIiwiZ2VuZXJhdGVNdWx0aXBsZUJyZWFrR3VpZGFuY2UiLCJicm9rZW5TdHJlYWtDb3VudCIsImd1aWRhbmNlIiwicHVzaCIsImRlc2NyaXB0aW9uIiwiYWN0aW9uU3RlcHMiLCJnZW5lcmF0ZVJlc3RhcnRSZW1pbmRlck9mZmVyIiwidXNlclRpbWV6b25lIiwiZGVmYXVsdFRpbWUiLCJnZXRPcHRpbWFsUmVtaW5kZXJUaW1lIiwiX2dldFN0cmVha1JlY292ZXJ5U3VwcG9ydCIsIl9hc3luY1RvR2VuZXJhdG9yMiIsInVzZXJJZCIsInN0cmVhayIsInN0cmVha1NlcnZpY2UiLCJnZXRIYWJpdFN0cmVhayIsIkVycm9yIiwiZXN0aW1hdGVCcm9rZW5TdHJlYWtDb3VudCIsIm1vdGl2YXRpb25hbE1lc3NhZ2UiLCJyZXN0YXJ0RW5jb3VyYWdlbWVudCIsImFjaGlldmVtZW50UHJlc2VydmF0aW9uIiwiZXN0aW1hdGVUb3RhbENvbXBsZXRpb25zIiwicmVzdGFydFJlbWluZGVyIiwicmVzdWx0IiwibXVsdGlwbGVCcmVha0d1aWRhbmNlIiwiZ2V0U3RyZWFrUmVjb3ZlcnlTdXBwb3J0IiwiX3giLCJfeDIiLCJfeDMiLCJhcHBseSIsImFyZ3VtZW50cyIsImlzU3RyZWFrQnJva2VuIiwidGltZXpvbmUiLCJ1bmRlZmluZWQiLCJjdXJyZW50U3RyZWFrIiwidG9kYXkiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzcGxpdCIsInllc3RlcmRheSIsIm5vdyIsImxhc3RDb21wbGV0aW9uRGF0ZSIsIl9nZXRSZWNvdmVyeU1lc3NhZ2VGb3JTdHJlYWsiLCJnZXRSZWNvdmVyeU1lc3NhZ2VGb3JTdHJlYWsiLCJfeDQiLCJfeDUiLCJfeDYiLCJtb3JuaW5nSGFiaXRzIiwiZXZlbmluZ0hhYml0cyIsImhhYml0TG93ZXIiLCJ0b0xvd2VyQ2FzZSIsInNvbWUiLCJoIiwiaW5jbHVkZXMiLCJwZXJmb3JtYW5jZVJhdGlvIiwic3RyZWFrUmVjb3ZlcnlTZXJ2aWNlIl0sInNvdXJjZXMiOlsic3RyZWFrUmVjb3ZlcnlTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhhYml0U3RyZWFrIH0gZnJvbSBcIi4uLy4uL3R5cGVzL2hhYml0LXN0cmVha3NcIjtcbmltcG9ydCB7IHN0cmVha1NlcnZpY2UgfSBmcm9tIFwiLi9zdHJlYWtTZXJ2aWNlXCI7XG5cbi8qKlxuICogU3RyZWFrIFJlY292ZXJ5IGFuZCBNb3RpdmF0aW9uIFNlcnZpY2VcbiAqXG4gKiBIYW5kbGVzIG1vdGl2YXRpb25hbCBtZXNzYWdpbmcsIHJlY292ZXJ5IGd1aWRhbmNlLCBhbmQgcmVzdGFydCBhc3Npc3RhbmNlXG4gKiB3aGVuIHVzZXJzIGJyZWFrIHRoZWlyIGhhYml0IHN0cmVha3MuXG4gKlxuICogUmVxdWlyZW1lbnRzOiA3LjEsIDcuMiwgNy4zLCA3LjQsIDcuNVxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZWFrUmVjb3ZlcnlNZXNzYWdlIHtcbiAgICB0eXBlOlxuICAgIHwgXCJicm9rZW5fc3RyZWFrXCJcbiAgICB8IFwicmVzdGFydF9lbmNvdXJhZ2VtZW50XCJcbiAgICB8IFwiYWNoaWV2ZW1lbnRfcHJlc2VydmF0aW9uXCJcbiAgICB8IFwibXVsdGlwbGVfYnJlYWtzXCJcbiAgICB8IFwicmVzdGFydF9yZW1pbmRlclwiO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIGFjdGlvblRleHQ/OiBzdHJpbmc7XG4gICAgdGFyZ2V0U3RyZWFrPzogbnVtYmVyO1xuICAgIHJlbWluZGVyT2ZmZXJlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTXVsdGlwbGVCcmVha0d1aWRhbmNlIHtcbiAgICB0eXBlOlxuICAgIHwgXCJoYWJpdF9zdGFja2luZ1wiXG4gICAgfCBcImVhc2llcl9nb2Fsc1wiXG4gICAgfCBcInNjaGVkdWxlX2FkanVzdG1lbnRcIlxuICAgIHwgXCJhY2NvdW50YWJpbGl0eV9wYXJ0bmVyXCI7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGFjdGlvblN0ZXBzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXN0YXJ0UmVtaW5kZXJPcHRpb25zIHtcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIHRpbWU6IHN0cmluZzsgLy8gSEg6TU0gZm9ybWF0XG4gICAgdGltZXpvbmU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBTdHJlYWtSZWNvdmVyeVNlcnZpY2Uge1xuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIG1vdGl2YXRpb25hbCBtZXNzYWdlIGZvciBhIGJyb2tlbiBzdHJlYWtcbiAgICAgKiBSZXF1aXJlbWVudHM6IDcuMVxuICAgICAqL1xuICAgIGdlbmVyYXRlQnJva2VuU3RyZWFrTWVzc2FnZShcbiAgICAgICAgaGFiaXRJZDogc3RyaW5nLFxuICAgICAgICBwcmV2aW91c1N0cmVhazogbnVtYmVyLFxuICAgICAgICBoYWJpdE5hbWU6IHN0cmluZyxcbiAgICApOiBTdHJlYWtSZWNvdmVyeU1lc3NhZ2Uge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJEb24ndCBHaXZlIFVwISDwn5KqXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFlvdXIgJHtwcmV2aW91c1N0cmVha30tZGF5IHN0cmVhayB3aXRoICR7aGFiaXROYW1lfSB3YXMgYW1hemluZyEgRXZlcnkgZXhwZXJ0IHdhcyBvbmNlIGEgYmVnaW5uZXIgd2hvIHJlZnVzZWQgdG8gZ2l2ZSB1cC4gVG9kYXkgaXMgYSBmcmVzaCBzdGFydC5gLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJQcm9ncmVzcywgTm90IFBlcmZlY3Rpb24g4pyoXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFlvdSBidWlsdCBhICR7cHJldmlvdXNTdHJlYWt9LWRheSBzdHJlYWsgd2l0aCAke2hhYml0TmFtZX0gLSB0aGF0J3MgcmVhbCBwcm9ncmVzcyEgT25lIG1pc3NlZCBkYXkgZG9lc24ndCBlcmFzZSB5b3VyIGFjaGlldmVtZW50LiBMZXQncyBnZXQgYmFjayBvbiB0cmFjay5gLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJDb21lYmFjayBUaW1lISDwn5qAXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFRoZSBiZXN0IGNvbWViYWNrIHN0b3JpZXMgc3RhcnQgd2l0aCBhIHNpbmdsZSBzdGVwLiBZb3VyICR7cHJldmlvdXNTdHJlYWt9LWRheSBzdHJlYWsgcHJvdmVzIHlvdSBjYW4gZG8gdGhpcy4gUmVhZHkgdG8gc3RhcnQgeW91ciBuZXh0IGNoYXB0ZXI/YCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiUmVzaWxpZW5jZSBpbiBBY3Rpb24g8J+MsVwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBCdWlsZGluZyBoYWJpdHMgaXMgbGlrZSBncm93aW5nIGEgZ2FyZGVuIC0gc29tZXRpbWVzIHlvdSBuZWVkIHRvIHJlcGxhbnQuIFlvdXIgJHtwcmV2aW91c1N0cmVha30tZGF5IHN0cmVhayBzaG93cyB5b3VyIGRlZGljYXRpb24uIFRpbWUgdG8gZ3JvdyBhZ2FpbiFgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcblxuICAgICAgICBjb25zdCByYW5kb21NZXNzYWdlID0gbWVzc2FnZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWVzc2FnZXMubGVuZ3RoKV07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFwiYnJva2VuX3N0cmVha1wiLFxuICAgICAgICAgICAgdGl0bGU6IHJhbmRvbU1lc3NhZ2UudGl0bGUsXG4gICAgICAgICAgICBtZXNzYWdlOiByYW5kb21NZXNzYWdlLm1lc3NhZ2UsXG4gICAgICAgICAgICBhY3Rpb25UZXh0OiBcIlN0YXJ0IEZyZXNoIFRvZGF5XCIsXG4gICAgICAgICAgICByZW1pbmRlck9mZmVyZWQ6IHRydWUsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgcmVzdGFydCBlbmNvdXJhZ2VtZW50IHdpdGggcHJldmlvdXMgYmVzdCBzdHJlYWsgdGFyZ2V0aW5nXG4gICAgICogUmVxdWlyZW1lbnRzOiA3LjJcbiAgICAgKi9cbiAgICBnZW5lcmF0ZVJlc3RhcnRFbmNvdXJhZ2VtZW50KFxuICAgICAgICBoYWJpdElkOiBzdHJpbmcsXG4gICAgICAgIGJlc3RTdHJlYWs6IG51bWJlcixcbiAgICAgICAgaGFiaXROYW1lOiBzdHJpbmcsXG4gICAgKTogU3RyZWFrUmVjb3ZlcnlNZXNzYWdlIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0U3RyZWFrID0gYmVzdFN0cmVhayArIDE7IC8vIEFpbSB0byBiZWF0IHByZXZpb3VzIGJlc3RcblxuICAgICAgICBjb25zdCBlbmNvdXJhZ2VtZW50TWVzc2FnZXMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiQmVhdCBZb3VyIFJlY29yZCEg8J+Or1wiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBZb3VyIGJlc3Qgc3RyZWFrIHdpdGggJHtoYWJpdE5hbWV9IHdhcyAke2Jlc3RTdHJlYWt9IGRheXMuIFlvdSd2ZSBkb25lIGl0IGJlZm9yZSAtIG5vdyBsZXQncyBhaW0gZm9yICR7dGFyZ2V0U3RyZWFrfSBkYXlzIGFuZCBzZXQgYSBuZXcgcGVyc29uYWwgcmVjb3JkIWAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBcIkxldmVsIFVwIENoYWxsZW5nZSDwn5OIXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFRpbWUgdG8gbGV2ZWwgdXAhIFlvdXIgJHtiZXN0U3RyZWFrfS1kYXkgc3RyZWFrIHdhcyBpbXByZXNzaXZlLiBDYW4geW91IHB1c2ggaXQgdG8gJHt0YXJnZXRTdHJlYWt9IGRheXMgdGhpcyB0aW1lPyBZb3UndmUgZ290IHRoaXMhYCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiTmV3IFBlcnNvbmFsIEJlc3QgQXdhaXRzIPCfj4ZcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgWW91IGNydXNoZWQgJHtiZXN0U3RyZWFrfSBkYXlzIGJlZm9yZSB3aXRoICR7aGFiaXROYW1lfS4gWW91ciBuZXh0IGdvYWw6ICR7dGFyZ2V0U3RyZWFrfSBkYXlzLiBFdmVyeSBjaGFtcGlvbiBoYXMgY29tZWJhY2sgc3RvcmllcyFgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcblxuICAgICAgICBjb25zdCByYW5kb21NZXNzYWdlID1cbiAgICAgICAgICAgIGVuY291cmFnZW1lbnRNZXNzYWdlc1tcbiAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGVuY291cmFnZW1lbnRNZXNzYWdlcy5sZW5ndGgpXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcInJlc3RhcnRfZW5jb3VyYWdlbWVudFwiLFxuICAgICAgICAgICAgdGl0bGU6IHJhbmRvbU1lc3NhZ2UudGl0bGUsXG4gICAgICAgICAgICBtZXNzYWdlOiByYW5kb21NZXNzYWdlLm1lc3NhZ2UsXG4gICAgICAgICAgICBhY3Rpb25UZXh0OiBgQWltIGZvciAke3RhcmdldFN0cmVha30gRGF5c2AsXG4gICAgICAgICAgICB0YXJnZXRTdHJlYWs6IHRhcmdldFN0cmVhayxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBhY2hpZXZlbWVudCBwcmVzZXJ2YXRpb24gbWVzc2FnZVxuICAgICAqIFJlcXVpcmVtZW50czogNy4zXG4gICAgICovXG4gICAgZ2VuZXJhdGVBY2hpZXZlbWVudFByZXNlcnZhdGlvbk1lc3NhZ2UoXG4gICAgICAgIGhhYml0SWQ6IHN0cmluZyxcbiAgICAgICAgYmVzdFN0cmVhazogbnVtYmVyLFxuICAgICAgICB0b3RhbENvbXBsZXRpb25zOiBudW1iZXIsXG4gICAgICAgIGhhYml0TmFtZTogc3RyaW5nLFxuICAgICk6IFN0cmVha1JlY292ZXJ5TWVzc2FnZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcImFjaGlldmVtZW50X3ByZXNlcnZhdGlvblwiLFxuICAgICAgICAgICAgdGl0bGU6IFwiWW91ciBQcm9ncmVzcyBTdGlsbCBDb3VudHMhIPCfj4VcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBSZW1lbWJlcjogWW91J3ZlIGNvbXBsZXRlZCAke2hhYml0TmFtZX0gJHt0b3RhbENvbXBsZXRpb25zfSB0aW1lcyBhbmQgYWNoaWV2ZWQgYSAke2Jlc3RTdHJlYWt9LWRheSBzdHJlYWsuIFRoYXQncyByZWFsIHByb2dyZXNzIHRoYXQgbm8gb25lIGNhbiB0YWtlIGF3YXkuIE9uZSBtaXNzZWQgZGF5IGRvZXNuJ3QgZXJhc2UgeW91ciBkZWRpY2F0aW9uIGFuZCBncm93dGguYCxcbiAgICAgICAgICAgIGFjdGlvblRleHQ6IFwiVmlldyBNeSBBY2hpZXZlbWVudHNcIixcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBndWlkYW5jZSBmb3IgdXNlcnMgd2l0aCBtdWx0aXBsZSBicm9rZW4gc3RyZWFrc1xuICAgICAqIFJlcXVpcmVtZW50czogNy40XG4gICAgICovXG4gICAgZ2VuZXJhdGVNdWx0aXBsZUJyZWFrR3VpZGFuY2UoXG4gICAgICAgIGJyb2tlblN0cmVha0NvdW50OiBudW1iZXIsXG4gICAgKTogTXVsdGlwbGVCcmVha0d1aWRhbmNlW10ge1xuICAgICAgICBjb25zdCBndWlkYW5jZTogTXVsdGlwbGVCcmVha0d1aWRhbmNlW10gPSBbXTtcblxuICAgICAgICBpZiAoYnJva2VuU3RyZWFrQ291bnQgPj0gMikge1xuICAgICAgICAgICAgZ3VpZGFuY2UucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJoYWJpdF9zdGFja2luZ1wiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlRyeSBIYWJpdCBTdGFja2luZ1wiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICAgICBcIkxpbmsgeW91ciBuZXcgaGFiaXQgdG8gYW4gZXhpc3Rpbmcgcm91dGluZSB5b3UgYWxyZWFkeSBkbyBjb25zaXN0ZW50bHkuXCIsXG4gICAgICAgICAgICAgICAgYWN0aW9uU3RlcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgXCJDaG9vc2UgYSBoYWJpdCB5b3UgbmV2ZXIgbWlzcyAobGlrZSBicnVzaGluZyB0ZWV0aClcIixcbiAgICAgICAgICAgICAgICAgICAgXCJEbyB5b3VyIG5ldyBoYWJpdCBpbW1lZGlhdGVseSBhZnRlciB0aGUgZXhpc3Rpbmcgb25lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiU3RhcnQgd2l0aCBqdXN0IDIgbWludXRlcyB0byBidWlsZCB0aGUgY29ubmVjdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBcIkdyYWR1YWxseSBpbmNyZWFzZSBkdXJhdGlvbiBvbmNlIHRoZSBsaW5rIGlzIHN0cm9uZ1wiLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChicm9rZW5TdHJlYWtDb3VudCA+PSAzKSB7XG4gICAgICAgICAgICBndWlkYW5jZS5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImVhc2llcl9nb2Fsc1wiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlN0YXJ0IFNtYWxsZXJcIixcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgXCJTb21ldGltZXMgd2UgYWltIHRvbyBoaWdoIHRvbyBmYXN0LiBMZXQncyBidWlsZCBtb21lbnR1bSB3aXRoIGVhc2llciB3aW5zLlwiLFxuICAgICAgICAgICAgICAgIGFjdGlvblN0ZXBzOiBbXG4gICAgICAgICAgICAgICAgICAgIFwiUmVkdWNlIHlvdXIgaGFiaXQgdG8gdGhlIHNtYWxsZXN0IHBvc3NpYmxlIHZlcnNpb25cIixcbiAgICAgICAgICAgICAgICAgICAgXCJGb2N1cyBvbiBjb25zaXN0ZW5jeSBvdmVyIGludGVuc2l0eVwiLFxuICAgICAgICAgICAgICAgICAgICBcIkNlbGVicmF0ZSBzbWFsbCB3aW5zIHRvIGJ1aWxkIGNvbmZpZGVuY2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJHcmFkdWFsbHkgaW5jcmVhc2UgZGlmZmljdWx0eSBhZnRlciAyIHdlZWtzIG9mIGNvbnNpc3RlbmN5XCIsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJyb2tlblN0cmVha0NvdW50ID49IDQpIHtcbiAgICAgICAgICAgIGd1aWRhbmNlLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwic2NoZWR1bGVfYWRqdXN0bWVudFwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIk9wdGltaXplIFlvdXIgVGltaW5nXCIsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgICAgIFwiWW91ciBzY2hlZHVsZSBtaWdodCBiZSB3b3JraW5nIGFnYWluc3QgeW91LiBMZXQncyBmaW5kIHlvdXIgb3B0aW1hbCB0aW1lLlwiLFxuICAgICAgICAgICAgICAgIGFjdGlvblN0ZXBzOiBbXG4gICAgICAgICAgICAgICAgICAgIFwiVHJhY2sgd2hlbiB5b3UgaGF2ZSB0aGUgbW9zdCBlbmVyZ3kgYW5kIG1vdGl2YXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgXCJTY2hlZHVsZSBoYWJpdHMgZHVyaW5nIHlvdXIgcGVhayBwZXJmb3JtYW5jZSB0aW1lc1wiLFxuICAgICAgICAgICAgICAgICAgICBcIlByZXBhcmUgZXZlcnl0aGluZyB0aGUgbmlnaHQgYmVmb3JlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiU2V0IHVwIGVudmlyb25tZW50YWwgY3VlcyB0byB0cmlnZ2VyIHRoZSBoYWJpdFwiLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChicm9rZW5TdHJlYWtDb3VudCA+PSA1KSB7XG4gICAgICAgICAgICBndWlkYW5jZS5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFjY291bnRhYmlsaXR5X3BhcnRuZXJcIixcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJHZXQgU3VwcG9ydFwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICAgICBcIlNvbWV0aW1lcyB3ZSBuZWVkIGV4dGVybmFsIGFjY291bnRhYmlsaXR5IHRvIHN0YXkgb24gdHJhY2suXCIsXG4gICAgICAgICAgICAgICAgYWN0aW9uU3RlcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgXCJTaGFyZSB5b3VyIGdvYWxzIHdpdGggZnJpZW5kcyBvciBmYW1pbHlcIixcbiAgICAgICAgICAgICAgICAgICAgXCJGaW5kIGFuIGFjY291bnRhYmlsaXR5IHBhcnRuZXIgd2l0aCBzaW1pbGFyIGdvYWxzXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiSm9pbiBvbmxpbmUgY29tbXVuaXRpZXMgZm9jdXNlZCBvbiB5b3VyIGhhYml0XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiQ29uc2lkZXIgd29ya2luZyB3aXRoIGEgY29hY2ggb3IgbWVudG9yXCIsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGd1aWRhbmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIHJlc3RhcnQgcmVtaW5kZXIgb2ZmZXJcbiAgICAgKiBSZXF1aXJlbWVudHM6IDcuNVxuICAgICAqL1xuICAgIGdlbmVyYXRlUmVzdGFydFJlbWluZGVyT2ZmZXIoXG4gICAgICAgIGhhYml0SWQ6IHN0cmluZyxcbiAgICAgICAgaGFiaXROYW1lOiBzdHJpbmcsXG4gICAgICAgIHVzZXJUaW1lem9uZTogc3RyaW5nLFxuICAgICk6IFN0cmVha1JlY292ZXJ5TWVzc2FnZSB7XG4gICAgICAgIC8vIFN1Z2dlc3Qgb3B0aW1hbCByZW1pbmRlciB0aW1lcyBiYXNlZCBvbiBoYWJpdCB0eXBlXG4gICAgICAgIGNvbnN0IGRlZmF1bHRUaW1lID0gdGhpcy5nZXRPcHRpbWFsUmVtaW5kZXJUaW1lKGhhYml0TmFtZSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFwicmVzdGFydF9yZW1pbmRlclwiLFxuICAgICAgICAgICAgdGl0bGU6IFwiU2V0IGEgUmVzdGFydCBSZW1pbmRlcj8g4o+wXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBgV291bGQgeW91IGxpa2UgbWUgdG8gcmVtaW5kIHlvdSB0b21vcnJvdyB0byByZXN0YXJ0IHlvdXIgJHtoYWJpdE5hbWV9IGhhYml0PyBJIGNhbiBzZW5kIHlvdSBhIGdlbnRsZSBudWRnZSBhdCB0aGUgcGVyZmVjdCB0aW1lLmAsXG4gICAgICAgICAgICBhY3Rpb25UZXh0OiBcIlNldCBSZW1pbmRlclwiLFxuICAgICAgICAgICAgcmVtaW5kZXJPZmZlcmVkOiB0cnVlLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjb21wcmVoZW5zaXZlIHJlY292ZXJ5IHN1cHBvcnQgZm9yIGEgYnJva2VuIHN0cmVha1xuICAgICAqIENvbWJpbmVzIGFsbCByZWNvdmVyeSBlbGVtZW50cyBpbnRvIGEgY29tcGxldGUgc3VwcG9ydCBwYWNrYWdlXG4gICAgICovXG4gICAgYXN5bmMgZ2V0U3RyZWFrUmVjb3ZlcnlTdXBwb3J0KFxuICAgICAgICBoYWJpdElkOiBzdHJpbmcsXG4gICAgICAgIHVzZXJJZDogc3RyaW5nLFxuICAgICAgICBoYWJpdE5hbWU6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPHtcbiAgICAgICAgbW90aXZhdGlvbmFsTWVzc2FnZTogU3RyZWFrUmVjb3ZlcnlNZXNzYWdlO1xuICAgICAgICByZXN0YXJ0RW5jb3VyYWdlbWVudDogU3RyZWFrUmVjb3ZlcnlNZXNzYWdlO1xuICAgICAgICBhY2hpZXZlbWVudFByZXNlcnZhdGlvbjogU3RyZWFrUmVjb3ZlcnlNZXNzYWdlO1xuICAgICAgICBtdWx0aXBsZUJyZWFrR3VpZGFuY2U/OiBNdWx0aXBsZUJyZWFrR3VpZGFuY2VbXTtcbiAgICAgICAgcmVzdGFydFJlbWluZGVyOiBTdHJlYWtSZWNvdmVyeU1lc3NhZ2U7XG4gICAgfT4ge1xuICAgICAgICAvLyBHZXQgY3VycmVudCBzdHJlYWsgZGF0YVxuICAgICAgICBjb25zdCBzdHJlYWsgPSBhd2FpdCBzdHJlYWtTZXJ2aWNlLmdldEhhYml0U3RyZWFrKGhhYml0SWQsIHVzZXJJZCk7XG4gICAgICAgIGlmICghc3RyZWFrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdHJlYWsgZGF0YSBub3QgZm91bmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgdXNlcidzIGJyb2tlbiBzdHJlYWsgaGlzdG9yeSAoc2ltcGxpZmllZCAtIGluIHJlYWwgaW1wbGVtZW50YXRpb24sXG4gICAgICAgIC8vIHRoaXMgd291bGQgdHJhY2sgaGlzdG9yaWNhbCBicmVhayBwYXR0ZXJucylcbiAgICAgICAgY29uc3QgYnJva2VuU3RyZWFrQ291bnQgPSB0aGlzLmVzdGltYXRlQnJva2VuU3RyZWFrQ291bnQoc3RyZWFrKTtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBhbGwgcmVjb3ZlcnkgY29tcG9uZW50c1xuICAgICAgICBjb25zdCBtb3RpdmF0aW9uYWxNZXNzYWdlID0gdGhpcy5nZW5lcmF0ZUJyb2tlblN0cmVha01lc3NhZ2UoXG4gICAgICAgICAgICBoYWJpdElkLFxuICAgICAgICAgICAgc3RyZWFrLmJlc3RTdHJlYWssXG4gICAgICAgICAgICBoYWJpdE5hbWUsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcmVzdGFydEVuY291cmFnZW1lbnQgPSB0aGlzLmdlbmVyYXRlUmVzdGFydEVuY291cmFnZW1lbnQoXG4gICAgICAgICAgICBoYWJpdElkLFxuICAgICAgICAgICAgc3RyZWFrLmJlc3RTdHJlYWssXG4gICAgICAgICAgICBoYWJpdE5hbWUsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgYWNoaWV2ZW1lbnRQcmVzZXJ2YXRpb24gPSB0aGlzLmdlbmVyYXRlQWNoaWV2ZW1lbnRQcmVzZXJ2YXRpb25NZXNzYWdlKFxuICAgICAgICAgICAgaGFiaXRJZCxcbiAgICAgICAgICAgIHN0cmVhay5iZXN0U3RyZWFrLFxuICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZVRvdGFsQ29tcGxldGlvbnMoc3RyZWFrKSxcbiAgICAgICAgICAgIGhhYml0TmFtZSxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXN0YXJ0UmVtaW5kZXIgPSB0aGlzLmdlbmVyYXRlUmVzdGFydFJlbWluZGVyT2ZmZXIoXG4gICAgICAgICAgICBoYWJpdElkLFxuICAgICAgICAgICAgaGFiaXROYW1lLFxuICAgICAgICAgICAgXCJVVENcIiwgLy8gV291bGQgZ2V0IGZyb20gdXNlciBwcmVmZXJlbmNlc1xuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdDogYW55ID0ge1xuICAgICAgICAgICAgbW90aXZhdGlvbmFsTWVzc2FnZSxcbiAgICAgICAgICAgIHJlc3RhcnRFbmNvdXJhZ2VtZW50LFxuICAgICAgICAgICAgYWNoaWV2ZW1lbnRQcmVzZXJ2YXRpb24sXG4gICAgICAgICAgICByZXN0YXJ0UmVtaW5kZXIsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQWRkIG11bHRpcGxlIGJyZWFrIGd1aWRhbmNlIGlmIG5lZWRlZFxuICAgICAgICBpZiAoYnJva2VuU3RyZWFrQ291bnQgPj0gMikge1xuICAgICAgICAgICAgcmVzdWx0Lm11bHRpcGxlQnJlYWtHdWlkYW5jZSA9XG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU11bHRpcGxlQnJlYWtHdWlkYW5jZShicm9rZW5TdHJlYWtDb3VudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgc3RyZWFrIGlzIGNvbnNpZGVyZWQgXCJicm9rZW5cIiAobm8gY29tcGxldGlvbiB5ZXN0ZXJkYXkgb3IgdG9kYXkpXG4gICAgICovXG4gICAgaXNTdHJlYWtCcm9rZW4oc3RyZWFrOiBIYWJpdFN0cmVhaywgdGltZXpvbmU6IHN0cmluZyA9IFwiVVRDXCIpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHN0cmVhay5jdXJyZW50U3RyZWFrID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIGxhc3QgY29tcGxldGlvbiB3YXMgcmVjZW50IGVub3VnaCB0byBtYWludGFpbiBzdHJlYWtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xuICAgICAgICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMjQgKiA2MCAqIDYwICogMTAwMClcbiAgICAgICAgICAgIC50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAuc3BsaXQoXCJUXCIpWzBdO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBzdHJlYWsubGFzdENvbXBsZXRpb25EYXRlICE9PSB0b2RheSAmJlxuICAgICAgICAgICAgc3RyZWFrLmxhc3RDb21wbGV0aW9uRGF0ZSAhPT0geWVzdGVyZGF5XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHJlY292ZXJ5IG1lc3NhZ2UgYmFzZWQgb24gc3RyZWFrIHN0YXR1c1xuICAgICAqL1xuICAgIGFzeW5jIGdldFJlY292ZXJ5TWVzc2FnZUZvclN0cmVhayhcbiAgICAgICAgaGFiaXRJZDogc3RyaW5nLFxuICAgICAgICB1c2VySWQ6IHN0cmluZyxcbiAgICAgICAgaGFiaXROYW1lOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxTdHJlYWtSZWNvdmVyeU1lc3NhZ2UgfCBudWxsPiB7XG4gICAgICAgIGNvbnN0IHN0cmVhayA9IGF3YWl0IHN0cmVha1NlcnZpY2UuZ2V0SGFiaXRTdHJlYWsoaGFiaXRJZCwgdXNlcklkKTtcbiAgICAgICAgaWYgKCFzdHJlYWspIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNTdHJlYWtCcm9rZW4oc3RyZWFrKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVCcm9rZW5TdHJlYWtNZXNzYWdlKFxuICAgICAgICAgICAgICAgIGhhYml0SWQsXG4gICAgICAgICAgICAgICAgc3RyZWFrLmJlc3RTdHJlYWssXG4gICAgICAgICAgICAgICAgaGFiaXROYW1lLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFByaXZhdGUgaGVscGVyIG1ldGhvZHNcblxuICAgIHByaXZhdGUgZ2V0T3B0aW1hbFJlbWluZGVyVGltZShoYWJpdE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIC8vIFNpbXBsZSBoZXVyaXN0aWMgZm9yIG9wdGltYWwgcmVtaW5kZXIgdGltZXMgYmFzZWQgb24gaGFiaXQgdHlwZVxuICAgICAgICBjb25zdCBtb3JuaW5nSGFiaXRzID0gW1wiZXhlcmNpc2VcIiwgXCJtZWRpdGF0aW9uXCIsIFwicmVhZGluZ1wiLCBcImpvdXJuYWxpbmdcIl07XG4gICAgICAgIGNvbnN0IGV2ZW5pbmdIYWJpdHMgPSBbXCJyZWZsZWN0aW9uXCIsIFwicGxhbm5pbmdcIiwgXCJzdHJldGNoaW5nXCJdO1xuXG4gICAgICAgIGNvbnN0IGhhYml0TG93ZXIgPSBoYWJpdE5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBpZiAobW9ybmluZ0hhYml0cy5zb21lKChoKSA9PiBoYWJpdExvd2VyLmluY2x1ZGVzKGgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiMDg6MDBcIjtcbiAgICAgICAgfSBlbHNlIGlmIChldmVuaW5nSGFiaXRzLnNvbWUoKGgpID0+IGhhYml0TG93ZXIuaW5jbHVkZXMoaCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gXCIyMDowMFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiMTA6MDBcIjsgLy8gRGVmYXVsdCBtb3JuaW5nIHRpbWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZXN0aW1hdGVCcm9rZW5TdHJlYWtDb3VudChzdHJlYWs6IEhhYml0U3RyZWFrKTogbnVtYmVyIHtcbiAgICAgICAgLy8gU2ltcGxpZmllZCBlc3RpbWF0aW9uIGJhc2VkIG9uIHRoZSByYXRpbyBvZiBiZXN0IHN0cmVhayB0byBjdXJyZW50IHBlcmZvcm1hbmNlXG4gICAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCB0cmFjayBoaXN0b3JpY2FsIGJyZWFrIHBhdHRlcm5zXG4gICAgICAgIGlmIChzdHJlYWsuYmVzdFN0cmVhayA9PT0gMCkgcmV0dXJuIDA7XG5cbiAgICAgICAgY29uc3QgcGVyZm9ybWFuY2VSYXRpbyA9IHN0cmVhay5jdXJyZW50U3RyZWFrIC8gc3RyZWFrLmJlc3RTdHJlYWs7XG5cbiAgICAgICAgaWYgKHBlcmZvcm1hbmNlUmF0aW8gPCAwLjEpIHJldHVybiA1OyAvLyBWZXJ5IHBvb3IgcmVjZW50IHBlcmZvcm1hbmNlXG4gICAgICAgIGlmIChwZXJmb3JtYW5jZVJhdGlvIDwgMC4zKSByZXR1cm4gNDtcbiAgICAgICAgaWYgKHBlcmZvcm1hbmNlUmF0aW8gPCAwLjUpIHJldHVybiAzO1xuICAgICAgICBpZiAocGVyZm9ybWFuY2VSYXRpbyA8IDAuNykgcmV0dXJuIDI7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIHByaXZhdGUgZXN0aW1hdGVUb3RhbENvbXBsZXRpb25zKHN0cmVhazogSGFiaXRTdHJlYWspOiBudW1iZXIge1xuICAgICAgICAvLyBTaW1wbGlmaWVkIGVzdGltYXRpb24gLSBpbiByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIHF1ZXJ5IGNvbXBsZXRpb24gaGlzdG9yeVxuICAgICAgICByZXR1cm4gc3RyZWFrLmJlc3RTdHJlYWsgKyBNYXRoLmZsb29yKHN0cmVhay5iZXN0U3RyZWFrICogMC4zKTtcbiAgICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25z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