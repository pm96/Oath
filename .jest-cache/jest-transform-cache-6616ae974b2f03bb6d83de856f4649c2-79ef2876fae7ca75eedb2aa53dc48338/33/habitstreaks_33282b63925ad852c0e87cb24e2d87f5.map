{"version":3,"names":["_zod","require","DifficultySchema","exports","z","enum","HabitCompletionSchema","object","id","string","min","habitId","userId","completedAt","any","timezone","notes","optional","difficulty","StreakMilestoneSchema","days","number","int","positive","achievedAt","celebrated","boolean","HabitStreakSchema","currentStreak","bestStreak","lastCompletionDate","regex","streakStartDate","freezesAvailable","freezesUsed","milestones","array","HabitAnalyticsSchema","totalCompletions","completionRate30Days","max","averageStreakLength","bestDayOfWeek","consistencyScore","lastUpdated","CalendarDaySchema","date","completed","isToday","isInStreak","completionTime","isValidDifficulty","value","safeParse","success","isValidHabitCompletion","isValidHabitStreak","isValidHabitAnalytics","FIRESTORE_COLLECTIONS","COMPLETIONS","STREAKS","ANALYTICS","MILESTONE_DAYS","DIFFICULTY_MULTIPLIERS","easy","medium","hard"],"sources":["habit-streaks.ts"],"sourcesContent":["import { Timestamp } from \"firebase/firestore\";\nimport { z } from \"zod\";\n\n// Core TypeScript Interfaces\n\nexport interface HabitCompletion {\n    id: string;\n    habitId: string;\n    userId: string;\n    completedAt: Timestamp;\n    timezone: string;\n    notes?: string;\n    difficulty: \"easy\" | \"medium\" | \"hard\";\n}\n\nexport interface HabitStreak {\n    habitId: string;\n    userId: string;\n    currentStreak: number;\n    bestStreak: number;\n    lastCompletionDate: string; // YYYY-MM-DD format\n    streakStartDate: string;\n    freezesAvailable: number;\n    freezesUsed: number;\n    milestones: StreakMilestone[];\n}\n\nexport interface StreakMilestone {\n    days: number;\n    achievedAt: Timestamp;\n    celebrated: boolean;\n}\n\nexport interface HabitAnalytics {\n    habitId: string;\n    userId: string;\n    totalCompletions: number;\n    completionRate30Days: number;\n    averageStreakLength: number;\n    bestDayOfWeek: string;\n    consistencyScore: number;\n    lastUpdated: Timestamp;\n}\n\n// Calendar and UI Types\n\nexport interface CalendarDay {\n    date: string; // YYYY-MM-DD format\n    completed: boolean;\n    isToday: boolean;\n    isInStreak: boolean;\n    completionTime?: string;\n    notes?: string;\n}\n\nexport interface TrendData {\n    period: string;\n    completionRate: number;\n    streakLength: number;\n    totalCompletions: number;\n}\n\n// Zod Validation Schemas\n\nexport const DifficultySchema = z.enum([\"easy\", \"medium\", \"hard\"]);\n\nexport const HabitCompletionSchema = z.object({\n    id: z.string().min(1),\n    habitId: z.string().min(1),\n    userId: z.string().min(1),\n    completedAt: z.any(), // Timestamp validation handled separately\n    timezone: z.string().min(1),\n    notes: z.string().optional(),\n    difficulty: DifficultySchema,\n});\n\nexport const StreakMilestoneSchema = z.object({\n    days: z.number().int().positive(),\n    achievedAt: z.any(), // Timestamp validation handled separately\n    celebrated: z.boolean(),\n});\n\nexport const HabitStreakSchema = z.object({\n    habitId: z.string().min(1),\n    userId: z.string().min(1),\n    currentStreak: z.number().int().min(0),\n    bestStreak: z.number().int().min(0),\n    lastCompletionDate: z.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/), // YYYY-MM-DD format\n    streakStartDate: z.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/),\n    freezesAvailable: z.number().int().min(0),\n    freezesUsed: z.number().int().min(0),\n    milestones: z.array(StreakMilestoneSchema),\n});\n\nexport const HabitAnalyticsSchema = z.object({\n    habitId: z.string().min(1),\n    userId: z.string().min(1),\n    totalCompletions: z.number().int().min(0),\n    completionRate30Days: z.number().min(0).max(100),\n    averageStreakLength: z.number().min(0),\n    bestDayOfWeek: z.string().min(1),\n    consistencyScore: z.number().min(0).max(100),\n    lastUpdated: z.any(), // Timestamp validation handled separately\n});\n\nexport const CalendarDaySchema = z.object({\n    date: z.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/),\n    completed: z.boolean(),\n    isToday: z.boolean(),\n    isInStreak: z.boolean(),\n    completionTime: z.string().optional(),\n    notes: z.string().optional(),\n});\n\n// Type guards for runtime validation\n\nexport const isValidDifficulty = (\n    value: any,\n): value is \"easy\" | \"medium\" | \"hard\" => {\n    return DifficultySchema.safeParse(value).success;\n};\n\nexport const isValidHabitCompletion = (\n    value: any,\n): value is HabitCompletion => {\n    return HabitCompletionSchema.safeParse(value).success;\n};\n\nexport const isValidHabitStreak = (value: any): value is HabitStreak => {\n    return HabitStreakSchema.safeParse(value).success;\n};\n\nexport const isValidHabitAnalytics = (value: any): value is HabitAnalytics => {\n    return HabitAnalyticsSchema.safeParse(value).success;\n};\n\n// Firestore Collection Names\nexport const FIRESTORE_COLLECTIONS = {\n    COMPLETIONS: \"completions\",\n    STREAKS: \"streaks\",\n    ANALYTICS: \"analytics\",\n} as const;\n\n// Milestone Constants\nexport const MILESTONE_DAYS = [7, 30, 60, 100, 365] as const;\nexport const DIFFICULTY_MULTIPLIERS = {\n    easy: 1,\n    medium: 1.5,\n    hard: 2,\n} as const;\n"],"mappings":"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","ignoreList":[]}