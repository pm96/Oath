2fc12dac3ca350972d3b5280f3ecf6d9
_getJestObj().mock("@react-native-async-storage/async-storage", function () {
  return {
    getItem: jest.fn(),
    setItem: jest.fn(),
    removeItem: jest.fn(),
    multiRemove: jest.fn(),
    getAllKeys: jest.fn()
  };
});
_getJestObj().mock("../firebaseConfig", function () {
  return {
    db: {}
  };
});
_getJestObj().mock("../utils/errorHandling", function () {
  return {
    isOnline: jest.fn().mockResolvedValue(true),
    retryWithBackoff: jest.fn().mockImplementation(function (fn) {
      return fn();
    })
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _firestore = require("firebase/firestore");
var _syncService = require("../services/firebase/syncService");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe("SyncService", function () {
  beforeEach(function () {
    jest.clearAllMocks();
    _asyncStorage.default.getItem.mockResolvedValue(null);
    _asyncStorage.default.setItem.mockResolvedValue(undefined);
    _asyncStorage.default.removeItem.mockResolvedValue(undefined);
    _asyncStorage.default.multiRemove.mockResolvedValue(undefined);
    _asyncStorage.default.getAllKeys.mockResolvedValue([]);
  });
  describe("Cache Management", function () {
    it("should cache data with integrity verification", (0, _asyncToGenerator2.default)(function* () {
      var testData = {
        test: "data",
        value: 123
      };
      yield _syncService.syncService.cacheData("test_key", testData);
      expect(_asyncStorage.default.setItem).toHaveBeenCalledWith("test_key", expect.stringContaining('"data":{"test":"data","value":123}'));
    }));
    it("should retrieve cached data and verify integrity", (0, _asyncToGenerator2.default)(function* () {
      var testData = {
        test: "data",
        value: 123
      };
      var cachedData = {
        data: testData,
        timestamp: _firestore.Timestamp.now().toMillis(),
        version: 1,
        checksum: "123456789"
      };
      _asyncStorage.default.getItem.mockResolvedValue(JSON.stringify(cachedData));
      var result = yield _syncService.syncService.getCachedData("test_key");
      expect(result).toBeNull();
      expect(_asyncStorage.default.removeItem).toHaveBeenCalledWith("test_key");
    }));
    it("should return null for non-existent cache", (0, _asyncToGenerator2.default)(function* () {
      _asyncStorage.default.getItem.mockResolvedValue(null);
      var result = yield _syncService.syncService.getCachedData("non_existent_key");
      expect(result).toBeNull();
    }));
  });
  describe("Operation Queuing", function () {
    it("should queue operations for offline sync", (0, _asyncToGenerator2.default)(function* () {
      var operation = {
        type: "completion",
        action: "create",
        data: {
          habitId: "habit1",
          userId: "user1"
        },
        userId: "user1",
        habitId: "habit1"
      };
      yield _syncService.syncService.queueOperation(operation);
      expect(_asyncStorage.default.setItem).toHaveBeenCalledWith("@pending_sync_operations", expect.stringContaining('"type":"completion"'));
    }));
    it("should load pending operations from storage", (0, _asyncToGenerator2.default)(function* () {
      var operations = [{
        id: "op1",
        type: "completion",
        action: "create",
        data: {},
        userId: "user1",
        habitId: "habit1",
        retryCount: 0,
        timestamp: Date.now()
      }];
      _asyncStorage.default.getItem.mockResolvedValue(JSON.stringify(operations));
      var newSyncService = _syncService.syncService.constructor.getInstance();
      yield new Promise(function (resolve) {
        return setTimeout(resolve, 100);
      });
      expect(_asyncStorage.default.getItem).toHaveBeenCalledWith("@pending_sync_operations");
    }));
  });
  describe("Sync Status", function () {
    it("should provide current sync status", function () {
      var status = _syncService.syncService.getSyncStatus();
      expect(status).toHaveProperty("isOnline");
      expect(status).toHaveProperty("lastSync");
      expect(status).toHaveProperty("pendingOperations");
      expect(status).toHaveProperty("syncInProgress");
    });
    it("should allow subscribing to status changes", function () {
      var callback = jest.fn();
      var unsubscribe = _syncService.syncService.onSyncStatusChange(callback);
      expect(callback).toHaveBeenCalledWith(expect.objectContaining({
        isOnline: expect.any(Boolean),
        pendingOperations: expect.any(Number)
      }));
      unsubscribe();
    });
  });
  describe("Cache Cleanup", function () {
    it("should clear all cached data", (0, _asyncToGenerator2.default)(function* () {
      yield _syncService.syncService.clearCache();
      expect(_asyncStorage.default.multiRemove).toHaveBeenCalledWith(["@habit_streaks_cache", "@habit_completions_cache", "@pending_sync_operations", "@last_sync_timestamp"]);
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJnZXRJdGVtIiwiamVzdCIsImZuIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJtdWx0aVJlbW92ZSIsImdldEFsbEtleXMiLCJkYiIsImlzT25saW5lIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJyZXRyeVdpdGhCYWNrb2ZmIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJkZWZhdWx0IiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX2FzeW5jU3RvcmFnZSIsIl9maXJlc3RvcmUiLCJfc3luY1NlcnZpY2UiLCJfcmVxdWlyZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJBc3luY1N0b3JhZ2UiLCJ1bmRlZmluZWQiLCJpdCIsInRlc3REYXRhIiwidGVzdCIsInZhbHVlIiwic3luY1NlcnZpY2UiLCJjYWNoZURhdGEiLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInN0cmluZ0NvbnRhaW5pbmciLCJjYWNoZWREYXRhIiwiZGF0YSIsInRpbWVzdGFtcCIsIlRpbWVzdGFtcCIsIm5vdyIsInRvTWlsbGlzIiwidmVyc2lvbiIsImNoZWNrc3VtIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3VsdCIsImdldENhY2hlZERhdGEiLCJ0b0JlTnVsbCIsIm9wZXJhdGlvbiIsInR5cGUiLCJhY3Rpb24iLCJoYWJpdElkIiwidXNlcklkIiwicXVldWVPcGVyYXRpb24iLCJvcGVyYXRpb25zIiwiaWQiLCJyZXRyeUNvdW50IiwiRGF0ZSIsIm5ld1N5bmNTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJnZXRJbnN0YW5jZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInN0YXR1cyIsImdldFN5bmNTdGF0dXMiLCJ0b0hhdmVQcm9wZXJ0eSIsImNhbGxiYWNrIiwidW5zdWJzY3JpYmUiLCJvblN5bmNTdGF0dXNDaGFuZ2UiLCJvYmplY3RDb250YWluaW5nIiwiYW55IiwiQm9vbGVhbiIsInBlbmRpbmdPcGVyYXRpb25zIiwiTnVtYmVyIiwiY2xlYXJDYWNoZSJdLCJzb3VyY2VzIjpbInN5bmNTZXJ2aWNlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTeW5jIFNlcnZpY2UgVGVzdHNcbiAqXG4gKiBUZXN0cyBmb3IgZGF0YSBzeW5jaHJvbml6YXRpb24gYW5kIG9mZmxpbmUgc3VwcG9ydCBmdW5jdGlvbmFsaXR5XG4gKiBSZXF1aXJlbWVudHM6IDEwLjEsIDEwLjIsIDEwLjMsIDEwLjQsIDEwLjVcbiAqL1xuXG5pbXBvcnQgQXN5bmNTdG9yYWdlIGZyb20gXCJAcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UvYXN5bmMtc3RvcmFnZVwiO1xuaW1wb3J0IHsgVGltZXN0YW1wIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuaW1wb3J0IHsgc3luY1NlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvZmlyZWJhc2Uvc3luY1NlcnZpY2VcIjtcblxuLy8gTW9jayBBc3luY1N0b3JhZ2Vcbmplc3QubW9jayhcIkByZWFjdC1uYXRpdmUtYXN5bmMtc3RvcmFnZS9hc3luYy1zdG9yYWdlXCIsICgpID0+ICh7XG4gICAgZ2V0SXRlbTogamVzdC5mbigpLFxuICAgIHNldEl0ZW06IGplc3QuZm4oKSxcbiAgICByZW1vdmVJdGVtOiBqZXN0LmZuKCksXG4gICAgbXVsdGlSZW1vdmU6IGplc3QuZm4oKSxcbiAgICBnZXRBbGxLZXlzOiBqZXN0LmZuKCksXG59KSk7XG5cbi8vIE1vY2sgRmlyZWJhc2Vcbmplc3QubW9jayhcIi4uL2ZpcmViYXNlQ29uZmlnXCIsICgpID0+ICh7XG4gICAgZGI6IHt9LFxufSkpO1xuXG4vLyBNb2NrIGVycm9yIGhhbmRsaW5nIHV0aWxpdGllc1xuamVzdC5tb2NrKFwiLi4vdXRpbHMvZXJyb3JIYW5kbGluZ1wiLCAoKSA9PiAoe1xuICAgIGlzT25saW5lOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXG4gICAgcmV0cnlXaXRoQmFja29mZjogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoZm4pID0+IGZuKCkpLFxufSkpO1xuXG5kZXNjcmliZShcIlN5bmNTZXJ2aWNlXCIsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgICAgIChBc3luY1N0b3JhZ2UuZ2V0SXRlbSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgICAgICAoQXN5bmNTdG9yYWdlLnNldEl0ZW0gYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICAgICAgICAoQXN5bmNTdG9yYWdlLnJlbW92ZUl0ZW0gYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICAgICAgICAoQXN5bmNTdG9yYWdlLm11bHRpUmVtb3ZlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcbiAgICAgICAgKEFzeW5jU3RvcmFnZS5nZXRBbGxLZXlzIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJDYWNoZSBNYW5hZ2VtZW50XCIsICgpID0+IHtcbiAgICAgICAgaXQoXCJzaG91bGQgY2FjaGUgZGF0YSB3aXRoIGludGVncml0eSB2ZXJpZmljYXRpb25cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGVzdERhdGEgPSB7IHRlc3Q6IFwiZGF0YVwiLCB2YWx1ZTogMTIzIH07XG5cbiAgICAgICAgICAgIGF3YWl0IHN5bmNTZXJ2aWNlLmNhY2hlRGF0YShcInRlc3Rfa2V5XCIsIHRlc3REYXRhKTtcblxuICAgICAgICAgICAgZXhwZWN0KEFzeW5jU3RvcmFnZS5zZXRJdGVtKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAgICAgICBcInRlc3Rfa2V5XCIsXG4gICAgICAgICAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1wiZGF0YVwiOntcInRlc3RcIjpcImRhdGFcIixcInZhbHVlXCI6MTIzfScpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgcmV0cmlldmUgY2FjaGVkIGRhdGEgYW5kIHZlcmlmeSBpbnRlZ3JpdHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGVzdERhdGEgPSB7IHRlc3Q6IFwiZGF0YVwiLCB2YWx1ZTogMTIzIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZWREYXRhID0ge1xuICAgICAgICAgICAgICAgIGRhdGE6IHRlc3REYXRhLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogVGltZXN0YW1wLm5vdygpLnRvTWlsbGlzKCksXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgICAgICBjaGVja3N1bTogXCIxMjM0NTY3ODlcIiwgLy8gTW9jayBjaGVja3N1bVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgKEFzeW5jU3RvcmFnZS5nZXRJdGVtIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoY2FjaGVkRGF0YSksXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzeW5jU2VydmljZS5nZXRDYWNoZWREYXRhKFwidGVzdF9rZXlcIik7XG5cbiAgICAgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCBkdWUgdG8gY2hlY2tzdW0gbWlzbWF0Y2ggKGludGVncml0eSBjaGVjaylcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgICAgICAgICBleHBlY3QoQXN5bmNTdG9yYWdlLnJlbW92ZUl0ZW0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwidGVzdF9rZXlcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBudWxsIGZvciBub24tZXhpc3RlbnQgY2FjaGVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgKEFzeW5jU3RvcmFnZS5nZXRJdGVtIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN5bmNTZXJ2aWNlLmdldENhY2hlZERhdGEoXCJub25fZXhpc3RlbnRfa2V5XCIpO1xuXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiT3BlcmF0aW9uIFF1ZXVpbmdcIiwgKCkgPT4ge1xuICAgICAgICBpdChcInNob3VsZCBxdWV1ZSBvcGVyYXRpb25zIGZvciBvZmZsaW5lIHN5bmNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiY29tcGxldGlvblwiIGFzIGNvbnN0LFxuICAgICAgICAgICAgICAgIGFjdGlvbjogXCJjcmVhdGVcIiBhcyBjb25zdCxcbiAgICAgICAgICAgICAgICBkYXRhOiB7IGhhYml0SWQ6IFwiaGFiaXQxXCIsIHVzZXJJZDogXCJ1c2VyMVwiIH0sXG4gICAgICAgICAgICAgICAgdXNlcklkOiBcInVzZXIxXCIsXG4gICAgICAgICAgICAgICAgaGFiaXRJZDogXCJoYWJpdDFcIixcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGF3YWl0IHN5bmNTZXJ2aWNlLnF1ZXVlT3BlcmF0aW9uKG9wZXJhdGlvbik7XG5cbiAgICAgICAgICAgIGV4cGVjdChBc3luY1N0b3JhZ2Uuc2V0SXRlbSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgICAgICAgXCJAcGVuZGluZ19zeW5jX29wZXJhdGlvbnNcIixcbiAgICAgICAgICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJ0eXBlXCI6XCJjb21wbGV0aW9uXCInKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGxvYWQgcGVuZGluZyBvcGVyYXRpb25zIGZyb20gc3RvcmFnZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcGVyYXRpb25zID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IFwib3AxXCIsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY29tcGxldGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiY3JlYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IFwidXNlcjFcIixcbiAgICAgICAgICAgICAgICAgICAgaGFiaXRJZDogXCJoYWJpdDFcIixcbiAgICAgICAgICAgICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICAoQXN5bmNTdG9yYWdlLmdldEl0ZW0gYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShvcGVyYXRpb25zKSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgaW5zdGFuY2UgdG8gdHJpZ2dlciBsb2FkaW5nXG4gICAgICAgICAgICBjb25zdCBuZXdTeW5jU2VydmljZSA9IChzeW5jU2VydmljZSBhcyBhbnkpLmNvbnN0cnVjdG9yLmdldEluc3RhbmNlKCk7XG5cbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIGFzeW5jIGluaXRpYWxpemF0aW9uIHRvIGNvbXBsZXRlXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcblxuICAgICAgICAgICAgZXhwZWN0KEFzeW5jU3RvcmFnZS5nZXRJdGVtKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAgICAgICBcIkBwZW5kaW5nX3N5bmNfb3BlcmF0aW9uc1wiLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIlN5bmMgU3RhdHVzXCIsICgpID0+IHtcbiAgICAgICAgaXQoXCJzaG91bGQgcHJvdmlkZSBjdXJyZW50IHN5bmMgc3RhdHVzXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHN5bmNTZXJ2aWNlLmdldFN5bmNTdGF0dXMoKTtcblxuICAgICAgICAgICAgZXhwZWN0KHN0YXR1cykudG9IYXZlUHJvcGVydHkoXCJpc09ubGluZVwiKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGF0dXMpLnRvSGF2ZVByb3BlcnR5KFwibGFzdFN5bmNcIik7XG4gICAgICAgICAgICBleHBlY3Qoc3RhdHVzKS50b0hhdmVQcm9wZXJ0eShcInBlbmRpbmdPcGVyYXRpb25zXCIpO1xuICAgICAgICAgICAgZXhwZWN0KHN0YXR1cykudG9IYXZlUHJvcGVydHkoXCJzeW5jSW5Qcm9ncmVzc1wiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgYWxsb3cgc3Vic2NyaWJpbmcgdG8gc3RhdHVzIGNoYW5nZXNcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBqZXN0LmZuKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gc3luY1NlcnZpY2Uub25TeW5jU3RhdHVzQ2hhbmdlKGNhbGxiYWNrKTtcblxuICAgICAgICAgICAgZXhwZWN0KGNhbGxiYWNrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICAgICAgICAgIGlzT25saW5lOiBleHBlY3QuYW55KEJvb2xlYW4pLFxuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nT3BlcmF0aW9uczogZXhwZWN0LmFueShOdW1iZXIpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIkNhY2hlIENsZWFudXBcIiwgKCkgPT4ge1xuICAgICAgICBpdChcInNob3VsZCBjbGVhciBhbGwgY2FjaGVkIGRhdGFcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgc3luY1NlcnZpY2UuY2xlYXJDYWNoZSgpO1xuXG4gICAgICAgICAgICBleHBlY3QoQXN5bmNTdG9yYWdlLm11bHRpUmVtb3ZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbXG4gICAgICAgICAgICAgICAgXCJAaGFiaXRfc3RyZWFrc19jYWNoZVwiLFxuICAgICAgICAgICAgICAgIFwiQGhhYml0X2NvbXBsZXRpb25zX2NhY2hlXCIsXG4gICAgICAgICAgICAgICAgXCJAcGVuZGluZ19zeW5jX29wZXJhdGlvbnNcIixcbiAgICAgICAgICAgICAgICBcIkBsYXN0X3N5bmNfdGltZXN0YW1wXCIsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBWUFBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLDJDQUEyQyxFQUFFO0VBQUEsT0FBTztJQUMxREMsT0FBTyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBQ2xCQyxPQUFPLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDbEJFLFVBQVUsRUFBRUgsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNyQkcsV0FBVyxFQUFFSixJQUFJLENBQUND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