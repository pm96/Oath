{"version":3,"names":["fc","_interopRequireWildcard","require","describe","beforeEach","jest","clearAllMocks","it","_asyncToGenerator2","default","assert","asyncProperty","record","nudgeData","senderId","string","minLength","maxLength","senderName","receiverId","goalId","goalDescription","receiverData","fcmToken","option","displayName","fcmError","oneof","constant","_ref3","_ref2","pre","mockDoc","fn","mockGet","mockExists","mockData","mockResolvedValue","exists","data","mockReturnValue","get","mockFirestore","doc","mockSend","mockRejectedValue","Error","mockMessaging","send","sendNudgeNotification","_ref4","nudge","firestore","messaging","receiverRef","receiverDoc","console","log","message","token","notification","title","body","type","error","_x2","_x3","_x4","apply","arguments","expect","resolves","not","toThrow","toHaveBeenCalledWith","toHaveBeenCalled","objectContaining","_x","numRuns","receiverExists","boolean","hasFcmToken","_ref7","_ref6","messageId","_ref8","_x6","_x7","_x8","_x5","serviceError","_ref1","_ref0","mockAddDoc","id","mockNudgeCollection","add","createNudgeWithNotification","_ref10","nudgeCollection","nudgeDoc","Object","assign","timestamp","Date","cooldownUntil","now","notificationError","includes","_x0","_x1","_x10","_x11","result","toBeDefined","_x9","failureScenario","_ref13","_ref12","consoleLogs","consoleErrors","originalLog","originalError","push","sendNotificationWithLogging","_ref14","_x13","_x14","_x15","toContain","toHaveLength","_x12"],"sources":["gracefulNotificationDegradation.property.test.ts"],"sourcesContent":["/**\n * Property-Based Tests for Graceful Notification Degradation\n * Feature: social-nudging-feed\n */\n\nimport * as fc from \"fast-check\";\n\ndescribe(\"Graceful Notification Degradation Property-Based Tests\", () => {\n    beforeEach(() => {\n        jest.clearAllMocks();\n    });\n\n    /**\n     * **Feature: social-nudging-feed, Property 18: Graceful notification degradation**\n     * **Validates: Requirements 5.5**\n     */\n    describe(\"Property 18: Graceful notification degradation\", () => {\n        it(\"should record nudge in Firestore even when FCM notification fails\", async () => {\n            await fc.assert(\n                fc.asyncProperty(\n                    fc.record({\n                        nudgeData: fc.record({\n                            senderId: fc.string({ minLength: 1, maxLength: 50 }),\n                            senderName: fc.string({ minLength: 1, maxLength: 100 }),\n                            receiverId: fc.string({ minLength: 1, maxLength: 50 }),\n                            goalId: fc.string({ minLength: 1, maxLength: 50 }),\n                            goalDescription: fc.string({ minLength: 1, maxLength: 500 }),\n                        }),\n                        receiverData: fc.record({\n                            fcmToken: fc.option(fc.string({ minLength: 10, maxLength: 200 })),\n                            displayName: fc.string({ minLength: 1, maxLength: 100 }),\n                        }),\n                        fcmError: fc.oneof(\n                            fc.constant(\"messaging/invalid-registration-token\"),\n                            fc.constant(\"messaging/registration-token-not-registered\"),\n                            fc.constant(\"messaging/invalid-argument\"),\n                            fc.constant(\"messaging/internal-error\"),\n                            fc.constant(\"network-error\"),\n                        ),\n                    }),\n                    async ({ nudgeData, receiverData, fcmError }) => {\n                        // Ensure sender and receiver are different\n                        fc.pre(nudgeData.senderId !== nudgeData.receiverId);\n\n                        // Mock Firestore operations\n                        const mockDoc = jest.fn();\n                        const mockGet = jest.fn();\n                        const mockExists = jest.fn(() => true);\n                        const mockData = jest.fn(() => receiverData);\n\n                        mockGet.mockResolvedValue({\n                            exists: mockExists,\n                            data: mockData,\n                        });\n                        mockDoc.mockReturnValue({ get: mockGet });\n\n                        const mockFirestore = {\n                            doc: mockDoc,\n                        };\n\n                        // Mock FCM messaging that fails\n                        const mockSend = jest.fn();\n                        if (receiverData.fcmToken) {\n                            mockSend.mockRejectedValue(new Error(fcmError));\n                        }\n\n                        const mockMessaging = {\n                            send: mockSend,\n                        };\n\n                        // Simulate the sendNudgeNotification cloud function logic\n                        const sendNudgeNotification = async (\n                            nudge: typeof nudgeData,\n                            firestore: typeof mockFirestore,\n                            messaging: typeof mockMessaging,\n                        ) => {\n                            try {\n                                // Get receiver's data\n                                const receiverRef = firestore.doc(`users/${nudge.receiverId}`);\n                                const receiverDoc = await receiverRef.get();\n\n                                if (!receiverDoc.exists()) {\n                                    console.log(`Receiver ${nudge.receiverId} not found`);\n                                    return;\n                                }\n\n                                const receiverData = receiverDoc.data();\n                                const fcmToken = receiverData?.fcmToken;\n\n                                if (!fcmToken) {\n                                    console.log(`Receiver ${nudge.receiverId} has no FCM token`);\n                                    return;\n                                }\n\n                                // Attempt to send FCM notification\n                                const message = {\n                                    token: fcmToken,\n                                    notification: {\n                                        title: `ðŸ‘Š ${nudge.senderName} nudged you!`,\n                                        body: `Don't forget: ${nudge.goalDescription}`,\n                                    },\n                                    data: {\n                                        type: \"nudge\",\n                                        goalId: nudge.goalId,\n                                        senderId: nudge.senderId,\n                                        senderName: nudge.senderName,\n                                    },\n                                };\n\n                                await messaging.send(message);\n                                console.log(`Nudge notification sent successfully`);\n                            } catch (error) {\n                                // This is the key: log error but don't throw\n                                // This allows the nudge creation to continue\n                                console.error(\"Error sending nudge notification:\", error);\n                                // Graceful degradation: function completes without throwing\n                            }\n                        };\n\n                        // Execute the function\n                        await expect(\n                            sendNudgeNotification(nudgeData, mockFirestore, mockMessaging),\n                        ).resolves.not.toThrow();\n\n                        // Verify receiver lookup was attempted\n                        expect(mockDoc).toHaveBeenCalledWith(\n                            `users/${nudgeData.receiverId}`,\n                        );\n                        expect(mockGet).toHaveBeenCalled();\n\n                        if (receiverData.fcmToken) {\n                            // Verify FCM send was attempted\n                            expect(mockSend).toHaveBeenCalledWith(\n                                expect.objectContaining({\n                                    token: receiverData.fcmToken,\n                                    notification: {\n                                        title: `ðŸ‘Š ${nudgeData.senderName} nudged you!`,\n                                        body: `Don't forget: ${nudgeData.goalDescription}`,\n                                    },\n                                    data: {\n                                        type: \"nudge\",\n                                        goalId: nudgeData.goalId,\n                                        senderId: nudgeData.senderId,\n                                        senderName: nudgeData.senderName,\n                                    },\n                                }),\n                            );\n                        } else {\n                            // Verify FCM send was not attempted when no token\n                            expect(mockSend).not.toHaveBeenCalled();\n                        }\n\n                        // The key validation: function completes successfully\n                        // even when FCM fails, allowing nudge creation to proceed\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should handle missing FCM tokens gracefully without throwing\", async () => {\n            await fc.assert(\n                fc.asyncProperty(\n                    fc.record({\n                        nudgeData: fc.record({\n                            senderId: fc.string({ minLength: 1, maxLength: 50 }),\n                            senderName: fc.string({ minLength: 1, maxLength: 100 }),\n                            receiverId: fc.string({ minLength: 1, maxLength: 50 }),\n                            goalId: fc.string({ minLength: 1, maxLength: 50 }),\n                            goalDescription: fc.string({ minLength: 1, maxLength: 500 }),\n                        }),\n                        receiverExists: fc.boolean(),\n                        hasFcmToken: fc.boolean(),\n                    }),\n                    async ({ nudgeData, receiverExists, hasFcmToken }) => {\n                        // Ensure sender and receiver are different\n                        fc.pre(nudgeData.senderId !== nudgeData.receiverId);\n\n                        // Mock Firestore operations\n                        const mockDoc = jest.fn();\n                        const mockGet = jest.fn();\n                        const mockExists = jest.fn(() => receiverExists);\n                        const mockData = jest.fn(() => ({\n                            fcmToken: hasFcmToken ? \"valid-token\" : null,\n                            displayName: \"Test User\",\n                        }));\n\n                        mockGet.mockResolvedValue({\n                            exists: mockExists,\n                            data: mockData,\n                        });\n                        mockDoc.mockReturnValue({ get: mockGet });\n\n                        const mockFirestore = {\n                            doc: mockDoc,\n                        };\n\n                        // Mock FCM messaging\n                        const mockSend = jest\n                            .fn()\n                            .mockResolvedValue({ messageId: \"test-id\" });\n                        const mockMessaging = {\n                            send: mockSend,\n                        };\n\n                        // Simulate the sendNudgeNotification cloud function logic\n                        const sendNudgeNotification = async (\n                            nudge: typeof nudgeData,\n                            firestore: typeof mockFirestore,\n                            messaging: typeof mockMessaging,\n                        ) => {\n                            try {\n                                // Get receiver's data\n                                const receiverRef = firestore.doc(`users/${nudge.receiverId}`);\n                                const receiverDoc = await receiverRef.get();\n\n                                if (!receiverDoc.exists()) {\n                                    console.log(`Receiver ${nudge.receiverId} not found`);\n                                    return; // Graceful handling of missing user\n                                }\n\n                                const receiverData = receiverDoc.data();\n                                const fcmToken = receiverData?.fcmToken;\n\n                                if (!fcmToken) {\n                                    console.log(`Receiver ${nudge.receiverId} has no FCM token`);\n                                    return; // Graceful handling of missing token\n                                }\n\n                                // Send FCM notification\n                                const message = {\n                                    token: fcmToken,\n                                    notification: {\n                                        title: `ðŸ‘Š ${nudge.senderName} nudged you!`,\n                                        body: `Don't forget: ${nudge.goalDescription}`,\n                                    },\n                                    data: {\n                                        type: \"nudge\",\n                                        goalId: nudge.goalId,\n                                        senderId: nudge.senderId,\n                                        senderName: nudge.senderName,\n                                    },\n                                };\n\n                                await messaging.send(message);\n                                console.log(`Nudge notification sent successfully`);\n                            } catch (error) {\n                                // Log error but don't throw - graceful degradation\n                                console.error(\"Error sending nudge notification:\", error);\n                            }\n                        };\n\n                        // Execute the function - should never throw\n                        await expect(\n                            sendNudgeNotification(nudgeData, mockFirestore, mockMessaging),\n                        ).resolves.not.toThrow();\n\n                        // Verify receiver lookup was attempted\n                        expect(mockDoc).toHaveBeenCalledWith(\n                            `users/${nudgeData.receiverId}`,\n                        );\n                        expect(mockGet).toHaveBeenCalled();\n\n                        if (receiverExists && hasFcmToken) {\n                            // Verify FCM send was attempted when conditions are met\n                            expect(mockSend).toHaveBeenCalled();\n                        } else {\n                            // Verify FCM send was not attempted when conditions not met\n                            expect(mockSend).not.toHaveBeenCalled();\n                        }\n\n                        // Key validation: function always completes gracefully\n                        // regardless of receiver existence or FCM token availability\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should continue nudge creation workflow even when notification service is unavailable\", async () => {\n            await fc.assert(\n                fc.asyncProperty(\n                    fc.record({\n                        nudgeData: fc.record({\n                            senderId: fc.string({ minLength: 1, maxLength: 50 }),\n                            senderName: fc.string({ minLength: 1, maxLength: 100 }),\n                            receiverId: fc.string({ minLength: 1, maxLength: 50 }),\n                            goalId: fc.string({ minLength: 1, maxLength: 50 }),\n                            goalDescription: fc.string({ minLength: 1, maxLength: 500 }),\n                        }),\n                        serviceError: fc.oneof(\n                            fc.constant(\"Service temporarily unavailable\"),\n                            fc.constant(\"Network timeout\"),\n                            fc.constant(\"FCM service down\"),\n                            fc.constant(\"Authentication failed\"),\n                            fc.constant(\"Rate limit exceeded\"),\n                        ),\n                    }),\n                    async ({ nudgeData, serviceError }) => {\n                        // Ensure sender and receiver are different\n                        fc.pre(nudgeData.senderId !== nudgeData.receiverId);\n\n                        // Mock successful Firestore operations\n                        const mockDoc = jest.fn();\n                        const mockGet = jest.fn();\n                        const mockExists = jest.fn(() => true);\n                        const mockData = jest.fn(() => ({\n                            fcmToken: \"valid-token\",\n                            displayName: \"Test User\",\n                        }));\n\n                        mockGet.mockResolvedValue({\n                            exists: mockExists,\n                            data: mockData,\n                        });\n                        mockDoc.mockReturnValue({ get: mockGet });\n\n                        const mockFirestore = {\n                            doc: mockDoc,\n                        };\n\n                        // Mock FCM messaging that fails with service error\n                        const mockSend = jest\n                            .fn()\n                            .mockRejectedValue(new Error(serviceError));\n                        const mockMessaging = {\n                            send: mockSend,\n                        };\n\n                        // Mock the nudge creation process\n                        const mockAddDoc = jest.fn().mockResolvedValue({ id: \"nudge-123\" });\n                        const mockNudgeCollection = { add: mockAddDoc };\n\n                        // Simulate complete nudge creation workflow\n                        const createNudgeWithNotification = async (\n                            nudge: typeof nudgeData,\n                            nudgeCollection: typeof mockNudgeCollection,\n                            firestore: typeof mockFirestore,\n                            messaging: typeof mockMessaging,\n                        ) => {\n                            try {\n                                // Step 1: Create nudge document (this should always succeed)\n                                const nudgeDoc = await nudgeCollection.add({\n                                    ...nudge,\n                                    timestamp: new Date(),\n                                    cooldownUntil: new Date(Date.now() + 60 * 60 * 1000),\n                                });\n\n                                // Step 2: Attempt to send notification (this may fail gracefully)\n                                try {\n                                    const receiverRef = firestore.doc(\n                                        `users/${nudge.receiverId}`,\n                                    );\n                                    const receiverDoc = await receiverRef.get();\n\n                                    if (receiverDoc.exists()) {\n                                        const receiverData = receiverDoc.data();\n                                        const fcmToken = receiverData?.fcmToken;\n\n                                        if (fcmToken) {\n                                            const message = {\n                                                token: fcmToken,\n                                                notification: {\n                                                    title: `ðŸ‘Š ${nudge.senderName} nudged you!`,\n                                                    body: `Don't forget: ${nudge.goalDescription}`,\n                                                },\n                                                data: {\n                                                    type: \"nudge\",\n                                                    goalId: nudge.goalId,\n                                                    senderId: nudge.senderId,\n                                                    senderName: nudge.senderName,\n                                                },\n                                            };\n\n                                            await messaging.send(message);\n                                        }\n                                    }\n                                } catch (notificationError) {\n                                    // Log but don't throw - graceful degradation\n                                    console.error(\"Notification failed:\", notificationError);\n                                }\n\n                                return nudgeDoc;\n                            } catch (error) {\n                                // Only throw if nudge creation fails, not notification\n                                if (error.message.includes(\"nudge creation\")) {\n                                    throw error;\n                                }\n                                // Otherwise, log and continue\n                                console.error(\"Non-critical error:\", error);\n                                return { id: \"fallback-id\" };\n                            }\n                        };\n\n                        // Execute the workflow - should complete successfully\n                        const result = await createNudgeWithNotification(\n                            nudgeData,\n                            mockNudgeCollection,\n                            mockFirestore,\n                            mockMessaging,\n                        );\n\n                        // Verify nudge was created despite notification failure\n                        expect(result).toBeDefined();\n                        expect(result.id).toBeDefined();\n                        expect(mockAddDoc).toHaveBeenCalledWith(\n                            expect.objectContaining({\n                                senderId: nudgeData.senderId,\n                                senderName: nudgeData.senderName,\n                                receiverId: nudgeData.receiverId,\n                                goalId: nudgeData.goalId,\n                                goalDescription: nudgeData.goalDescription,\n                            }),\n                        );\n\n                        // Verify notification was attempted but failed gracefully\n                        expect(mockSend).toHaveBeenCalled();\n\n                        // Key validation: nudge creation succeeded despite notification failure\n                        // This demonstrates graceful degradation - core functionality (nudge recording)\n                        // continues even when auxiliary functionality (notifications) fails\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should log appropriate error messages for different notification failure scenarios\", async () => {\n            await fc.assert(\n                fc.asyncProperty(\n                    fc.record({\n                        nudgeData: fc.record({\n                            senderId: fc.string({ minLength: 1, maxLength: 50 }),\n                            senderName: fc.string({ minLength: 1, maxLength: 100 }),\n                            receiverId: fc.string({ minLength: 1, maxLength: 50 }),\n                            goalId: fc.string({ minLength: 1, maxLength: 50 }),\n                            goalDescription: fc.string({ minLength: 1, maxLength: 500 }),\n                        }),\n                        failureScenario: fc.oneof(\n                            fc.constant(\"no-receiver\"),\n                            fc.constant(\"no-token\"),\n                            fc.constant(\"fcm-error\"),\n                        ),\n                    }),\n                    async ({ nudgeData, failureScenario }) => {\n                        // Ensure sender and receiver are different\n                        fc.pre(nudgeData.senderId !== nudgeData.receiverId);\n\n                        // Mock console.log and console.error to track logging\n                        const consoleLogs: string[] = [];\n                        const consoleErrors: string[] = [];\n                        const originalLog = console.log;\n                        const originalError = console.error;\n\n                        console.log = jest.fn((message: string) => {\n                            consoleLogs.push(message);\n                        });\n                        console.error = jest.fn((message: string, error?: any) => {\n                            consoleErrors.push(message);\n                        });\n\n                        try {\n                            // Setup mocks based on failure scenario\n                            const mockDoc = jest.fn();\n                            const mockGet = jest.fn();\n                            let mockExists: jest.Mock;\n                            let mockData: jest.Mock;\n                            const mockSend = jest.fn();\n\n                            switch (failureScenario) {\n                                case \"no-receiver\":\n                                    mockExists = jest.fn(() => false);\n                                    mockData = jest.fn(() => null);\n                                    break;\n                                case \"no-token\":\n                                    mockExists = jest.fn(() => true);\n                                    mockData = jest.fn(() => ({ fcmToken: null }));\n                                    break;\n                                case \"fcm-error\":\n                                    mockExists = jest.fn(() => true);\n                                    mockData = jest.fn(() => ({ fcmToken: \"valid-token\" }));\n                                    mockSend.mockRejectedValue(new Error(\"FCM send failed\"));\n                                    break;\n                            }\n\n                            mockGet.mockResolvedValue({\n                                exists: mockExists,\n                                data: mockData,\n                            });\n                            mockDoc.mockReturnValue({ get: mockGet });\n\n                            const mockFirestore = { doc: mockDoc };\n                            const mockMessaging = { send: mockSend };\n\n                            // Simulate notification sending with logging\n                            const sendNotificationWithLogging = async (\n                                nudge: typeof nudgeData,\n                                firestore: typeof mockFirestore,\n                                messaging: typeof mockMessaging,\n                            ) => {\n                                try {\n                                    const receiverRef = firestore.doc(\n                                        `users/${nudge.receiverId}`,\n                                    );\n                                    const receiverDoc = await receiverRef.get();\n\n                                    if (!receiverDoc.exists()) {\n                                        console.log(`Receiver ${nudge.receiverId} not found`);\n                                        return;\n                                    }\n\n                                    const receiverData = receiverDoc.data();\n                                    const fcmToken = receiverData?.fcmToken;\n\n                                    if (!fcmToken) {\n                                        console.log(\n                                            `Receiver ${nudge.receiverId} has no FCM token`,\n                                        );\n                                        return;\n                                    }\n\n                                    const message = {\n                                        token: fcmToken,\n                                        notification: {\n                                            title: `ðŸ‘Š ${nudge.senderName} nudged you!`,\n                                            body: `Don't forget: ${nudge.goalDescription}`,\n                                        },\n                                    };\n\n                                    await messaging.send(message);\n                                    console.log(\"Nudge notification sent successfully\");\n                                } catch (error) {\n                                    console.error(\"Error sending nudge notification:\", error);\n                                }\n                            };\n\n                            // Execute the function\n                            await sendNotificationWithLogging(\n                                nudgeData,\n                                mockFirestore,\n                                mockMessaging,\n                            );\n\n                            // Verify appropriate logging based on scenario\n                            switch (failureScenario) {\n                                case \"no-receiver\":\n                                    expect(consoleLogs).toContain(\n                                        `Receiver ${nudgeData.receiverId} not found`,\n                                    );\n                                    expect(consoleErrors).toHaveLength(0);\n                                    break;\n                                case \"no-token\":\n                                    expect(consoleLogs).toContain(\n                                        `Receiver ${nudgeData.receiverId} has no FCM token`,\n                                    );\n                                    expect(consoleErrors).toHaveLength(0);\n                                    break;\n                                case \"fcm-error\":\n                                    expect(consoleErrors).toContain(\n                                        \"Error sending nudge notification:\",\n                                    );\n                                    break;\n                            }\n\n                            // Key validation: appropriate logging occurs for each failure scenario\n                            // This demonstrates proper error handling and observability\n                        } finally {\n                            // Restore original console methods\n                            console.log = originalLog;\n                            console.error = originalError;\n                        }\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n    });\n});\n"],"mappings":"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","ignoreList":[]}