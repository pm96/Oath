{"version":3,"names":["fc","_interopRequireWildcard","require","userIdArb","oneof","constant","goalIdArb","nudgeIdArb","testUserArb","record","userId","friends","array","maxLength","displayName","email","testGoalArb","goalId","ownerId","description","isShared","boolean","testNudgeArb","nudgeId","senderId","receiverId","goalDescription","authContextArb","uid","option","nil","isAuthenticated","canReadGoal","authContext","goal","users","goalOwner","find","u","includes","canReadNudge","nudge","canCreateNudge","sender","canAccessNudgeHistory","nudges","filter","describe","it","assert","property","minLength","canRead","expect","toBe","numRuns","currentUserId","pre","canCreate","canAccess","allNudges","queryUserId","accessibleNudges","toEqual","unrelatedNudges","length","unauthenticatedContext"],"sources":["securityRules.property.test.ts"],"sourcesContent":["/**\n * Property-Based Tests for Firestore Security Rules\n * Feature: social-nudging-feed\n */\n\nimport * as fc from \"fast-check\";\n\n/**\n * Test interfaces for security rule validation\n */\ninterface TestUser {\n    userId: string;\n    friends: string[];\n    displayName: string;\n    email: string;\n}\n\ninterface TestGoal {\n    goalId: string;\n    ownerId: string;\n    description: string;\n    isShared: boolean;\n}\n\ninterface TestNudge {\n    nudgeId: string;\n    senderId: string;\n    receiverId: string;\n    goalId: string;\n    goalDescription: string;\n}\n\ninterface AuthContext {\n    uid: string | null;\n    isAuthenticated: boolean;\n}\n\n// Optimized generators for faster test execution\nconst userIdArb = fc.oneof(\n    fc.constant(\"user-1\"),\n    fc.constant(\"user-2\"),\n    fc.constant(\"user-3\"),\n    fc.constant(\"user-4\"),\n    fc.constant(\"user-5\"),\n);\n\nconst goalIdArb = fc.oneof(\n    fc.constant(\"goal-1\"),\n    fc.constant(\"goal-2\"),\n    fc.constant(\"goal-3\"),\n    fc.constant(\"goal-4\"),\n);\n\nconst nudgeIdArb = fc.oneof(\n    fc.constant(\"nudge-1\"),\n    fc.constant(\"nudge-2\"),\n    fc.constant(\"nudge-3\"),\n);\n\nconst testUserArb = fc.record({\n    userId: userIdArb,\n    friends: fc.array(userIdArb, { maxLength: 3 }),\n    displayName: fc.constant(\"Test User\"),\n    email: fc.constant(\"test@example.com\"),\n});\n\nconst testGoalArb = fc.record({\n    goalId: goalIdArb,\n    ownerId: userIdArb,\n    description: fc.constant(\"Test goal\"),\n    isShared: fc.boolean(),\n});\n\nconst testNudgeArb = fc.record({\n    nudgeId: nudgeIdArb,\n    senderId: userIdArb,\n    receiverId: userIdArb,\n    goalId: goalIdArb,\n    goalDescription: fc.constant(\"Test goal description\"),\n});\n\nconst authContextArb = fc.record({\n    uid: fc.option(userIdArb, { nil: null }),\n    isAuthenticated: fc.boolean(),\n});\n\n// Helper functions that simulate Firestore security rule logic\nfunction canReadGoal(\n    authContext: AuthContext,\n    goal: TestGoal,\n    users: TestUser[],\n): boolean {\n    if (!authContext.isAuthenticated || !authContext.uid) {\n        return false;\n    }\n\n    // User can read their own goals\n    if (goal.ownerId === authContext.uid) {\n        return true;\n    }\n\n    // User can read goals of friends\n    const goalOwner = users.find((u) => u.userId === goal.ownerId);\n    if (goalOwner && goalOwner.friends.includes(authContext.uid)) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction canReadNudge(authContext: AuthContext, nudge: TestNudge): boolean {\n    if (!authContext.isAuthenticated || !authContext.uid) {\n        return false;\n    }\n\n    // User can read nudges where they are sender or receiver\n    return (\n        nudge.senderId === authContext.uid || nudge.receiverId === authContext.uid\n    );\n}\n\nfunction canCreateNudge(\n    authContext: AuthContext,\n    nudge: TestNudge,\n    users: TestUser[],\n): boolean {\n    if (!authContext.isAuthenticated || !authContext.uid) {\n        return false;\n    }\n\n    // User must be the sender\n    if (nudge.senderId !== authContext.uid) {\n        return false;\n    }\n\n    // Receiver must be in sender's friends list\n    const sender = users.find((u) => u.userId === authContext.uid);\n    if (!sender || !sender.friends.includes(nudge.receiverId)) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction canAccessNudgeHistory(\n    authContext: AuthContext,\n    nudges: TestNudge[],\n    userId: string,\n): TestNudge[] {\n    if (!authContext.isAuthenticated || !authContext.uid) {\n        return [];\n    }\n\n    // User can only see nudges where they are sender or receiver\n    return nudges.filter(\n        (nudge) =>\n            nudge.senderId === authContext.uid ||\n            nudge.receiverId === authContext.uid,\n    );\n}\n\ndescribe(\"Security Rules Property-Based Tests\", () => {\n    /**\n     * **Feature: social-nudging-feed, Property 29: Feed access authorization**\n     * **Validates: Requirements 10.1**\n     */\n    describe(\"Property 29: Feed access authorization\", () => {\n        it(\"should only allow reading goals belonging to friends or self\", () => {\n            fc.assert(\n                fc.property(\n                    authContextArb,\n                    testGoalArb,\n                    fc.array(testUserArb, { minLength: 1, maxLength: 5 }),\n                    (authContext, goal, users) => {\n                        const canRead = canReadGoal(authContext, goal, users);\n\n                        if (!authContext.isAuthenticated || !authContext.uid) {\n                            expect(canRead).toBe(false);\n                            return;\n                        }\n\n                        if (goal.ownerId === authContext.uid) {\n                            expect(canRead).toBe(true);\n                            return;\n                        }\n\n                        const goalOwner = users.find((u) => u.userId === goal.ownerId);\n                        if (goalOwner && goalOwner.friends.includes(authContext.uid)) {\n                            expect(canRead).toBe(true);\n                        } else {\n                            expect(canRead).toBe(false);\n                        }\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should deny access to goals of non-friends\", () => {\n            fc.assert(\n                fc.property(\n                    userIdArb,\n                    testGoalArb,\n                    fc.array(testUserArb, { minLength: 1, maxLength: 5 }),\n                    (currentUserId, goal, users) => {\n                        fc.pre(goal.ownerId !== currentUserId);\n\n                        const authContext = { uid: currentUserId, isAuthenticated: true };\n                        const goalOwner = users.find((u) => u.userId === goal.ownerId);\n\n                        fc.pre(goalOwner && !goalOwner.friends.includes(currentUserId));\n\n                        const canRead = canReadGoal(authContext, goal, users);\n                        expect(canRead).toBe(false);\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n    });\n\n    /**\n     * **Feature: social-nudging-feed, Property 30: Nudge authorization**\n     * **Validates: Requirements 10.2**\n     */\n    describe(\"Property 30: Nudge authorization\", () => {\n        it(\"should only allow creating nudges to friends\", () => {\n            fc.assert(\n                fc.property(\n                    authContextArb,\n                    testNudgeArb,\n                    fc.array(testUserArb, { minLength: 1, maxLength: 5 }),\n                    (authContext, nudge, users) => {\n                        const canCreate = canCreateNudge(authContext, nudge, users);\n\n                        if (!authContext.isAuthenticated || !authContext.uid) {\n                            expect(canCreate).toBe(false);\n                            return;\n                        }\n\n                        if (nudge.senderId !== authContext.uid) {\n                            expect(canCreate).toBe(false);\n                            return;\n                        }\n\n                        const sender = users.find((u) => u.userId === authContext.uid);\n                        if (sender && sender.friends.includes(nudge.receiverId)) {\n                            expect(canCreate).toBe(true);\n                        } else {\n                            expect(canCreate).toBe(false);\n                        }\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should deny nudge creation to non-friends\", () => {\n            fc.assert(\n                fc.property(\n                    userIdArb,\n                    userIdArb,\n                    goalIdArb,\n                    fc.array(testUserArb, { minLength: 1, maxLength: 5 }),\n                    (senderId, receiverId, goalId, users) => {\n                        fc.pre(senderId !== receiverId);\n\n                        const sender = users.find((u) => u.userId === senderId);\n                        fc.pre(sender && !sender.friends.includes(receiverId));\n\n                        const authContext = { uid: senderId, isAuthenticated: true };\n                        const nudge = {\n                            nudgeId: \"test-nudge\",\n                            senderId,\n                            receiverId,\n                            goalId,\n                            goalDescription: \"Test goal\",\n                        };\n\n                        const canCreate = canCreateNudge(authContext, nudge, users);\n                        expect(canCreate).toBe(false);\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n    });\n\n    /**\n     * **Feature: social-nudging-feed, Property 31: Goal detail access authorization**\n     * **Validates: Requirements 10.3**\n     */\n    describe(\"Property 31: Goal detail access authorization\", () => {\n        it(\"should allow goal detail access only to owner or friends\", () => {\n            fc.assert(\n                fc.property(\n                    authContextArb,\n                    testGoalArb,\n                    fc.array(testUserArb, { minLength: 1, maxLength: 5 }),\n                    (authContext, goal, users) => {\n                        // Goal detail access uses the same logic as feed access\n                        const canAccess = canReadGoal(authContext, goal, users);\n\n                        if (!authContext.isAuthenticated || !authContext.uid) {\n                            expect(canAccess).toBe(false);\n                            return;\n                        }\n\n                        if (goal.ownerId === authContext.uid) {\n                            expect(canAccess).toBe(true);\n                            return;\n                        }\n\n                        const goalOwner = users.find((u) => u.userId === goal.ownerId);\n                        if (goalOwner && goalOwner.friends.includes(authContext.uid)) {\n                            expect(canAccess).toBe(true);\n                        } else {\n                            expect(canAccess).toBe(false);\n                        }\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n    });\n\n    /**\n     * **Feature: social-nudging-feed, Property 32: Nudge history authorization**\n     * **Validates: Requirements 10.4**\n     */\n    describe(\"Property 32: Nudge history authorization\", () => {\n        it(\"should only return nudges where user is sender or receiver\", () => {\n            fc.assert(\n                fc.property(\n                    authContextArb,\n                    fc.array(testNudgeArb, { minLength: 0, maxLength: 10 }),\n                    userIdArb,\n                    (authContext, allNudges, queryUserId) => {\n                        const accessibleNudges = canAccessNudgeHistory(\n                            authContext,\n                            allNudges,\n                            queryUserId,\n                        );\n\n                        if (!authContext.isAuthenticated || !authContext.uid) {\n                            expect(accessibleNudges).toEqual([]);\n                            return;\n                        }\n\n                        for (const nudge of accessibleNudges) {\n                            expect(\n                                nudge.senderId === authContext.uid ||\n                                nudge.receiverId === authContext.uid,\n                            ).toBe(true);\n                        }\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should exclude nudges where user is neither sender nor receiver\", () => {\n            fc.assert(\n                fc.property(\n                    userIdArb,\n                    fc.array(testNudgeArb, { minLength: 1, maxLength: 10 }),\n                    (currentUserId, allNudges) => {\n                        // Filter to nudges where user is not involved\n                        const unrelatedNudges = allNudges.filter(\n                            (nudge) =>\n                                nudge.senderId !== currentUserId &&\n                                nudge.receiverId !== currentUserId,\n                        );\n\n                        fc.pre(unrelatedNudges.length > 0);\n\n                        const authContext = { uid: currentUserId, isAuthenticated: true };\n                        const accessibleNudges = canAccessNudgeHistory(\n                            authContext,\n                            unrelatedNudges,\n                            currentUserId,\n                        );\n\n                        expect(accessibleNudges).toEqual([]);\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n    });\n\n    /**\n     * **Feature: social-nudging-feed, Property 33: Unauthenticated access denial**\n     * **Validates: Requirements 10.5**\n     */\n    describe(\"Property 33: Unauthenticated access denial\", () => {\n        it(\"should deny all goal access for unauthenticated users\", () => {\n            fc.assert(\n                fc.property(\n                    testGoalArb,\n                    fc.array(testUserArb, { minLength: 1, maxLength: 5 }),\n                    (goal, users) => {\n                        const unauthenticatedContext = {\n                            uid: null,\n                            isAuthenticated: false,\n                        };\n                        const canRead = canReadGoal(unauthenticatedContext, goal, users);\n                        expect(canRead).toBe(false);\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should deny all nudge access for unauthenticated users\", () => {\n            fc.assert(\n                fc.property(\n                    testNudgeArb,\n                    fc.array(testUserArb, { minLength: 1, maxLength: 5 }),\n                    (nudge, users) => {\n                        const unauthenticatedContext = {\n                            uid: null,\n                            isAuthenticated: false,\n                        };\n\n                        const canRead = canReadNudge(unauthenticatedContext, nudge);\n                        expect(canRead).toBe(false);\n\n                        const canCreate = canCreateNudge(\n                            unauthenticatedContext,\n                            nudge,\n                            users,\n                        );\n                        expect(canCreate).toBe(false);\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should deny nudge history access for unauthenticated users\", () => {\n            fc.assert(\n                fc.property(\n                    fc.array(testNudgeArb, { minLength: 0, maxLength: 10 }),\n                    userIdArb,\n                    (allNudges, queryUserId) => {\n                        const unauthenticatedContext = {\n                            uid: null,\n                            isAuthenticated: false,\n                        };\n                        const accessibleNudges = canAccessNudgeHistory(\n                            unauthenticatedContext,\n                            allNudges,\n                            queryUserId,\n                        );\n                        expect(accessibleNudges).toEqual([]);\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n    });\n});\n"],"mappings":"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","ignoreList":[]}