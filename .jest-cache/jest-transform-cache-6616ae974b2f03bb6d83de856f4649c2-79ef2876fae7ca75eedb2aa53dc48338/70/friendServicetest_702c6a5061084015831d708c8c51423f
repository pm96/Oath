0c24bf7760fa4da6b23acd301dd9889c
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;
var fc = _interopRequireWildcard(require("fast-check"));
function filterSearchResults(query, currentUserId, allUsers) {
  if (!query || query.trim().length === 0) {
    return [];
  }
  var normalizedQuery = query.trim().toLowerCase();
  return allUsers.filter(function (user) {
    if (user.userId === currentUserId) {
      return false;
    }
    var matchesEmail = user.email.toLowerCase().includes(normalizedQuery);
    var matchesName = user.displayName.toLowerCase().includes(normalizedQuery);
    return matchesEmail || matchesName;
  }).map(function (user) {
    return {
      userId: user.userId,
      displayName: user.displayName,
      email: user.email,
      relationshipStatus: "none",
      shameScore: user.shameScore
    };
  });
}
describe("Friend Service Property-Based Tests", function () {
  describe("Property 1: Search results match query", function () {
    it("should return only users matching the query and exclude the current user", function () {
      fc.assert(fc.property(fc.string({
        minLength: 1,
        maxLength: 20
      }).filter(function (s) {
        return s.trim().length > 0;
      }), fc.uuid(), fc.array(fc.record({
        userId: fc.uuid(),
        email: fc.emailAddress(),
        displayName: fc.string({
          minLength: 1,
          maxLength: 30
        }),
        shameScore: fc.integer({
          min: 0,
          max: 100
        })
      }), {
        minLength: 0,
        maxLength: 20
      }), function (query, currentUserId, allUsers) {
        var results = filterSearchResults(query, currentUserId, allUsers);
        var normalizedQuery = query.trim().toLowerCase();
        for (var result of results) {
          var matchesEmail = result.email.toLowerCase().includes(normalizedQuery);
          var matchesName = result.displayName.toLowerCase().includes(normalizedQuery);
          expect(matchesEmail || matchesName).toBe(true);
        }
        var currentUserInResults = results.some(function (r) {
          return r.userId === currentUserId;
        });
        expect(currentUserInResults).toBe(false);
        var _loop = function _loop(_result) {
          var existsInInput = allUsers.some(function (u) {
            return u.userId === _result.userId;
          });
          expect(existsInInput).toBe(true);
        };
        for (var _result of results) {
          _loop(_result);
        }
        var userIds = results.map(function (r) {
          return r.userId;
        });
        var uniqueUserIds = new Set(userIds);
        expect(userIds.length).toBe(uniqueUserIds.size);
      }), {
        numRuns: 100
      });
    });
    it("should return empty array for empty query", function () {
      fc.assert(fc.property(fc.uuid(), fc.array(fc.record({
        userId: fc.uuid(),
        email: fc.emailAddress(),
        displayName: fc.string({
          minLength: 1,
          maxLength: 30
        }),
        shameScore: fc.integer({
          min: 0,
          max: 100
        })
      }), {
        minLength: 0,
        maxLength: 20
      }), function (currentUserId, allUsers) {
        var results = filterSearchResults("", currentUserId, allUsers);
        expect(results).toEqual([]);
      }), {
        numRuns: 100
      });
    });
    it("should perform case-insensitive matching", function () {
      fc.assert(fc.property(fc.string({
        minLength: 1,
        maxLength: 20
      }).filter(function (s) {
        return s.trim().length > 0;
      }), fc.uuid(), fc.array(fc.record({
        userId: fc.uuid(),
        email: fc.emailAddress(),
        displayName: fc.string({
          minLength: 1,
          maxLength: 30
        }),
        shameScore: fc.integer({
          min: 0,
          max: 100
        })
      }), {
        minLength: 0,
        maxLength: 20
      }), function (query, currentUserId, allUsers) {
        var lowerResults = filterSearchResults(query.toLowerCase(), currentUserId, allUsers);
        var upperResults = filterSearchResults(query.toUpperCase(), currentUserId, allUsers);
        var mixedResults = filterSearchResults(query, currentUserId, allUsers);
        var lowerIds = new Set(lowerResults.map(function (r) {
          return r.userId;
        }));
        var upperIds = new Set(upperResults.map(function (r) {
          return r.userId;
        }));
        var mixedIds = new Set(mixedResults.map(function (r) {
          return r.userId;
        }));
        expect(lowerIds).toEqual(upperIds);
        expect(lowerIds).toEqual(mixedIds);
      }), {
        numRuns: 100
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmYyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsImZpbHRlclNlYXJjaFJlc3VsdHMiLCJxdWVyeSIsImN1cnJlbnRVc2VySWQiLCJhbGxVc2VycyIsInRyaW0iLCJsZW5ndGgiLCJub3JtYWxpemVkUXVlcnkiLCJ0b0xvd2VyQ2FzZSIsImZpbHRlciIsInVzZXIiLCJ1c2VySWQiLCJtYXRjaGVzRW1haWwiLCJlbWFpbCIsImluY2x1ZGVzIiwibWF0Y2hlc05hbWUiLCJkaXNwbGF5TmFtZSIsIm1hcCIsInJlbGF0aW9uc2hpcFN0YXR1cyIsInNoYW1lU2NvcmUiLCJkZXNjcmliZSIsIml0IiwiYXNzZXJ0IiwicHJvcGVydHkiLCJzdHJpbmciLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJzIiwidXVpZCIsImFycmF5IiwicmVjb3JkIiwiZW1haWxBZGRyZXNzIiwiaW50ZWdlciIsIm1pbiIsIm1heCIsInJlc3VsdHMiLCJyZXN1bHQiLCJleHBlY3QiLCJ0b0JlIiwiY3VycmVudFVzZXJJblJlc3VsdHMiLCJzb21lIiwiciIsIl9sb29wIiwiX3Jlc3VsdCIsImV4aXN0c0luSW5wdXQiLCJ1IiwidXNlcklkcyIsInVuaXF1ZVVzZXJJZHMiLCJTZXQiLCJzaXplIiwibnVtUnVucyIsInRvRXF1YWwiLCJsb3dlclJlc3VsdHMiLCJ1cHBlclJlc3VsdHMiLCJ0b1VwcGVyQ2FzZSIsIm1peGVkUmVzdWx0cyIsImxvd2VySWRzIiwidXBwZXJJZHMiLCJtaXhlZElkcyJdLCJzb3VyY2VzIjpbImZyaWVuZFNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFByb3BlcnR5LUJhc2VkIFRlc3RzIGZvciBGcmllbmQgU2VydmljZVxuICogRmVhdHVyZTogZnJpZW5kLW1hbmFnZW1lbnQtdWlcbiAqL1xuXG5pbXBvcnQgKiBhcyBmYyBmcm9tIFwiZmFzdC1jaGVja1wiO1xuXG4vKipcbiAqICoqRmVhdHVyZTogZnJpZW5kLW1hbmFnZW1lbnQtdWksIFByb3BlcnR5IDE6IFNlYXJjaCByZXN1bHRzIG1hdGNoIHF1ZXJ5KipcbiAqICoqVmFsaWRhdGVzOiBSZXF1aXJlbWVudHMgMS4xKipcbiAqXG4gKiBGb3IgYW55IHNlYXJjaCBxdWVyeSBhbmQgdXNlciBkYXRhYmFzZSwgYWxsIHJldHVybmVkIHJlc3VsdHMgc2hvdWxkIGhhdmVcbiAqIGVpdGhlciBlbWFpbCBvciBkaXNwbGF5TmFtZSBtYXRjaGluZyB0aGUgcXVlcnksIGFuZCBzaG91bGQgbmV2ZXIgaW5jbHVkZVxuICogdGhlIHNlYXJjaGluZyB1c2VyJ3Mgb3duIGFjY291bnQuXG4gKlxuICogVGhpcyB0ZXN0IHZhbGlkYXRlcyB0aGUgY29yZSBsb2dpYyBvZiBzZWFyY2ggcmVzdWx0IGZpbHRlcmluZyB3aXRob3V0XG4gKiByZXF1aXJpbmcgYSBsaXZlIEZpcmViYXNlIGNvbm5lY3Rpb24uXG4gKi9cblxuaW50ZXJmYWNlIFRlc3RVc2VyIHtcbiAgICB1c2VySWQ6IHN0cmluZztcbiAgICBlbWFpbDogc3RyaW5nO1xuICAgIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gICAgc2hhbWVTY29yZTogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgVXNlclNlYXJjaFJlc3VsdCB7XG4gICAgdXNlcklkOiBzdHJpbmc7XG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgICBlbWFpbDogc3RyaW5nO1xuICAgIHJlbGF0aW9uc2hpcFN0YXR1czogXCJub25lXCIgfCBcImZyaWVuZFwiIHwgXCJwZW5kaW5nX3NlbnRcIiB8IFwicGVuZGluZ19yZWNlaXZlZFwiO1xuICAgIHNoYW1lU2NvcmU/OiBudW1iZXI7XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0aGF0IHNpbXVsYXRlcyB0aGUgc2VhcmNoIGZpbHRlcmluZyBsb2dpY1xuZnVuY3Rpb24gZmlsdGVyU2VhcmNoUmVzdWx0cyhcbiAgICBxdWVyeTogc3RyaW5nLFxuICAgIGN1cnJlbnRVc2VySWQ6IHN0cmluZyxcbiAgICBhbGxVc2VyczogVGVzdFVzZXJbXSxcbik6IFVzZXJTZWFyY2hSZXN1bHRbXSB7XG4gICAgaWYgKCFxdWVyeSB8fCBxdWVyeS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBub3JtYWxpemVkUXVlcnkgPSBxdWVyeS50cmltKCkudG9Mb3dlckNhc2UoKTtcblxuICAgIHJldHVybiBhbGxVc2Vyc1xuICAgICAgICAuZmlsdGVyKCh1c2VyKSA9PiB7XG4gICAgICAgICAgICAvLyBFeGNsdWRlIGN1cnJlbnQgdXNlclxuICAgICAgICAgICAgaWYgKHVzZXIudXNlcklkID09PSBjdXJyZW50VXNlcklkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBlbWFpbCBvciBkaXNwbGF5TmFtZSBtYXRjaGVzIHF1ZXJ5XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVzRW1haWwgPSB1c2VyLmVtYWlsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobm9ybWFsaXplZFF1ZXJ5KTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXNOYW1lID0gdXNlci5kaXNwbGF5TmFtZVxuICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgLmluY2x1ZGVzKG5vcm1hbGl6ZWRRdWVyeSk7XG5cbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzRW1haWwgfHwgbWF0Y2hlc05hbWU7XG4gICAgICAgIH0pXG4gICAgICAgIC5tYXAoKHVzZXIpID0+ICh7XG4gICAgICAgICAgICB1c2VySWQ6IHVzZXIudXNlcklkLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHVzZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcFN0YXR1czogXCJub25lXCIgYXMgY29uc3QsXG4gICAgICAgICAgICBzaGFtZVNjb3JlOiB1c2VyLnNoYW1lU2NvcmUsXG4gICAgICAgIH0pKTtcbn1cblxuZGVzY3JpYmUoXCJGcmllbmQgU2VydmljZSBQcm9wZXJ0eS1CYXNlZCBUZXN0c1wiLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoXCJQcm9wZXJ0eSAxOiBTZWFyY2ggcmVzdWx0cyBtYXRjaCBxdWVyeVwiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBvbmx5IHVzZXJzIG1hdGNoaW5nIHRoZSBxdWVyeSBhbmQgZXhjbHVkZSB0aGUgY3VycmVudCB1c2VyXCIsICgpID0+IHtcbiAgICAgICAgICAgIGZjLmFzc2VydChcbiAgICAgICAgICAgICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgZmNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMjAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKHMpID0+IHMudHJpbSgpLmxlbmd0aCA+IDApLFxuICAgICAgICAgICAgICAgICAgICBmYy51dWlkKCksXG4gICAgICAgICAgICAgICAgICAgIGZjLmFycmF5KFxuICAgICAgICAgICAgICAgICAgICAgICAgZmMucmVjb3JkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGZjLnV1aWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogZmMuZW1haWxBZGRyZXNzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAzMCB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFtZVNjb3JlOiBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtaW5MZW5ndGg6IDAsIG1heExlbmd0aDogMjAgfSxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgKHF1ZXJ5LCBjdXJyZW50VXNlcklkLCBhbGxVc2VycykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGZpbHRlclNlYXJjaFJlc3VsdHMocXVlcnksIGN1cnJlbnRVc2VySWQsIGFsbFVzZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRRdWVyeSA9IHF1ZXJ5LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlc0VtYWlsID0gcmVzdWx0LmVtYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhub3JtYWxpemVkUXVlcnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXNOYW1lID0gcmVzdWx0LmRpc3BsYXlOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhub3JtYWxpemVkUXVlcnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChtYXRjaGVzRW1haWwgfHwgbWF0Y2hlc05hbWUpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRVc2VySW5SZXN1bHRzID0gcmVzdWx0cy5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyKSA9PiByLnVzZXJJZCA9PT0gY3VycmVudFVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QoY3VycmVudFVzZXJJblJlc3VsdHMpLnRvQmUoZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RzSW5JbnB1dCA9IGFsbFVzZXJzLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1KSA9PiB1LnVzZXJJZCA9PT0gcmVzdWx0LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChleGlzdHNJbklucHV0KS50b0JlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VySWRzID0gcmVzdWx0cy5tYXAoKHIpID0+IHIudXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVuaXF1ZVVzZXJJZHMgPSBuZXcgU2V0KHVzZXJJZHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHVzZXJJZHMubGVuZ3RoKS50b0JlKHVuaXF1ZVVzZXJJZHMuc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB7IG51bVJ1bnM6IDEwMCB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IGZvciBlbXB0eSBxdWVyeVwiLCAoKSA9PiB7XG4gICAgICAgICAgICBmYy5hc3NlcnQoXG4gICAgICAgICAgICAgICAgZmMucHJvcGVydHkoXG4gICAgICAgICAgICAgICAgICAgIGZjLnV1aWQoKSxcbiAgICAgICAgICAgICAgICAgICAgZmMuYXJyYXkoXG4gICAgICAgICAgICAgICAgICAgICAgICBmYy5yZWNvcmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZmMudXVpZCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBmYy5lbWFpbEFkZHJlc3MoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDMwIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYW1lU2NvcmU6IGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogMTAwIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG1pbkxlbmd0aDogMCwgbWF4TGVuZ3RoOiAyMCB9LFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAoY3VycmVudFVzZXJJZCwgYWxsVXNlcnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBmaWx0ZXJTZWFyY2hSZXN1bHRzKFwiXCIsIGN1cnJlbnRVc2VySWQsIGFsbFVzZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHRzKS50b0VxdWFsKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHsgbnVtUnVuczogMTAwIH0sXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBwZXJmb3JtIGNhc2UtaW5zZW5zaXRpdmUgbWF0Y2hpbmdcIiwgKCkgPT4ge1xuICAgICAgICAgICAgZmMuYXNzZXJ0KFxuICAgICAgICAgICAgICAgIGZjLnByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICBmY1xuICAgICAgICAgICAgICAgICAgICAgICAgLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAyMCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigocykgPT4gcy50cmltKCkubGVuZ3RoID4gMCksXG4gICAgICAgICAgICAgICAgICAgIGZjLnV1aWQoKSxcbiAgICAgICAgICAgICAgICAgICAgZmMuYXJyYXkoXG4gICAgICAgICAgICAgICAgICAgICAgICBmYy5yZWNvcmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZmMudXVpZCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBmYy5lbWFpbEFkZHJlc3MoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDMwIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYW1lU2NvcmU6IGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogMTAwIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG1pbkxlbmd0aDogMCwgbWF4TGVuZ3RoOiAyMCB9LFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAocXVlcnksIGN1cnJlbnRVc2VySWQsIGFsbFVzZXJzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb3dlclJlc3VsdHMgPSBmaWx0ZXJTZWFyY2hSZXN1bHRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxVc2VycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cHBlclJlc3VsdHMgPSBmaWx0ZXJTZWFyY2hSZXN1bHRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxVc2VycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaXhlZFJlc3VsdHMgPSBmaWx0ZXJTZWFyY2hSZXN1bHRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsVXNlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb3dlcklkcyA9IG5ldyBTZXQobG93ZXJSZXN1bHRzLm1hcCgocikgPT4gci51c2VySWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwcGVySWRzID0gbmV3IFNldCh1cHBlclJlc3VsdHMubWFwKChyKSA9PiByLnVzZXJJZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWl4ZWRJZHMgPSBuZXcgU2V0KG1peGVkUmVzdWx0cy5tYXAoKHIpID0+IHIudXNlcklkKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChsb3dlcklkcykudG9FcXVhbCh1cHBlcklkcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QobG93ZXJJZHMpLnRvRXF1YWwobWl4ZWRJZHMpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgeyBudW1SdW5zOiAx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