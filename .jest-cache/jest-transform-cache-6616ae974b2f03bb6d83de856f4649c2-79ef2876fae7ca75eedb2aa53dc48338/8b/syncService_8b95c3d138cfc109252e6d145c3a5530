78fd4d046998f3b1f0db4cde851f5bdf
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.syncService = exports.SyncService = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _firebaseConfig = require("../../firebaseConfig");
var _errorHandling = require("../../utils/errorHandling");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _firestore = require("firebase/firestore");
var _collections = require("./collections");
var _habitStreakSchemas = require("./habitStreakSchemas");
var SyncService = exports.SyncService = function () {
  function SyncService() {
    (0, _classCallCheck2.default)(this, SyncService);
    this.syncListeners = new Map();
    this.pendingOperations = new Map();
    this.syncStatus = {
      isOnline: true,
      lastSync: null,
      pendingOperations: 0,
      syncInProgress: false
    };
    this.statusCallbacks = new Set();
    this.initializeSync();
  }
  return (0, _createClass2.default)(SyncService, [{
    key: "initializeSync",
    value: (function () {
      var _initializeSync = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield this.loadPendingOperations();
          var online = yield (0, _errorHandling.isOnline)();
          this.updateSyncStatus({
            isOnline: online
          });
          if (online) {
            yield this.processPendingOperations();
          }
          this.startConnectivityMonitoring();
        } catch (error) {
          console.error("Failed to initialize sync service:", error);
        }
      });
      function initializeSync() {
        return _initializeSync.apply(this, arguments);
      }
      return initializeSync;
    }())
  }, {
    key: "startRealtimeSync",
    value: (function () {
      var _startRealtimeSync = (0, _asyncToGenerator2.default)(function* (userId) {
        var _this = this;
        if (!userId) {
          throw new Error("User ID is required for sync");
        }
        this.stopRealtimeSync(userId);
        try {
          var streaksCollection = (0, _collections.getHabitStreaksCollection)();
          var streaksQuery = (0, _firestore.query)(streaksCollection, (0, _firestore.where)("userId", "==", userId));
          var streakListener = (0, _firestore.onSnapshot)(streaksQuery, function (snapshot) {
            snapshot.docChanges().forEach(function () {
              var _ref = (0, _asyncToGenerator2.default)(function* (change) {
                var streakData = change.doc.data();
                yield _this.handleRealtimeStreakUpdate(change.doc.id, streakData, change.type);
              });
              return function (_x2) {
                return _ref.apply(this, arguments);
              };
            }());
          }, function (error) {
            console.error("Streak sync error:", error);
            _this.handleSyncError(error);
          });
          var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
          var completionsQuery = (0, _firestore.query)(completionsCollection, (0, _firestore.where)("userId", "==", userId));
          var completionListener = (0, _firestore.onSnapshot)(completionsQuery, function (snapshot) {
            snapshot.docChanges().forEach(function () {
              var _ref2 = (0, _asyncToGenerator2.default)(function* (change) {
                var completionData = change.doc.data();
                yield _this.handleRealtimeCompletionUpdate(change.doc.id, completionData, change.type);
              });
              return function (_x3) {
                return _ref2.apply(this, arguments);
              };
            }());
          }, function (error) {
            console.error("Completion sync error:", error);
            _this.handleSyncError(error);
          });
          this.syncListeners.set(`streaks_${userId}`, streakListener);
          this.syncListeners.set(`completions_${userId}`, completionListener);
        } catch (error) {
          console.error("Failed to start realtime sync:", error);
          throw error;
        }
      });
      function startRealtimeSync(_x) {
        return _startRealtimeSync.apply(this, arguments);
      }
      return startRealtimeSync;
    }())
  }, {
    key: "stopRealtimeSync",
    value: function stopRealtimeSync(userId) {
      var streakKey = `streaks_${userId}`;
      var completionKey = `completions_${userId}`;
      var streakListener = this.syncListeners.get(streakKey);
      if (streakListener) {
        streakListener();
        this.syncListeners.delete(streakKey);
      }
      var completionListener = this.syncListeners.get(completionKey);
      if (completionListener) {
        completionListener();
        this.syncListeners.delete(completionKey);
      }
    }
  }, {
    key: "cacheData",
    value: (function () {
      var _cacheData = (0, _asyncToGenerator2.default)(function* (key, data) {
        var version = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
        try {
          var checksum = this.generateChecksum(data);
          var cachedData = {
            data: data,
            timestamp: _firestore.Timestamp.now(),
            version: version,
            checksum: checksum
          };
          yield _asyncStorage.default.setItem(key, JSON.stringify(cachedData));
        } catch (error) {
          console.error("Failed to cache data:", error);
        }
      });
      function cacheData(_x4, _x5) {
        return _cacheData.apply(this, arguments);
      }
      return cacheData;
    }())
  }, {
    key: "getCachedData",
    value: (function () {
      var _getCachedData = (0, _asyncToGenerator2.default)(function* (key) {
        try {
          var cachedString = yield _asyncStorage.default.getItem(key);
          if (!cachedString) {
            return null;
          }
          var cachedData = JSON.parse(cachedString);
          var expectedChecksum = this.generateChecksum(cachedData.data);
          if (cachedData.checksum !== expectedChecksum) {
            console.warn("Cache integrity check failed, removing corrupted data");
            yield _asyncStorage.default.removeItem(key);
            return null;
          }
          return cachedData.data;
        } catch (error) {
          console.error("Failed to retrieve cached data:", error);
          return null;
        }
      });
      function getCachedData(_x6) {
        return _getCachedData.apply(this, arguments);
      }
      return getCachedData;
    }())
  }, {
    key: "cleanupCachePrefix",
    value: (function () {
      var _cleanupCachePrefix = (0, _asyncToGenerator2.default)(function* (prefix, activeDocIds) {
        try {
          var allKeys = yield _asyncStorage.default.getAllKeys();
          if (!allKeys || allKeys.length === 0) {
            return;
          }
          var prefixWithSeparator = `${prefix}_`;
          var allowedKeys = activeDocIds && new Set(Array.from(activeDocIds.values()).map(function (id) {
            return `${prefixWithSeparator}${id}`;
          }));
          var keysToRemove = allKeys.filter(function (key) {
            if (!key.startsWith(prefixWithSeparator)) {
              return false;
            }
            if (!allowedKeys) {
              return true;
            }
            return !allowedKeys.has(key);
          });
          if (keysToRemove.length > 0) {
            yield _asyncStorage.default.multiRemove(keysToRemove);
          }
        } catch (error) {
          console.error("Failed to clean up cache prefix:", error);
        }
      });
      function cleanupCachePrefix(_x7, _x8) {
        return _cleanupCachePrefix.apply(this, arguments);
      }
      return cleanupCachePrefix;
    }())
  }, {
    key: "queueOperation",
    value: (function () {
      var _queueOperation = (0, _asyncToGenerator2.default)(function* (operation) {
        var syncOp = Object.assign({}, operation, {
          id: this.generateOperationId(),
          timestamp: _firestore.Timestamp.now(),
          retryCount: 0
        });
        this.pendingOperations.set(syncOp.id, syncOp);
        yield this.savePendingOperations();
        this.updateSyncStatus({
          pendingOperations: this.pendingOperations.size
        });
        if (this.syncStatus.isOnline) {
          yield this.processPendingOperations();
        }
      });
      function queueOperation(_x9) {
        return _queueOperation.apply(this, arguments);
      }
      return queueOperation;
    }())
  }, {
    key: "processPendingOperations",
    value: (function () {
      var _processPendingOperations = (0, _asyncToGenerator2.default)(function* () {
        if (this.syncStatus.syncInProgress || this.pendingOperations.size === 0) {
          return;
        }
        this.updateSyncStatus({
          syncInProgress: true
        });
        try {
          var operations = Array.from(this.pendingOperations.values()).sort(function (a, b) {
            return a.timestamp.toMillis() - b.timestamp.toMillis();
          });
          for (var operation of operations) {
            try {
              yield this.executeOperation(operation);
              this.pendingOperations.delete(operation.id);
            } catch (error) {
              console.error("Failed to execute operation:", error);
              operation.retryCount++;
              operation.lastAttempt = _firestore.Timestamp.now();
              if (operation.retryCount >= 3) {
                console.warn("Max retries exceeded, removing operation:", operation.id);
                this.pendingOperations.delete(operation.id);
              }
            }
          }
          yield this.savePendingOperations();
          this.updateSyncStatus({
            pendingOperations: this.pendingOperations.size,
            lastSync: _firestore.Timestamp.now()
          });
        } finally {
          this.updateSyncStatus({
            syncInProgress: false
          });
        }
      });
      function processPendingOperations() {
        return _processPendingOperations.apply(this, arguments);
      }
      return processPendingOperations;
    }())
  }, {
    key: "executeOperation",
    value: (function () {
      var _executeOperation = (0, _asyncToGenerator2.default)(function* (operation) {
        var _this2 = this;
        return yield (0, _errorHandling.retryWithBackoff)((0, _asyncToGenerator2.default)(function* () {
          return yield (0, _firestore.runTransaction)(_firebaseConfig.db, function () {
            var _ref4 = (0, _asyncToGenerator2.default)(function* (transaction) {
              switch (operation.type) {
                case "completion":
                  yield _this2.executeCompletionOperation(operation, transaction);
                  break;
                case "streak":
                  yield _this2.executeStreakOperation(operation, transaction);
                  break;
                case "milestone":
                  yield _this2.executeMilestoneOperation(operation, transaction);
                  break;
                default:
                  throw new Error(`Unknown operation type: ${operation.type}`);
              }
            });
            return function (_x1) {
              return _ref4.apply(this, arguments);
            };
          }());
        }));
      });
      function executeOperation(_x0) {
        return _executeOperation.apply(this, arguments);
      }
      return executeOperation;
    }())
  }, {
    key: "handleRealtimeStreakUpdate",
    value: (function () {
      var _handleRealtimeStreakUpdate = (0, _asyncToGenerator2.default)(function* (docId, data, changeType) {
        try {
          if (changeType === "removed") {
            var removeCacheKey = `${SyncService.CACHE_KEYS.STREAKS}_${docId}`;
            yield _asyncStorage.default.removeItem(removeCacheKey);
            return;
          }
          var streak = (0, _habitStreakSchemas.transformFirestoreToStreak)(data);
          var cacheKey = `${SyncService.CACHE_KEYS.STREAKS}_${docId}`;
          var cachedStreak = yield this.getCachedData(cacheKey);
          if (cachedStreak && this.hasConflict(cachedStreak, streak)) {
            var resolvedStreak = yield this.resolveStreakConflict(cachedStreak, streak);
            yield this.cacheData(cacheKey, resolvedStreak);
          } else {
            yield this.cacheData(cacheKey, streak);
          }
        } catch (error) {
          console.error("Error handling realtime streak update:", error);
        }
      });
      function handleRealtimeStreakUpdate(_x10, _x11, _x12) {
        return _handleRealtimeStreakUpdate.apply(this, arguments);
      }
      return handleRealtimeStreakUpdate;
    }())
  }, {
    key: "handleRealtimeCompletionUpdate",
    value: (function () {
      var _handleRealtimeCompletionUpdate = (0, _asyncToGenerator2.default)(function* (docId, data, changeType) {
        try {
          if (changeType === "removed") {
            var removeCacheKey = `${SyncService.CACHE_KEYS.COMPLETIONS}_${docId}`;
            yield _asyncStorage.default.removeItem(removeCacheKey);
            return;
          }
          var completion = (0, _habitStreakSchemas.transformFirestoreToCompletion)(docId, data);
          var cacheKey = `${SyncService.CACHE_KEYS.COMPLETIONS}_${docId}`;
          yield this.cacheData(cacheKey, completion);
        } catch (error) {
          console.error("Error handling realtime completion update:", error);
        }
      });
      function handleRealtimeCompletionUpdate(_x13, _x14, _x15) {
        return _handleRealtimeCompletionUpdate.apply(this, arguments);
      }
      return handleRealtimeCompletionUpdate;
    }())
  }, {
    key: "resolveStreakConflict",
    value: (function () {
      var _resolveStreakConflict = (0, _asyncToGenerator2.default)(function* (localStreak, remoteStreak) {
        if (!localStreak.lastCompletionDate && remoteStreak.lastCompletionDate) {
          return remoteStreak;
        }
        if (localStreak.lastCompletionDate && !remoteStreak.lastCompletionDate) {
          return localStreak;
        }
        if (localStreak.lastCompletionDate && remoteStreak.lastCompletionDate) {
          if (localStreak.lastCompletionDate > remoteStreak.lastCompletionDate) {
            return localStreak;
          } else if (localStreak.lastCompletionDate < remoteStreak.lastCompletionDate) {
            return remoteStreak;
          } else {
            return localStreak.currentStreak >= remoteStreak.currentStreak ? localStreak : remoteStreak;
          }
        }
        return remoteStreak;
      });
      function resolveStreakConflict(_x16, _x17) {
        return _resolveStreakConflict.apply(this, arguments);
      }
      return resolveStreakConflict;
    }())
  }, {
    key: "hasConflict",
    value: function hasConflict(local, remote) {
      return local.currentStreak !== remote.currentStreak || local.bestStreak !== remote.bestStreak || local.lastCompletionDate !== remote.lastCompletionDate || local.freezesAvailable !== remote.freezesAvailable || local.freezesUsed !== remote.freezesUsed;
    }
  }, {
    key: "executeCompletionOperation",
    value: (function () {
      var _executeCompletionOperation = (0, _asyncToGenerator2.default)(function* (operation, transaction) {
        var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
        switch (operation.action) {
          case "create":
            var completionRef = (0, _firestore.doc)(completionsCollection);
            transaction.set(completionRef, Object.assign({}, operation.data, {
              createdAt: (0, _firestore.serverTimestamp)()
            }));
            break;
          case "update":
            var updateRef = (0, _firestore.doc)(completionsCollection, operation.data.id);
            transaction.update(updateRef, Object.assign({}, operation.data, {
              updatedAt: (0, _firestore.serverTimestamp)()
            }));
            break;
          case "delete":
            var deleteRef = (0, _firestore.doc)(completionsCollection, operation.data.id);
            transaction.delete(deleteRef);
            break;
        }
      });
      function executeCompletionOperation(_x18, _x19) {
        return _executeCompletionOperation.apply(this, arguments);
      }
      return executeCompletionOperation;
    }())
  }, {
    key: "executeStreakOperation",
    value: (function () {
      var _executeStreakOperation = (0, _asyncToGenerator2.default)(function* (operation, transaction) {
        var streaksCollection = (0, _collections.getHabitStreaksCollection)();
        var streakId = (0, _habitStreakSchemas.generateStreakId)(operation.userId, operation.habitId);
        var streakRef = (0, _firestore.doc)(streaksCollection, streakId);
        switch (operation.action) {
          case "create":
          case "update":
            var streakData = (0, _habitStreakSchemas.transformStreakToFirestore)(operation.data);
            transaction.set(streakRef, streakData);
            break;
          case "delete":
            transaction.delete(streakRef);
            break;
        }
      });
      function executeStreakOperation(_x20, _x21) {
        return _executeStreakOperation.apply(this, arguments);
      }
      return executeStreakOperation;
    }())
  }, {
    key: "executeMilestoneOperation",
    value: (function () {
      var _executeMilestoneOperation = (0, _asyncToGenerator2.default)(function* (operation, transaction) {
        console.log("Executing milestone operation:", operation);
      });
      function executeMilestoneOperation(_x22, _x23) {
        return _executeMilestoneOperation.apply(this, arguments);
      }
      return executeMilestoneOperation;
    }())
  }, {
    key: "generateChecksum",
    value: function generateChecksum(data) {
      var str = JSON.stringify(data);
      var hash = 0;
      for (var i = 0; i < str.length; i++) {
        var char = str.charCodeAt(i);
        hash = (hash << 5) - hash + char;
        hash = hash & hash;
      }
      return hash.toString();
    }
  }, {
    key: "generateOperationId",
    value: function generateOperationId() {
      return `op_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
  }, {
    key: "savePendingOperations",
    value: (function () {
      var _savePendingOperations = (0, _asyncToGenerator2.default)(function* () {
        try {
          var operations = Array.from(this.pendingOperations.values());
          var serialized = operations.map(function (op) {
            var _op$lastAttempt;
            return Object.assign({}, op, {
              timestamp: op.timestamp.toMillis(),
              lastAttempt: (_op$lastAttempt = op.lastAttempt) == null ? void 0 : _op$lastAttempt.toMillis()
            });
          });
          yield _asyncStorage.default.setItem(SyncService.CACHE_KEYS.PENDING_OPS, JSON.stringify(serialized));
        } catch (error) {
          console.error("Failed to save pending operations:", error);
        }
      });
      function savePendingOperations() {
        return _savePendingOperations.apply(this, arguments);
      }
      return savePendingOperations;
    }())
  }, {
    key: "loadPendingOperations",
    value: (function () {
      var _loadPendingOperations = (0, _asyncToGenerator2.default)(function* () {
        var _this3 = this;
        try {
          var stored = yield _asyncStorage.default.getItem(SyncService.CACHE_KEYS.PENDING_OPS);
          if (!stored) return;
          var operations = JSON.parse(stored);
          this.pendingOperations.clear();
          operations.forEach(function (op) {
            var operation = Object.assign({}, op, {
              timestamp: _firestore.Timestamp.fromMillis(op.timestamp),
              lastAttempt: op.lastAttempt ? _firestore.Timestamp.fromMillis(op.lastAttempt) : undefined
            });
            _this3.pendingOperations.set(operation.id, operation);
          });
        } catch (error) {
          console.error("Failed to load pending operations:", error);
        }
      });
      function loadPendingOperations() {
        return _loadPendingOperations.apply(this, arguments);
      }
      return loadPendingOperations;
    }())
  }, {
    key: "startConnectivityMonitoring",
    value: function startConnectivityMonitoring() {
      var _this4 = this;
      setInterval((0, _asyncToGenerator2.default)(function* () {
        var online = yield (0, _errorHandling.isOnline)();
        var wasOnline = _this4.syncStatus.isOnline;
        _this4.updateSyncStatus({
          isOnline: online
        });
        if (online && !wasOnline) {
          console.log("Connection restored, processing pending operations");
          yield _this4.processPendingOperations();
        }
      }), 30000);
    }
  }, {
    key: "handleSyncError",
    value: function handleSyncError(error) {
      var _error$message;
      console.error("Sync error:", error);
      if (error.code === "unavailable" || (_error$message = error.message) != null && _error$message.includes("network")) {
        this.updateSyncStatus({
          isOnline: false
        });
      }
    }
  }, {
    key: "updateSyncStatus",
    value: function updateSyncStatus(updates) {
      var _this5 = this;
      this.syncStatus = Object.assign({}, this.syncStatus, updates);
      this.statusCallbacks.forEach(function (callback) {
        try {
          callback(_this5.syncStatus);
        } catch (error) {
          console.error("Error in sync status callback:", error);
        }
      });
    }
  }, {
    key: "onSyncStatusChange",
    value: function onSyncStatusChange(callback) {
      var _this6 = this;
      this.statusCallbacks.add(callback);
      callback(this.syncStatus);
      return function () {
        _this6.statusCallbacks.delete(callback);
      };
    }
  }, {
    key: "getSyncStatus",
    value: function getSyncStatus() {
      return Object.assign({}, this.syncStatus);
    }
  }, {
    key: "forceSyncUserData",
    value: (function () {
      var _forceSyncUserData = (0, _asyncToGenerator2.default)(function* (userId) {
        if (!this.syncStatus.isOnline) {
          throw new Error("Cannot force sync while offline");
        }
        try {
          this.updateSyncStatus({
            syncInProgress: true
          });
          yield this.syncUserStreaks(userId);
          yield this.syncUserCompletions(userId);
          this.updateSyncStatus({
            lastSync: _firestore.Timestamp.now()
          });
        } finally {
          this.updateSyncStatus({
            syncInProgress: false
          });
        }
      });
      function forceSyncUserData(_x24) {
        return _forceSyncUserData.apply(this, arguments);
      }
      return forceSyncUserData;
    }())
  }, {
    key: "syncUserStreaks",
    value: (function () {
      var _syncUserStreaks = (0, _asyncToGenerator2.default)(function* (userId) {
        var _this7 = this;
        try {
          var streaksCollection = (0, _collections.getHabitStreaksCollection)();
          var streaksQuery = (0, _firestore.query)(streaksCollection, (0, _firestore.where)("userId", "==", userId));
          var snapshot = yield (0, _firestore.getDocs)(streaksQuery);
          var streakEntries = snapshot.docs.map(function (docSnap) {
            return {
              id: docSnap.id,
              streak: (0, _habitStreakSchemas.transformFirestoreToStreak)(docSnap.data())
            };
          });
          yield this.cacheData(SyncService.CACHE_KEYS.STREAKS, streakEntries.map(function (entry) {
            return entry.streak;
          }));
          yield Promise.all(streakEntries.map(function (_ref6) {
            var id = _ref6.id,
              streak = _ref6.streak;
            return _this7.cacheData(`${SyncService.CACHE_KEYS.STREAKS}_${id}`, streak);
          }));
          yield this.cleanupCachePrefix(SyncService.CACHE_KEYS.STREAKS, new Set(streakEntries.map(function (entry) {
            return entry.id;
          })));
        } catch (error) {
          console.error("Failed to sync streaks:", error);
        }
      });
      function syncUserStreaks(_x25) {
        return _syncUserStreaks.apply(this, arguments);
      }
      return syncUserStreaks;
    }())
  }, {
    key: "syncUserCompletions",
    value: (function () {
      var _syncUserCompletions = (0, _asyncToGenerator2.default)(function* (userId) {
        var _this8 = this;
        try {
          var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
          var completionsQuery = (0, _firestore.query)(completionsCollection, (0, _firestore.where)("userId", "==", userId));
          var snapshot = yield (0, _firestore.getDocs)(completionsQuery);
          var completionEntries = snapshot.docs.map(function (docSnap) {
            return {
              id: docSnap.id,
              completion: (0, _habitStreakSchemas.transformFirestoreToCompletion)(docSnap.id, docSnap.data())
            };
          });
          yield this.cacheData(SyncService.CACHE_KEYS.COMPLETIONS, completionEntries.map(function (entry) {
            return entry.completion;
          }));
          yield Promise.all(completionEntries.map(function (_ref7) {
            var id = _ref7.id,
              completion = _ref7.completion;
            return _this8.cacheData(`${SyncService.CACHE_KEYS.COMPLETIONS}_${id}`, completion);
          }));
          yield this.cleanupCachePrefix(SyncService.CACHE_KEYS.COMPLETIONS, new Set(completionEntries.map(function (entry) {
            return entry.id;
          })));
        } catch (error) {
          console.error("Failed to sync completions:", error);
        }
      });
      function syncUserCompletions(_x26) {
        return _syncUserCompletions.apply(this, arguments);
      }
      return syncUserCompletions;
    }())
  }, {
    key: "clearCache",
    value: (function () {
      var _clearCache = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield _asyncStorage.default.multiRemove([SyncService.CACHE_KEYS.STREAKS, SyncService.CACHE_KEYS.COMPLETIONS, SyncService.CACHE_KEYS.PENDING_OPS, SyncService.CACHE_KEYS.LAST_SYNC]);
          yield this.cleanupCachePrefix(SyncService.CACHE_KEYS.STREAKS);
          yield this.cleanupCachePrefix(SyncService.CACHE_KEYS.COMPLETIONS);
          this.pendingOperations.clear();
          this.updateSyncStatus({
            pendingOperations: 0,
            lastSync: null
          });
        } catch (error) {
          console.error("Failed to clear cache:", error);
        }
      });
      function clearCache() {
        return _clearCache.apply(this, arguments);
      }
      return clearCache;
    }())
  }], [{
    key: "getInstance",
    value: function getInstance() {
      if (!SyncService.instance) {
        SyncService.instance = new SyncService();
      }
      return SyncService.instance;
    }
  }]);
}();
SyncService.CACHE_KEYS = {
  STREAKS: "@habit_streaks_cache",
  COMPLETIONS: "@habit_completions_cache",
  PENDING_OPS: "@pending_sync_operations",
  LAST_SYNC: "@last_sync_timestamp"
};
var syncService = exports.syncService = SyncService.getInstance();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZmlyZWJhc2VDb25maWciLCJyZXF1aXJlIiwiX2Vycm9ySGFuZGxpbmciLCJfYXN5bmNTdG9yYWdlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9maXJlc3RvcmUiLCJfY29sbGVjdGlvbnMiLCJfaGFiaXRTdHJlYWtTY2hlbWFzIiwiU3luY1NlcnZpY2UiLCJleHBvcnRzIiwiX2NsYXNzQ2FsbENoZWNrMiIsImRlZmF1bHQiLCJzeW5jTGlzdGVuZXJzIiwiTWFwIiwicGVuZGluZ09wZXJhdGlvbnMiLCJzeW5jU3RhdHVzIiwiaXNPbmxpbmUiLCJsYXN0U3luYyIsInN5bmNJblByb2dyZXNzIiwic3RhdHVzQ2FsbGJhY2tzIiwiU2V0IiwiaW5pdGlhbGl6ZVN5bmMiLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJfaW5pdGlhbGl6ZVN5bmMiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJsb2FkUGVuZGluZ09wZXJhdGlvbnMiLCJvbmxpbmUiLCJ1cGRhdGVTeW5jU3RhdHVzIiwicHJvY2Vzc1BlbmRpbmdPcGVyYXRpb25zIiwic3RhcnRDb25uZWN0aXZpdHlNb25pdG9yaW5nIiwiZXJyb3IiLCJjb25zb2xlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfc3RhcnRSZWFsdGltZVN5bmMiLCJ1c2VySWQiLCJfdGhpcyIsIkVycm9yIiwic3RvcFJlYWx0aW1lU3luYyIsInN0cmVha3NDb2xsZWN0aW9uIiwiZ2V0SGFiaXRTdHJlYWtzQ29sbGVjdGlvbiIsInN0cmVha3NRdWVyeSIsInF1ZXJ5Iiwid2hlcmUiLCJzdHJlYWtMaXN0ZW5lciIsIm9uU25hcHNob3QiLCJzbmFwc2hvdCIsImRvY0NoYW5nZXMiLCJmb3JFYWNoIiwiX3JlZiIsImNoYW5nZSIsInN0cmVha0RhdGEiLCJkb2MiLCJkYXRhIiwiaGFuZGxlUmVhbHRpbWVTdHJlYWtVcGRhdGUiLCJpZCIsInR5cGUiLCJfeDIiLCJoYW5kbGVTeW5jRXJyb3IiLCJjb21wbGV0aW9uc0NvbGxlY3Rpb24iLCJnZXRIYWJpdENvbXBsZXRpb25zQ29sbGVjdGlvbiIsImNvbXBsZXRpb25zUXVlcnkiLCJjb21wbGV0aW9uTGlzdGVuZXIiLCJfcmVmMiIsImNvbXBsZXRpb25EYXRhIiwiaGFuZGxlUmVhbHRpbWVDb21wbGV0aW9uVXBkYXRlIiwiX3gzIiwic2V0Iiwic3RhcnRSZWFsdGltZVN5bmMiLCJfeCIsInN0cmVha0tleSIsImNvbXBsZXRpb25LZXkiLCJnZXQiLCJkZWxldGUiLCJfY2FjaGVEYXRhIiwidmVyc2lvbiIsImxlbmd0aCIsInVuZGVmaW5lZCIsImNoZWNrc3VtIiwiZ2VuZXJhdGVDaGVja3N1bSIsImNhY2hlZERhdGEiLCJ0aW1lc3RhbXAiLCJUaW1lc3RhbXAiLCJub3ciLCJBc3luY1N0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImNhY2hlRGF0YSIsIl94NCIsIl94NSIsIl9nZXRDYWNoZWREYXRhIiwiY2FjaGVkU3RyaW5nIiwiZ2V0SXRlbSIsInBhcnNlIiwiZXhwZWN0ZWRDaGVja3N1bSIsIndhcm4iLCJyZW1vdmVJdGVtIiwiZ2V0Q2FjaGVkRGF0YSIsIl94NiIsIl9jbGVhbnVwQ2FjaGVQcmVmaXgiLCJwcmVmaXgiLCJhY3RpdmVEb2NJZHMiLCJhbGxLZXlzIiwiZ2V0QWxsS2V5cyIsInByZWZpeFdpdGhTZXBhcmF0b3IiLCJhbGxvd2VkS2V5cyIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsIm1hcCIsImtleXNUb1JlbW92ZSIsImZpbHRlciIsInN0YXJ0c1dpdGgiLCJoYXMiLCJtdWx0aVJlbW92ZSIsImNsZWFudXBDYWNoZVByZWZpeCIsIl94NyIsIl94OCIsIl9xdWV1ZU9wZXJhdGlvbiIsIm9wZXJhdGlvbiIsInN5bmNPcCIsIk9iamVjdCIsImFzc2lnbiIsImdlbmVyYXRlT3BlcmF0aW9uSWQiLCJyZXRyeUNvdW50Iiwic2F2ZVBlbmRpbmdPcGVyYXRpb25zIiwic2l6ZSIsInF1ZXVlT3BlcmF0aW9uIiwiX3g5IiwiX3Byb2Nlc3NQZW5kaW5nT3BlcmF0aW9ucyIsIm9wZXJhdGlvbnMiLCJzb3J0IiwiYSIsImIiLCJ0b01pbGxpcyIsImV4ZWN1dGVPcGVyYXRpb24iLCJsYXN0QXR0ZW1wdCIsIl9leGVjdXRlT3BlcmF0aW9uIiwiX3RoaXMyIiwicmV0cnlXaXRoQmFja29mZiIsInJ1blRyYW5zYWN0aW9uIiwiZGIiLCJfcmVmNCIsInRyYW5zYWN0aW9uIiwiZXhlY3V0ZUNvbXBsZXRpb25PcGVyYXRpb24iLCJleGVjdXRlU3RyZWFrT3BlcmF0aW9uIiwiZXhlY3V0ZU1pbGVzdG9uZU9wZXJhdGlvbiIsIl94MSIsIl94MCIsIl9oYW5kbGVSZWFsdGltZVN0cmVha1VwZGF0ZSIsImRvY0lkIiwiY2hhbmdlVHlwZSIsInJlbW92ZUNhY2hlS2V5IiwiQ0FDSEVfS0VZUyIsIlNUUkVBS1MiLCJzdHJlYWsiLCJ0cmFuc2Zvcm1GaXJlc3RvcmVUb1N0cmVhayIsImNhY2hlS2V5IiwiY2FjaGVkU3RyZWFrIiwiaGFzQ29uZmxpY3QiLCJyZXNvbHZlZFN0cmVhayIsInJlc29sdmVTdHJlYWtDb25mbGljdCIsIl94MTAiLCJfeDExIiwiX3gxMiIsIl9oYW5kbGVSZWFsdGltZUNvbXBsZXRpb25VcGRhdGUiLCJDT01QTEVUSU9OUyIsImNvbXBsZXRpb24iLCJ0cmFuc2Zvcm1GaXJlc3RvcmVUb0NvbXBsZXRpb24iLCJfeDEzIiwiX3gxNCIsIl94MTUiLCJfcmVzb2x2ZVN0cmVha0NvbmZsaWN0IiwibG9jYWxTdHJlYWsiLCJyZW1vdGVTdHJlYWsiLCJsYXN0Q29tcGxldGlvbkRhdGUiLCJjdXJyZW50U3RyZWFrIiwiX3gxNiIsIl94MTciLCJsb2NhbCIsInJlbW90ZSIsImJlc3RTdHJlYWsiLCJmcmVlemVzQXZhaWxhYmxlIiwiZnJlZXplc1VzZWQiLCJfZXhlY3V0ZUNvbXBsZXRpb25PcGVyYXRpb24iLCJhY3Rpb24iLCJjb21wbGV0aW9uUmVmIiwiY3JlYXRlZEF0Iiwic2VydmVyVGltZXN0YW1wIiwidXBkYXRlUmVmIiwidXBkYXRlIiwidXBkYXRlZEF0IiwiZGVsZXRlUmVmIiwiX3gxOCIsIl94MTkiLCJfZXhlY3V0ZVN0cmVha09wZXJhdGlvbiIsInN0cmVha0lkIiwiZ2VuZXJhdGVTdHJlYWtJZCIsImhhYml0SWQiLCJzdHJlYWtSZWYiLCJ0cmFuc2Zvcm1TdHJlYWtUb0ZpcmVzdG9yZSIsIl94MjAiLCJfeDIxIiwiX2V4ZWN1dGVNaWxlc3RvbmVPcGVyYXRpb24iLCJsb2ciLCJfeDIyIiwiX3gyMyIsInN0ciIsImhhc2giLCJpIiwiY2hhciIsImNoYXJDb2RlQXQiLCJ0b1N0cmluZyIsIkRhdGUiLCJNYXRoIiwicmFuZG9tIiwic3Vic3RyIiwiX3NhdmVQZW5kaW5nT3BlcmF0aW9ucyIsInNlcmlhbGl6ZWQiLCJvcCIsIl9vcCRsYXN0QXR0ZW1wdCIsIlBFTkRJTkdfT1BTIiwiX2xvYWRQZW5kaW5nT3BlcmF0aW9ucyIsIl90aGlzMyIsInN0b3JlZCIsImNsZWFyIiwiZnJvbU1pbGxpcyIsIl90aGlzNCIsInNldEludGVydmFsIiwid2FzT25saW5lIiwiX2Vycm9yJG1lc3NhZ2UiLCJjb2RlIiwibWVzc2FnZSIsImluY2x1ZGVzIiwidXBkYXRlcyIsIl90aGlzNSIsImNhbGxiYWNrIiwib25TeW5jU3RhdHVzQ2hhbmdlIiwiX3RoaXM2IiwiYWRkIiwiZ2V0U3luY1N0YXR1cyIsIl9mb3JjZVN5bmNVc2VyRGF0YSIsInN5bmNVc2VyU3RyZWFrcyIsInN5bmNVc2VyQ29tcGxldGlvbnMiLCJmb3JjZVN5bmNVc2VyRGF0YSIsIl94MjQiLCJfc3luY1VzZXJTdHJlYWtzIiwiX3RoaXM3IiwiZ2V0RG9jcyIsInN0cmVha0VudHJpZXMiLCJkb2NzIiwiZG9jU25hcCIsImVudHJ5IiwiUHJvbWlzZSIsImFsbCIsIl9yZWY2IiwiX3gyNSIsIl9zeW5jVXNlckNvbXBsZXRpb25zIiwiX3RoaXM4IiwiY29tcGxldGlvbkVudHJpZXMiLCJfcmVmNyIsIl94MjYiLCJfY2xlYXJDYWNoZSIsIkxBU1RfU1lOQyIsImNsZWFyQ2FjaGUiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwic3luY1NlcnZpY2UiXSwic291cmNlcyI6WyJzeW5jU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERhdGEgU3luY2hyb25pemF0aW9uIFNlcnZpY2VcbiAqXG4gKiBIYW5kbGVzIGNyb3NzLWRldmljZSBkYXRhIHN5bmNocm9uaXphdGlvbiwgb2ZmbGluZSBjYWNoaW5nLCBhbmQgY29uZmxpY3QgcmVzb2x1dGlvblxuICogUmVxdWlyZW1lbnRzOiAxMC4xLCAxMC4yLCAxMC4zLCAxMC40LCAxMC41XG4gKi9cblxuaW1wb3J0IHsgZGIgfSBmcm9tIFwiQC9maXJlYmFzZUNvbmZpZ1wiO1xuaW1wb3J0IHsgSGFiaXRTdHJlYWsgfSBmcm9tIFwiQC90eXBlc1wiO1xuaW1wb3J0IHsgaXNPbmxpbmUsIHJldHJ5V2l0aEJhY2tvZmYgfSBmcm9tIFwiQC91dGlscy9lcnJvckhhbmRsaW5nXCI7XG5pbXBvcnQgQXN5bmNTdG9yYWdlIGZyb20gXCJAcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UvYXN5bmMtc3RvcmFnZVwiO1xuaW1wb3J0IHsgVW5zdWJzY3JpYmUgfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuaW1wb3J0IHtcbiAgICBUaW1lc3RhbXAsXG4gICAgZG9jLFxuICAgIGdldERvY3MsXG4gICAgb25TbmFwc2hvdCxcbiAgICBxdWVyeSxcbiAgICBydW5UcmFuc2FjdGlvbixcbiAgICBzZXJ2ZXJUaW1lc3RhbXAsXG4gICAgd2hlcmUsXG59IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7XG4gICAgZ2V0SGFiaXRDb21wbGV0aW9uc0NvbGxlY3Rpb24sXG4gICAgZ2V0SGFiaXRTdHJlYWtzQ29sbGVjdGlvbixcbn0gZnJvbSBcIi4vY29sbGVjdGlvbnNcIjtcbmltcG9ydCB7XG4gICAgZ2VuZXJhdGVTdHJlYWtJZCxcbiAgICB0cmFuc2Zvcm1GaXJlc3RvcmVUb0NvbXBsZXRpb24sXG4gICAgdHJhbnNmb3JtRmlyZXN0b3JlVG9TdHJlYWssXG4gICAgdHJhbnNmb3JtU3RyZWFrVG9GaXJlc3RvcmUsXG59IGZyb20gXCIuL2hhYml0U3RyZWFrU2NoZW1hc1wiO1xuXG4vKipcbiAqIFN5bmMgb3BlcmF0aW9uIHR5cGVzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3luY09wZXJhdGlvbiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICB0eXBlOiBcImNvbXBsZXRpb25cIiB8IFwic3RyZWFrXCIgfCBcIm1pbGVzdG9uZVwiO1xuICAgIGFjdGlvbjogXCJjcmVhdGVcIiB8IFwidXBkYXRlXCIgfCBcImRlbGV0ZVwiO1xuICAgIGRhdGE6IGFueTtcbiAgICB0aW1lc3RhbXA6IFRpbWVzdGFtcDtcbiAgICB1c2VySWQ6IHN0cmluZztcbiAgICBoYWJpdElkPzogc3RyaW5nO1xuICAgIHJldHJ5Q291bnQ6IG51bWJlcjtcbiAgICBsYXN0QXR0ZW1wdD86IFRpbWVzdGFtcDtcbn1cblxuLyoqXG4gKiBDYWNoZWQgZGF0YSBzdHJ1Y3R1cmVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWNoZWREYXRhPFQ+IHtcbiAgICBkYXRhOiBUO1xuICAgIHRpbWVzdGFtcDogVGltZXN0YW1wO1xuICAgIHZlcnNpb246IG51bWJlcjtcbiAgICBjaGVja3N1bTogc3RyaW5nO1xufVxuXG4vKipcbiAqIFN5bmMgc3RhdHVzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3luY1N0YXR1cyB7XG4gICAgaXNPbmxpbmU6IGJvb2xlYW47XG4gICAgbGFzdFN5bmM6IFRpbWVzdGFtcCB8IG51bGw7XG4gICAgcGVuZGluZ09wZXJhdGlvbnM6IG51bWJlcjtcbiAgICBzeW5jSW5Qcm9ncmVzczogYm9vbGVhbjtcbn1cbi8qKlxuICogRGF0YSBTeW5jaHJvbml6YXRpb24gU2VydmljZSBJbXBsZW1lbnRhdGlvblxuICovXG5leHBvcnQgY2xhc3MgU3luY1NlcnZpY2Uge1xuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBTeW5jU2VydmljZTtcbiAgICBwcml2YXRlIHN5bmNMaXN0ZW5lcnM6IE1hcDxzdHJpbmcsIFVuc3Vic2NyaWJlPiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIHBlbmRpbmdPcGVyYXRpb25zOiBNYXA8c3RyaW5nLCBTeW5jT3BlcmF0aW9uPiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIHN5bmNTdGF0dXM6IFN5bmNTdGF0dXMgPSB7XG4gICAgICAgIGlzT25saW5lOiB0cnVlLFxuICAgICAgICBsYXN0U3luYzogbnVsbCxcbiAgICAgICAgcGVuZGluZ09wZXJhdGlvbnM6IDAsXG4gICAgICAgIHN5bmNJblByb2dyZXNzOiBmYWxzZSxcbiAgICB9O1xuICAgIHByaXZhdGUgc3RhdHVzQ2FsbGJhY2tzOiBTZXQ8KHN0YXR1czogU3luY1N0YXR1cykgPT4gdm9pZD4gPSBuZXcgU2V0KCk7XG5cbiAgICAvLyBDYWNoZSBrZXlzXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQ0FDSEVfS0VZUyA9IHtcbiAgICAgICAgU1RSRUFLUzogXCJAaGFiaXRfc3RyZWFrc19jYWNoZVwiLFxuICAgICAgICBDT01QTEVUSU9OUzogXCJAaGFiaXRfY29tcGxldGlvbnNfY2FjaGVcIixcbiAgICAgICAgUEVORElOR19PUFM6IFwiQHBlbmRpbmdfc3luY19vcGVyYXRpb25zXCIsXG4gICAgICAgIExBU1RfU1lOQzogXCJAbGFzdF9zeW5jX3RpbWVzdGFtcFwiLFxuICAgIH07XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluaXRpYWxpemVTeW5jKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBTeW5jU2VydmljZSB7XG4gICAgICAgIGlmICghU3luY1NlcnZpY2UuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIFN5bmNTZXJ2aWNlLmluc3RhbmNlID0gbmV3IFN5bmNTZXJ2aWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN5bmNTZXJ2aWNlLmluc3RhbmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgc3luY2hyb25pemF0aW9uIHN5c3RlbVxuICAgICAqIFJlcXVpcmVtZW50czogMTAuMSwgMTAuNFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVN5bmMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBMb2FkIHBlbmRpbmcgb3BlcmF0aW9ucyBmcm9tIHN0b3JhZ2VcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBlbmRpbmdPcGVyYXRpb25zKCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGNvbm5lY3Rpdml0eSBhbmQgc3RhcnQgc3luYyBpZiBvbmxpbmVcbiAgICAgICAgICAgIGNvbnN0IG9ubGluZSA9IGF3YWl0IGlzT25saW5lKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN5bmNTdGF0dXMoeyBpc09ubGluZTogb25saW5lIH0pO1xuXG4gICAgICAgICAgICBpZiAob25saW5lKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzUGVuZGluZ09wZXJhdGlvbnMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0IHVwIGNvbm5lY3Rpdml0eSBtb25pdG9yaW5nXG4gICAgICAgICAgICB0aGlzLnN0YXJ0Q29ubmVjdGl2aXR5TW9uaXRvcmluZygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBpbml0aWFsaXplIHN5bmMgc2VydmljZTpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhcnQgcmVhbC10aW1lIHN5bmNocm9uaXphdGlvbiBmb3IgYSB1c2VyJ3MgaGFiaXQgZGF0YVxuICAgICAqIFJlcXVpcmVtZW50czogMTAuMVxuICAgICAqL1xuICAgIGFzeW5jIHN0YXJ0UmVhbHRpbWVTeW5jKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghdXNlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIElEIGlzIHJlcXVpcmVkIGZvciBzeW5jXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RvcCBleGlzdGluZyBsaXN0ZW5lcnMgZm9yIHRoaXMgdXNlclxuICAgICAgICB0aGlzLnN0b3BSZWFsdGltZVN5bmModXNlcklkKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gU2V0IHVwIHN0cmVhayBkYXRhIGxpc3RlbmVyXG4gICAgICAgICAgICBjb25zdCBzdHJlYWtzQ29sbGVjdGlvbiA9IGdldEhhYml0U3RyZWFrc0NvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVha3NRdWVyeSA9IHF1ZXJ5KFxuICAgICAgICAgICAgICAgIHN0cmVha3NDb2xsZWN0aW9uLFxuICAgICAgICAgICAgICAgIHdoZXJlKFwidXNlcklkXCIsIFwiPT1cIiwgdXNlcklkKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBzdHJlYWtMaXN0ZW5lciA9IG9uU25hcHNob3QoXG4gICAgICAgICAgICAgICAgc3RyZWFrc1F1ZXJ5LFxuICAgICAgICAgICAgICAgIChzbmFwc2hvdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzbmFwc2hvdC5kb2NDaGFuZ2VzKCkuZm9yRWFjaChhc3luYyAoY2hhbmdlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYWtEYXRhID0gY2hhbmdlLmRvYy5kYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVJlYWx0aW1lU3RyZWFrVXBkYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5kb2MuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFrRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJTdHJlYWsgc3luYyBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVN5bmNFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFNldCB1cCBjb21wbGV0aW9uIGRhdGEgbGlzdGVuZXJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25zQ29sbGVjdGlvbiA9IGdldEhhYml0Q29tcGxldGlvbnNDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uc1F1ZXJ5ID0gcXVlcnkoXG4gICAgICAgICAgICAgICAgY29tcGxldGlvbnNDb2xsZWN0aW9uLFxuICAgICAgICAgICAgICAgIHdoZXJlKFwidXNlcklkXCIsIFwiPT1cIiwgdXNlcklkKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uTGlzdGVuZXIgPSBvblNuYXBzaG90KFxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zUXVlcnksXG4gICAgICAgICAgICAgICAgKHNuYXBzaG90KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNuYXBzaG90LmRvY0NoYW5nZXMoKS5mb3JFYWNoKGFzeW5jIChjaGFuZ2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25EYXRhID0gY2hhbmdlLmRvYy5kYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVJlYWx0aW1lQ29tcGxldGlvblVwZGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuZG9jLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25EYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNvbXBsZXRpb24gc3luYyBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVN5bmNFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFN0b3JlIGxpc3RlbmVyc1xuICAgICAgICAgICAgdGhpcy5zeW5jTGlzdGVuZXJzLnNldChgc3RyZWFrc18ke3VzZXJJZH1gLCBzdHJlYWtMaXN0ZW5lcik7XG4gICAgICAgICAgICB0aGlzLnN5bmNMaXN0ZW5lcnMuc2V0KGBjb21wbGV0aW9uc18ke3VzZXJJZH1gLCBjb21wbGV0aW9uTGlzdGVuZXIpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzdGFydCByZWFsdGltZSBzeW5jOlwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wIHJlYWwtdGltZSBzeW5jaHJvbml6YXRpb24gZm9yIGEgdXNlclxuICAgICAqL1xuICAgIHN0b3BSZWFsdGltZVN5bmModXNlcklkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc3RyZWFrS2V5ID0gYHN0cmVha3NfJHt1c2VySWR9YDtcbiAgICAgICAgY29uc3QgY29tcGxldGlvbktleSA9IGBjb21wbGV0aW9uc18ke3VzZXJJZH1gO1xuXG4gICAgICAgIGNvbnN0IHN0cmVha0xpc3RlbmVyID0gdGhpcy5zeW5jTGlzdGVuZXJzLmdldChzdHJlYWtLZXkpO1xuICAgICAgICBpZiAoc3RyZWFrTGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHN0cmVha0xpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnN5bmNMaXN0ZW5lcnMuZGVsZXRlKHN0cmVha0tleSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb21wbGV0aW9uTGlzdGVuZXIgPSB0aGlzLnN5bmNMaXN0ZW5lcnMuZ2V0KGNvbXBsZXRpb25LZXkpO1xuICAgICAgICBpZiAoY29tcGxldGlvbkxpc3RlbmVyKSB7XG4gICAgICAgICAgICBjb21wbGV0aW9uTGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMuc3luY0xpc3RlbmVycy5kZWxldGUoY29tcGxldGlvbktleSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWNoZSBkYXRhIGxvY2FsbHkgd2l0aCBpbnRlZ3JpdHkgdmVyaWZpY2F0aW9uXG4gICAgICogUmVxdWlyZW1lbnRzOiAxMC40XG4gICAgICovXG4gICAgYXN5bmMgY2FjaGVEYXRhPFQ+KGtleTogc3RyaW5nLCBkYXRhOiBULCB2ZXJzaW9uOiBudW1iZXIgPSAxKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjaGVja3N1bSA9IHRoaXMuZ2VuZXJhdGVDaGVja3N1bShkYXRhKTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZERhdGE6IENhY2hlZERhdGE8VD4gPSB7XG4gICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IFRpbWVzdGFtcC5ub3coKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAgICAgICAgIGNoZWNrc3VtLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShjYWNoZWREYXRhKSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNhY2hlIGRhdGE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIERvbid0IHRocm93IC0gY2FjaGluZyBmYWlsdXJlIHNob3VsZG4ndCBicmVhayB0aGUgYXBwXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBjYWNoZWQgZGF0YSB3aXRoIGludGVncml0eSB2ZXJpZmljYXRpb25cbiAgICAgKiBSZXF1aXJlbWVudHM6IDEwLjQsIDEyLjVcbiAgICAgKi9cbiAgICBhc3luYyBnZXRDYWNoZWREYXRhPFQ+KGtleTogc3RyaW5nKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY2FjaGVkU3RyaW5nID0gYXdhaXQgQXN5bmNTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgIGlmICghY2FjaGVkU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZERhdGE6IENhY2hlZERhdGE8VD4gPSBKU09OLnBhcnNlKGNhY2hlZFN0cmluZyk7XG5cbiAgICAgICAgICAgIC8vIFZlcmlmeSBkYXRhIGludGVncml0eVxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRDaGVja3N1bSA9IHRoaXMuZ2VuZXJhdGVDaGVja3N1bShjYWNoZWREYXRhLmRhdGEpO1xuICAgICAgICAgICAgaWYgKGNhY2hlZERhdGEuY2hlY2tzdW0gIT09IGV4cGVjdGVkQ2hlY2tzdW0pIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJDYWNoZSBpbnRlZ3JpdHkgY2hlY2sgZmFpbGVkLCByZW1vdmluZyBjb3JydXB0ZWQgZGF0YVwiKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBBc3luY1N0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkRGF0YS5kYXRhO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byByZXRyaWV2ZSBjYWNoZWQgZGF0YTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgY2FjaGVkIGVudHJpZXMgZm9yIGEgcHJlZml4IHRoYXQgYXJlIG5vIGxvbmdlciBhY3RpdmVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGNsZWFudXBDYWNoZVByZWZpeChcbiAgICAgICAgcHJlZml4OiBzdHJpbmcsXG4gICAgICAgIGFjdGl2ZURvY0lkcz86IFNldDxzdHJpbmc+LFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYWxsS2V5cyA9IGF3YWl0IEFzeW5jU3RvcmFnZS5nZXRBbGxLZXlzKCk7XG4gICAgICAgICAgICBpZiAoIWFsbEtleXMgfHwgYWxsS2V5cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHByZWZpeFdpdGhTZXBhcmF0b3IgPSBgJHtwcmVmaXh9X2A7XG4gICAgICAgICAgICBjb25zdCBhbGxvd2VkS2V5cyA9XG4gICAgICAgICAgICAgICAgYWN0aXZlRG9jSWRzICYmXG4gICAgICAgICAgICAgICAgbmV3IFNldChcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbShhY3RpdmVEb2NJZHMudmFsdWVzKCkpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgIChpZCkgPT4gYCR7cHJlZml4V2l0aFNlcGFyYXRvcn0ke2lkfWAsXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3Qga2V5c1RvUmVtb3ZlID0gYWxsS2V5cy5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICgha2V5LnN0YXJ0c1dpdGgocHJlZml4V2l0aFNlcGFyYXRvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghYWxsb3dlZEtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuICFhbGxvd2VkS2V5cy5oYXMoa2V5KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoa2V5c1RvUmVtb3ZlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBBc3luY1N0b3JhZ2UubXVsdGlSZW1vdmUoa2V5c1RvUmVtb3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY2xlYW4gdXAgY2FjaGUgcHJlZml4OlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBRdWV1ZSBvcGVyYXRpb24gZm9yIG9mZmxpbmUgc3luY1xuICAgICAqIFJlcXVpcmVtZW50czogMTAuNFxuICAgICAqL1xuICAgIGFzeW5jIHF1ZXVlT3BlcmF0aW9uKFxuICAgICAgICBvcGVyYXRpb246IE9taXQ8U3luY09wZXJhdGlvbiwgXCJpZFwiIHwgXCJyZXRyeUNvdW50XCIgfCBcInRpbWVzdGFtcFwiPixcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3luY09wOiBTeW5jT3BlcmF0aW9uID0ge1xuICAgICAgICAgICAgLi4ub3BlcmF0aW9uLFxuICAgICAgICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVPcGVyYXRpb25JZCgpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KCksXG4gICAgICAgICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGVuZGluZ09wZXJhdGlvbnMuc2V0KHN5bmNPcC5pZCwgc3luY09wKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlUGVuZGluZ09wZXJhdGlvbnMoKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVN5bmNTdGF0dXMoe1xuICAgICAgICAgICAgcGVuZGluZ09wZXJhdGlvbnM6IHRoaXMucGVuZGluZ09wZXJhdGlvbnMuc2l6ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVHJ5IHRvIHByb2Nlc3MgaW1tZWRpYXRlbHkgaWYgb25saW5lXG4gICAgICAgIGlmICh0aGlzLnN5bmNTdGF0dXMuaXNPbmxpbmUpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc1BlbmRpbmdPcGVyYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIHBlbmRpbmcgb3BlcmF0aW9ucyB3aGVuIGNvbm5lY3Rpb24gaXMgcmVzdG9yZWRcbiAgICAgKiBSZXF1aXJlbWVudHM6IDEwLjQsIDEwLjVcbiAgICAgKi9cbiAgICBhc3luYyBwcm9jZXNzUGVuZGluZ09wZXJhdGlvbnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLnN5bmNTdGF0dXMuc3luY0luUHJvZ3Jlc3MgfHwgdGhpcy5wZW5kaW5nT3BlcmF0aW9ucy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwZGF0ZVN5bmNTdGF0dXMoeyBzeW5jSW5Qcm9ncmVzczogdHJ1ZSB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IEFycmF5LmZyb20odGhpcy5wZW5kaW5nT3BlcmF0aW9ucy52YWx1ZXMoKSkuc29ydChcbiAgICAgICAgICAgICAgICAoYSwgYikgPT4gYS50aW1lc3RhbXAudG9NaWxsaXMoKSAtIGIudGltZXN0YW1wLnRvTWlsbGlzKCksXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wZXJhdGlvbiBvZiBvcGVyYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5leGVjdXRlT3BlcmF0aW9uKG9wZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ09wZXJhdGlvbnMuZGVsZXRlKG9wZXJhdGlvbi5pZCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBleGVjdXRlIG9wZXJhdGlvbjpcIiwgZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEluY3JlbWVudCByZXRyeSBjb3VudFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb24ucmV0cnlDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb24ubGFzdEF0dGVtcHQgPSBUaW1lc3RhbXAubm93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG9wZXJhdGlvbiBpZiBtYXggcmV0cmllcyBleGNlZWRlZFxuICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0aW9uLnJldHJ5Q291bnQgPj0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiTWF4IHJldHJpZXMgZXhjZWVkZWQsIHJlbW92aW5nIG9wZXJhdGlvbjpcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb24uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nT3BlcmF0aW9ucy5kZWxldGUob3BlcmF0aW9uLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlUGVuZGluZ09wZXJhdGlvbnMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3luY1N0YXR1cyh7XG4gICAgICAgICAgICAgICAgcGVuZGluZ09wZXJhdGlvbnM6IHRoaXMucGVuZGluZ09wZXJhdGlvbnMuc2l6ZSxcbiAgICAgICAgICAgICAgICBsYXN0U3luYzogVGltZXN0YW1wLm5vdygpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN5bmNTdGF0dXMoeyBzeW5jSW5Qcm9ncmVzczogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIGEgc3luYyBvcGVyYXRpb24gd2l0aCBhdG9taWMgdXBkYXRlc1xuICAgICAqIFJlcXVpcmVtZW50czogMTAuMlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZXhlY3V0ZU9wZXJhdGlvbihvcGVyYXRpb246IFN5bmNPcGVyYXRpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJldHJ5V2l0aEJhY2tvZmYoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJ1blRyYW5zYWN0aW9uKGRiLCBhc3luYyAodHJhbnNhY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbi50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb21wbGV0aW9uXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVDb21wbGV0aW9uT3BlcmF0aW9uKG9wZXJhdGlvbiwgdHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdHJlYWtcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZXhlY3V0ZVN0cmVha09wZXJhdGlvbihvcGVyYXRpb24sIHRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibWlsZXN0b25lXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVNaWxlc3RvbmVPcGVyYXRpb24ob3BlcmF0aW9uLCB0cmFuc2FjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBvcGVyYXRpb24gdHlwZTogJHtvcGVyYXRpb24udHlwZX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHJlYWwtdGltZSBzdHJlYWsgdXBkYXRlcyB3aXRoIGNvbmZsaWN0IHJlc29sdXRpb25cbiAgICAgKiBSZXF1aXJlbWVudHM6IDEwLjEsIDEwLjVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVJlYWx0aW1lU3RyZWFrVXBkYXRlKFxuICAgICAgICBkb2NJZDogc3RyaW5nLFxuICAgICAgICBkYXRhOiBhbnksXG4gICAgICAgIGNoYW5nZVR5cGU6IFwiYWRkZWRcIiB8IFwibW9kaWZpZWRcIiB8IFwicmVtb3ZlZFwiLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGNoYW5nZVR5cGUgPT09IFwicmVtb3ZlZFwiKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gY2FjaGVcbiAgICAgICAgICAgICAgICBjb25zdCByZW1vdmVDYWNoZUtleSA9IGAke1N5bmNTZXJ2aWNlLkNBQ0hFX0tFWVMuU1RSRUFLU31fJHtkb2NJZH1gO1xuICAgICAgICAgICAgICAgIGF3YWl0IEFzeW5jU3RvcmFnZS5yZW1vdmVJdGVtKHJlbW92ZUNhY2hlS2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHN0cmVhayA9IHRyYW5zZm9ybUZpcmVzdG9yZVRvU3RyZWFrKGRhdGEpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgY29uZmxpY3RzIHdpdGggbG9jYWwgZGF0YVxuICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgJHtTeW5jU2VydmljZS5DQUNIRV9LRVlTLlNUUkVBS1N9XyR7ZG9jSWR9YDtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZFN0cmVhayA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVkRGF0YTxIYWJpdFN0cmVhaz4oY2FjaGVLZXkpO1xuXG4gICAgICAgICAgICBpZiAoY2FjaGVkU3RyZWFrICYmIHRoaXMuaGFzQ29uZmxpY3QoY2FjaGVkU3RyZWFrLCBzdHJlYWspKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRTdHJlYWsgPSBhd2FpdCB0aGlzLnJlc29sdmVTdHJlYWtDb25mbGljdChcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkU3RyZWFrLFxuICAgICAgICAgICAgICAgICAgICBzdHJlYWssXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNhY2hlRGF0YShjYWNoZUtleSwgcmVzb2x2ZWRTdHJlYWspO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNhY2hlRGF0YShjYWNoZUtleSwgc3RyZWFrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBoYW5kbGluZyByZWFsdGltZSBzdHJlYWsgdXBkYXRlOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcmVhbC10aW1lIGNvbXBsZXRpb24gdXBkYXRlc1xuICAgICAqIFJlcXVpcmVtZW50czogMTAuMVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUmVhbHRpbWVDb21wbGV0aW9uVXBkYXRlKFxuICAgICAgICBkb2NJZDogc3RyaW5nLFxuICAgICAgICBkYXRhOiBhbnksXG4gICAgICAgIGNoYW5nZVR5cGU6IFwiYWRkZWRcIiB8IFwibW9kaWZpZWRcIiB8IFwicmVtb3ZlZFwiLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGNoYW5nZVR5cGUgPT09IFwicmVtb3ZlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlQ2FjaGVLZXkgPSBgJHtTeW5jU2VydmljZS5DQUNIRV9LRVlTLkNPTVBMRVRJT05TfV8ke2RvY0lkfWA7XG4gICAgICAgICAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnJlbW92ZUl0ZW0ocmVtb3ZlQ2FjaGVLZXkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbiA9IHRyYW5zZm9ybUZpcmVzdG9yZVRvQ29tcGxldGlvbihkb2NJZCwgZGF0YSk7XG4gICAgICAgICAgICBjb25zdCBjYWNoZUtleSA9IGAke1N5bmNTZXJ2aWNlLkNBQ0hFX0tFWVMuQ09NUExFVElPTlN9XyR7ZG9jSWR9YDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FjaGVEYXRhKGNhY2hlS2V5LCBjb21wbGV0aW9uKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBoYW5kbGluZyByZWFsdGltZSBjb21wbGV0aW9uIHVwZGF0ZTpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzb2x2ZSBjb25mbGljdHMgdXNpbmcgdGltZXN0YW1wIHByaW9yaXR5XG4gICAgICogUmVxdWlyZW1lbnRzOiAxMC41XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyByZXNvbHZlU3RyZWFrQ29uZmxpY3QoXG4gICAgICAgIGxvY2FsU3RyZWFrOiBIYWJpdFN0cmVhayxcbiAgICAgICAgcmVtb3RlU3RyZWFrOiBIYWJpdFN0cmVhayxcbiAgICApOiBQcm9taXNlPEhhYml0U3RyZWFrPiB7XG4gICAgICAgIC8vIFVzZSB0aGUgc3RyZWFrIHdpdGggdGhlIG1vc3QgcmVjZW50IGxhc3RDb21wbGV0aW9uRGF0ZVxuICAgICAgICAvLyBJZiBkYXRlcyBhcmUgZXF1YWwsIHByZWZlciB0aGUgb25lIHdpdGggaGlnaGVyIGN1cnJlbnRTdHJlYWtcblxuICAgICAgICBpZiAoIWxvY2FsU3RyZWFrLmxhc3RDb21wbGV0aW9uRGF0ZSAmJiByZW1vdGVTdHJlYWsubGFzdENvbXBsZXRpb25EYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVtb3RlU3RyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxvY2FsU3RyZWFrLmxhc3RDb21wbGV0aW9uRGF0ZSAmJiAhcmVtb3RlU3RyZWFrLmxhc3RDb21wbGV0aW9uRGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxvY2FsU3RyZWFrLmxhc3RDb21wbGV0aW9uRGF0ZSAmJiByZW1vdGVTdHJlYWsubGFzdENvbXBsZXRpb25EYXRlKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxTdHJlYWsubGFzdENvbXBsZXRpb25EYXRlID4gcmVtb3RlU3RyZWFrLmxhc3RDb21wbGV0aW9uRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbFN0cmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgbG9jYWxTdHJlYWsubGFzdENvbXBsZXRpb25EYXRlIDwgcmVtb3RlU3RyZWFrLmxhc3RDb21wbGV0aW9uRGF0ZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW90ZVN0cmVhaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2FtZSBkYXRlLCB1c2UgaGlnaGVyIHN0cmVha1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbFN0cmVhay5jdXJyZW50U3RyZWFrID49IHJlbW90ZVN0cmVhay5jdXJyZW50U3RyZWFrXG4gICAgICAgICAgICAgICAgICAgID8gbG9jYWxTdHJlYWtcbiAgICAgICAgICAgICAgICAgICAgOiByZW1vdGVTdHJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGYWxsYmFjayB0byByZW1vdGUgaWYgbm8gY2xlYXIgd2lubmVyXG4gICAgICAgIHJldHVybiByZW1vdGVTdHJlYWs7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlcmUncyBhIGNvbmZsaWN0IGJldHdlZW4gbG9jYWwgYW5kIHJlbW90ZSBkYXRhXG4gICAgICovXG4gICAgcHJpdmF0ZSBoYXNDb25mbGljdChsb2NhbDogSGFiaXRTdHJlYWssIHJlbW90ZTogSGFiaXRTdHJlYWspOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGxvY2FsLmN1cnJlbnRTdHJlYWsgIT09IHJlbW90ZS5jdXJyZW50U3RyZWFrIHx8XG4gICAgICAgICAgICBsb2NhbC5iZXN0U3RyZWFrICE9PSByZW1vdGUuYmVzdFN0cmVhayB8fFxuICAgICAgICAgICAgbG9jYWwubGFzdENvbXBsZXRpb25EYXRlICE9PSByZW1vdGUubGFzdENvbXBsZXRpb25EYXRlIHx8XG4gICAgICAgICAgICBsb2NhbC5mcmVlemVzQXZhaWxhYmxlICE9PSByZW1vdGUuZnJlZXplc0F2YWlsYWJsZSB8fFxuICAgICAgICAgICAgbG9jYWwuZnJlZXplc1VzZWQgIT09IHJlbW90ZS5mcmVlemVzVXNlZFxuICAgICAgICApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIGNvbXBsZXRpb24gb3BlcmF0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBleGVjdXRlQ29tcGxldGlvbk9wZXJhdGlvbihcbiAgICAgICAgb3BlcmF0aW9uOiBTeW5jT3BlcmF0aW9uLFxuICAgICAgICB0cmFuc2FjdGlvbjogYW55LFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBjb21wbGV0aW9uc0NvbGxlY3Rpb24gPSBnZXRIYWJpdENvbXBsZXRpb25zQ29sbGVjdGlvbigpO1xuXG4gICAgICAgIHN3aXRjaCAob3BlcmF0aW9uLmFjdGlvbikge1xuICAgICAgICAgICAgY2FzZSBcImNyZWF0ZVwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25SZWYgPSBkb2MoY29tcGxldGlvbnNDb2xsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5zZXQoY29tcGxldGlvblJlZiwge1xuICAgICAgICAgICAgICAgICAgICAuLi5vcGVyYXRpb24uZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ1cGRhdGVcIjpcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVSZWYgPSBkb2MoY29tcGxldGlvbnNDb2xsZWN0aW9uLCBvcGVyYXRpb24uZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24udXBkYXRlKHVwZGF0ZVJlZiwge1xuICAgICAgICAgICAgICAgICAgICAuLi5vcGVyYXRpb24uZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJkZWxldGVcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVSZWYgPSBkb2MoY29tcGxldGlvbnNDb2xsZWN0aW9uLCBvcGVyYXRpb24uZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uZGVsZXRlKGRlbGV0ZVJlZik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIHN0cmVhayBvcGVyYXRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVTdHJlYWtPcGVyYXRpb24oXG4gICAgICAgIG9wZXJhdGlvbjogU3luY09wZXJhdGlvbixcbiAgICAgICAgdHJhbnNhY3Rpb246IGFueSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RyZWFrc0NvbGxlY3Rpb24gPSBnZXRIYWJpdFN0cmVha3NDb2xsZWN0aW9uKCk7XG4gICAgICAgIGNvbnN0IHN0cmVha0lkID0gZ2VuZXJhdGVTdHJlYWtJZChvcGVyYXRpb24udXNlcklkLCBvcGVyYXRpb24uaGFiaXRJZCEpO1xuICAgICAgICBjb25zdCBzdHJlYWtSZWYgPSBkb2Moc3RyZWFrc0NvbGxlY3Rpb24sIHN0cmVha0lkKTtcblxuICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbi5hY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgXCJjcmVhdGVcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ1cGRhdGVcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYWtEYXRhID0gdHJhbnNmb3JtU3RyZWFrVG9GaXJlc3RvcmUob3BlcmF0aW9uLmRhdGEpO1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnNldChzdHJlYWtSZWYsIHN0cmVha0RhdGEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImRlbGV0ZVwiOlxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLmRlbGV0ZShzdHJlYWtSZWYpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBtaWxlc3RvbmUgb3BlcmF0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBleGVjdXRlTWlsZXN0b25lT3BlcmF0aW9uKFxuICAgICAgICBvcGVyYXRpb246IFN5bmNPcGVyYXRpb24sXG4gICAgICAgIHRyYW5zYWN0aW9uOiBhbnksXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIE1pbGVzdG9uZSBvcGVyYXRpb25zIGFyZSB0eXBpY2FsbHkgcGFydCBvZiBzdHJlYWsgdXBkYXRlc1xuICAgICAgICAvLyBUaGlzIGlzIGEgcGxhY2Vob2xkZXIgZm9yIGZ1dHVyZSBtaWxlc3RvbmUtc3BlY2lmaWMgb3BlcmF0aW9uc1xuICAgICAgICBjb25zb2xlLmxvZyhcIkV4ZWN1dGluZyBtaWxlc3RvbmUgb3BlcmF0aW9uOlwiLCBvcGVyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGNoZWNrc3VtIGZvciBkYXRhIGludGVncml0eVxuICAgICAqL1xuICAgIHByaXZhdGUgZ2VuZXJhdGVDaGVja3N1bShkYXRhOiBhbnkpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBzdHIgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgbGV0IGhhc2ggPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2hhciA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgaGFzaCA9IChoYXNoIDw8IDUpIC0gaGFzaCArIGNoYXI7XG4gICAgICAgICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzItYml0IGludGVnZXJcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFzaC50b1N0cmluZygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIHVuaXF1ZSBvcGVyYXRpb24gSURcbiAgICAgKi9cbiAgICBwcml2YXRlIGdlbmVyYXRlT3BlcmF0aW9uSWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBvcF8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2F2ZSBwZW5kaW5nIG9wZXJhdGlvbnMgdG8gc3RvcmFnZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgc2F2ZVBlbmRpbmdPcGVyYXRpb25zKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IEFycmF5LmZyb20odGhpcy5wZW5kaW5nT3BlcmF0aW9ucy52YWx1ZXMoKSk7XG4gICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkID0gb3BlcmF0aW9ucy5tYXAoKG9wKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLm9wLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogb3AudGltZXN0YW1wLnRvTWlsbGlzKCksXG4gICAgICAgICAgICAgICAgbGFzdEF0dGVtcHQ6IG9wLmxhc3RBdHRlbXB0Py50b01pbGxpcygpLFxuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBhd2FpdCBBc3luY1N0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgICAgICAgICBTeW5jU2VydmljZS5DQUNIRV9LRVlTLlBFTkRJTkdfT1BTLFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHNlcmlhbGl6ZWQpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc2F2ZSBwZW5kaW5nIG9wZXJhdGlvbnM6XCIsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWQgcGVuZGluZyBvcGVyYXRpb25zIGZyb20gc3RvcmFnZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgbG9hZFBlbmRpbmdPcGVyYXRpb25zKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RvcmVkID0gYXdhaXQgQXN5bmNTdG9yYWdlLmdldEl0ZW0oXG4gICAgICAgICAgICAgICAgU3luY1NlcnZpY2UuQ0FDSEVfS0VZUy5QRU5ESU5HX09QUyxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoIXN0b3JlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBvcGVyYXRpb25zID0gSlNPTi5wYXJzZShzdG9yZWQpO1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nT3BlcmF0aW9ucy5jbGVhcigpO1xuXG4gICAgICAgICAgICBvcGVyYXRpb25zLmZvckVhY2goKG9wOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcGVyYXRpb246IFN5bmNPcGVyYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wLFxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IFRpbWVzdGFtcC5mcm9tTWlsbGlzKG9wLnRpbWVzdGFtcCksXG4gICAgICAgICAgICAgICAgICAgIGxhc3RBdHRlbXB0OiBvcC5sYXN0QXR0ZW1wdFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBUaW1lc3RhbXAuZnJvbU1pbGxpcyhvcC5sYXN0QXR0ZW1wdClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nT3BlcmF0aW9ucy5zZXQob3BlcmF0aW9uLmlkLCBvcGVyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgcGVuZGluZyBvcGVyYXRpb25zOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnQgY29ubmVjdGl2aXR5IG1vbml0b3JpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXJ0Q29ubmVjdGl2aXR5TW9uaXRvcmluZygpOiB2b2lkIHtcbiAgICAgICAgLy8gQ2hlY2sgY29ubmVjdGl2aXR5IGV2ZXJ5IDMwIHNlY29uZHNcbiAgICAgICAgc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb25saW5lID0gYXdhaXQgaXNPbmxpbmUoKTtcbiAgICAgICAgICAgIGNvbnN0IHdhc09ubGluZSA9IHRoaXMuc3luY1N0YXR1cy5pc09ubGluZTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVTeW5jU3RhdHVzKHsgaXNPbmxpbmU6IG9ubGluZSB9KTtcblxuICAgICAgICAgICAgLy8gSWYgd2UganVzdCBjYW1lIGJhY2sgb25saW5lLCBwcm9jZXNzIHBlbmRpbmcgb3BlcmF0aW9uc1xuICAgICAgICAgICAgaWYgKG9ubGluZSAmJiAhd2FzT25saW5lKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb25uZWN0aW9uIHJlc3RvcmVkLCBwcm9jZXNzaW5nIHBlbmRpbmcgb3BlcmF0aW9uc1wiKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnByb2Nlc3NQZW5kaW5nT3BlcmF0aW9ucygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAzMDAwMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHN5bmMgZXJyb3JzXG4gICAgICovXG4gICAgcHJpdmF0ZSBoYW5kbGVTeW5jRXJyb3IoZXJyb3I6IGFueSk6IHZvaWQge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiU3luYyBlcnJvcjpcIiwgZXJyb3IpO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBzeW5jIHN0YXR1cyBiYXNlZCBvbiBlcnJvciB0eXBlXG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSBcInVuYXZhaWxhYmxlXCIgfHwgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoXCJuZXR3b3JrXCIpKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN5bmNTdGF0dXMoeyBpc09ubGluZTogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgc3luYyBzdGF0dXMgYW5kIG5vdGlmeSBsaXN0ZW5lcnNcbiAgICAgKi9cbiAgICBwcml2YXRlIHVwZGF0ZVN5bmNTdGF0dXModXBkYXRlczogUGFydGlhbDxTeW5jU3RhdHVzPik6IHZvaWQge1xuICAgICAgICB0aGlzLnN5bmNTdGF0dXMgPSB7IC4uLnRoaXMuc3luY1N0YXR1cywgLi4udXBkYXRlcyB9O1xuXG4gICAgICAgIC8vIE5vdGlmeSBhbGwgc3RhdHVzIGNhbGxiYWNrc1xuICAgICAgICB0aGlzLnN0YXR1c0NhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLnN5bmNTdGF0dXMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gc3luYyBzdGF0dXMgY2FsbGJhY2s6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIHRvIHN5bmMgc3RhdHVzIHVwZGF0ZXNcbiAgICAgKi9cbiAgICBvblN5bmNTdGF0dXNDaGFuZ2UoY2FsbGJhY2s6IChzdGF0dXM6IFN5bmNTdGF0dXMpID0+IHZvaWQpOiAoKSA9PiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdGF0dXNDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcblxuICAgICAgICAvLyBDYWxsIGltbWVkaWF0ZWx5IHdpdGggY3VycmVudCBzdGF0dXNcbiAgICAgICAgY2FsbGJhY2sodGhpcy5zeW5jU3RhdHVzKTtcblxuICAgICAgICAvLyBSZXR1cm4gdW5zdWJzY3JpYmUgZnVuY3Rpb25cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgc3luYyBzdGF0dXNcbiAgICAgKi9cbiAgICBnZXRTeW5jU3RhdHVzKCk6IFN5bmNTdGF0dXMge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLnN5bmNTdGF0dXMgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JjZSBzeW5jIGFsbCBkYXRhIGZvciBhIHVzZXJcbiAgICAgKiBSZXF1aXJlbWVudHM6IDEwLjEsIDEwLjNcbiAgICAgKi9cbiAgICBhc3luYyBmb3JjZVN5bmNVc2VyRGF0YSh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXRoaXMuc3luY1N0YXR1cy5pc09ubGluZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZvcmNlIHN5bmMgd2hpbGUgb2ZmbGluZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN5bmNTdGF0dXMoeyBzeW5jSW5Qcm9ncmVzczogdHJ1ZSB9KTtcblxuICAgICAgICAgICAgLy8gU3luYyBhbGwgc3RyZWFrIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3luY1VzZXJTdHJlYWtzKHVzZXJJZCk7XG5cbiAgICAgICAgICAgIC8vIFN5bmMgYWxsIGNvbXBsZXRpb24gZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zeW5jVXNlckNvbXBsZXRpb25zKHVzZXJJZCk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3luY1N0YXR1cyh7IGxhc3RTeW5jOiBUaW1lc3RhbXAubm93KCkgfSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN5bmNTdGF0dXMoeyBzeW5jSW5Qcm9ncmVzczogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTeW5jIHVzZXIgc3RyZWFrcyBmcm9tIHNlcnZlclxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgc3luY1VzZXJTdHJlYWtzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYWtzQ29sbGVjdGlvbiA9IGdldEhhYml0U3RyZWFrc0NvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVha3NRdWVyeSA9IHF1ZXJ5KHN0cmVha3NDb2xsZWN0aW9uLCB3aGVyZShcInVzZXJJZFwiLCBcIj09XCIsIHVzZXJJZCkpO1xuICAgICAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHN0cmVha3NRdWVyeSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0cmVha0VudHJpZXMgPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jU25hcCkgPT4gKHtcbiAgICAgICAgICAgICAgICBpZDogZG9jU25hcC5pZCxcbiAgICAgICAgICAgICAgICBzdHJlYWs6IHRyYW5zZm9ybUZpcmVzdG9yZVRvU3RyZWFrKGRvY1NuYXAuZGF0YSgpKSxcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgLy8gQ2FjaGUgYWdncmVnYXRlIGxpc3QgZm9yIG9mZmxpbmUgcmVhZHNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FjaGVEYXRhKFxuICAgICAgICAgICAgICAgIFN5bmNTZXJ2aWNlLkNBQ0hFX0tFWVMuU1RSRUFLUyxcbiAgICAgICAgICAgICAgICBzdHJlYWtFbnRyaWVzLm1hcCgoZW50cnkpID0+IGVudHJ5LnN0cmVhayksXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBDYWNoZSBpbmRpdmlkdWFsIGVudHJpZXMgZm9yIGNvbmZsaWN0IHJlc29sdXRpb25cbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgICAgIHN0cmVha0VudHJpZXMubWFwKCh7IGlkLCBzdHJlYWsgfSkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZURhdGEoYCR7U3luY1NlcnZpY2UuQ0FDSEVfS0VZUy5TVFJFQUtTfV8ke2lkfWAsIHN0cmVhayksXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xlYW51cENhY2hlUHJlZml4KFxuICAgICAgICAgICAgICAgIFN5bmNTZXJ2aWNlLkNBQ0hFX0tFWVMuU1RSRUFLUyxcbiAgICAgICAgICAgICAgICBuZXcgU2V0KHN0cmVha0VudHJpZXMubWFwKChlbnRyeSkgPT4gZW50cnkuaWQpKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHN5bmMgc3RyZWFrczpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3luYyB1c2VyIGNvbXBsZXRpb25zIGZyb20gc2VydmVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBzeW5jVXNlckNvbXBsZXRpb25zKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uc0NvbGxlY3Rpb24gPSBnZXRIYWJpdENvbXBsZXRpb25zQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnNRdWVyeSA9IHF1ZXJ5KFxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zQ29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICB3aGVyZShcInVzZXJJZFwiLCBcIj09XCIsIHVzZXJJZCksXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbXBsZXRpb25zUXVlcnkpO1xuXG4gICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uRW50cmllcyA9IHNuYXBzaG90LmRvY3MubWFwKChkb2NTbmFwKSA9PiAoe1xuICAgICAgICAgICAgICAgIGlkOiBkb2NTbmFwLmlkLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb246IHRyYW5zZm9ybUZpcmVzdG9yZVRvQ29tcGxldGlvbihkb2NTbmFwLmlkLCBkb2NTbmFwLmRhdGEoKSksXG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FjaGVEYXRhKFxuICAgICAgICAgICAgICAgIFN5bmNTZXJ2aWNlLkNBQ0hFX0tFWVMuQ09NUExFVElPTlMsXG4gICAgICAgICAgICAgICAgY29tcGxldGlvbkVudHJpZXMubWFwKChlbnRyeSkgPT4gZW50cnkuY29tcGxldGlvbiksXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uRW50cmllcy5tYXAoKHsgaWQsIGNvbXBsZXRpb24gfSkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZURhdGEoYCR7U3luY1NlcnZpY2UuQ0FDSEVfS0VZUy5DT01QTEVUSU9OU31fJHtpZH1gLCBjb21wbGV0aW9uKSxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jbGVhbnVwQ2FjaGVQcmVmaXgoXG4gICAgICAgICAgICAgICAgU3luY1NlcnZpY2UuQ0FDSEVfS0VZUy5DT01QTEVUSU9OUyxcbiAgICAgICAgICAgICAgICBuZXcgU2V0KGNvbXBsZXRpb25FbnRyaWVzLm1hcCgoZW50cnkpID0+IGVudHJ5LmlkKSksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzeW5jIGNvbXBsZXRpb25zOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhciBhbGwgY2FjaGVkIGRhdGFcbiAgICAgKi9cbiAgICBhc3luYyBjbGVhckNhY2hlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLm11bHRpUmVtb3ZlKFtcbiAgICAgICAgICAgICAgICBTeW5jU2VydmljZS5DQUNIRV9LRVlTLlNUUkVBS1MsXG4gICAgICAgICAgICAgICAgU3luY1NlcnZpY2UuQ0FDSEVfS0VZUy5DT01QTEVUSU9OUyxcbiAgICAgICAgICAgICAgICBTeW5jU2VydmljZS5DQUNIRV9LRVlTLlBFTkRJTkdfT1BTLFxuICAgICAgICAgICAgICAgIFN5bmNTZXJ2aWNlLkNBQ0hFX0tFWVMuTEFTVF9TWU5DLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNsZWFudXBDYWNoZVByZWZpeChTeW5jU2VydmljZS5DQUNIRV9LRVlTLlNUUkVBS1MpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jbGVhbnVwQ2FjaGVQcmVmaXgoU3luY1NlcnZpY2UuQ0FDSEVfS0VZUy5DT01QTEVUSU9OUyk7XG5cbiAgICAgICAgICAgIHRoaXMucGVuZGluZ09wZXJhdGlvbnMuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3luY1N0YXR1cyh7XG4gICAgICAgICAgICAgICAgcGVuZGluZ09wZXJhdGlvbnM6IDAsXG4gICAgICAgICAgICAgICAgbGFzdFN5bmM6IG51bGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY2xlYXIgY2FjaGU6XCIsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IHN5bmNTZXJ2aWNlID0gU3luY1NlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFPQSxJQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFFQSxJQUFBQyxjQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxhQUFBLEdBQUFDLHNCQUFBLENBQUFILE9BQUE7QUFFQSxJQUFBSSxVQUFBLEdBQUFKLE9BQUE7QUFVQSxJQUFBSyxZQUFBLEdBQUFMLE9BQUE7QUFJQSxJQUFBTSxtQkFBQSxHQUFBTixPQUFBO0FBSzhCLElBdUNqQk8sV0FBVyxHQUFBQyxPQUFBLENBQUFELFdBQUE7RUFvQnBCLFNBQUFBLFlBQUEsRUFBc0I7SUFBQSxJQUFBRSxnQkFBQSxDQUFBQyxPQUFBLFFBQUFILFdBQUE7SUFBQSxLQWxCZEksYUFBYSxHQUE2QixJQUFJQyxHQUFHLENBQUMsQ0FBQztJQUFBLEtBQ25EQyxpQkFBaUIsR0FBK0IsSUFBSUQsR0FBRyxDQUFDLENBQUM7SUFBQSxLQUN6REUsVUFBVSxHQUFlO01BQzdCQyxRQUFRLEVBQUUsSUFBSTtNQUNkQyxRQUFRLEVBQUUsSUFBSTtNQUNkSCxpQkFBaUIsRUFBRSxDQUFDO01BQ3BCSSxjQUFjLEVBQUU7SUFDcEIsQ0FBQztJQUFBLEtBQ09DLGVBQWUsR0FBc0MsSUFBSUMsR0FBRyxDQUFDLENBQUM7SUFXbEUsSUFBSSxDQUFDQyxjQUFjLENBQUMs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