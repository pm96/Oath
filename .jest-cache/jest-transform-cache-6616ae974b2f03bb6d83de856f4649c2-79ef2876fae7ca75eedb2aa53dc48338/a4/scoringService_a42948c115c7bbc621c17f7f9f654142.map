{"version":3,"names":["_habitStreaks","require","calculateHabitScore","streak","goal","totalCompletions","arguments","length","undefined","difficulty","multiplier","DIFFICULTY_MULTIPLIERS","streakScore","currentStreak","completionBonus","bestStreakBonus","bestStreak","rawScore","adjustedScore","Math","round","habitId","streakLength","calculateMultipleHabitScores","streaks","goals","completionCounts","goalMap","Map","map","id","get","completions","filter","score","normalizeHabitScores","scores","scoresByDifficulty","easy","s","medium","hard","normalizedScores","Object","entries","forEach","_ref","_ref2","_slicedToArray2","default","difficultyScores","sortedScores","_toConsumableArray2","sort","a","b","index","percentile","push","normalizedScore","rank","totalHabits","getRecognitionLevel","isHardHabit","adjustedThreshold","thresholds","diamond","platinum","gold","silver","bronze","percentileBonus","effectiveScore","level","title","description","threshold","isHardHabitBonus","calculateOverallUserScore","totalRawScore","totalAdjustedScore","averageMultiplier","hardHabitCount","overallLevel","reduce","sum","totalMultiplier","hardHabitBonus","getDifficultyEncouragement","completionMessage","streakMessage","milestoneMessage","calculateScoreProgression","currentScore","previousScore","rawScoreChange","adjustedScoreChange","progressPercentage","trend"],"sources":["scoringService.ts"],"sourcesContent":["import { DIFFICULTY_MULTIPLIERS, HabitStreak } from \"../../types/habit-streaks\";\nimport { Goal } from \"./collections\";\n\n/**\n * Scoring Service for Habit Difficulty and Achievement Calculations\n * Requirements: 9.2, 9.3, 9.4, 9.5\n */\n\nexport interface HabitScore {\n    habitId: string;\n    rawScore: number;\n    adjustedScore: number;\n    difficulty: \"easy\" | \"medium\" | \"hard\";\n    multiplier: number;\n    streakLength: number;\n    totalCompletions: number;\n}\n\nexport interface NormalizedScore {\n    habitId: string;\n    normalizedScore: number;\n    percentile: number;\n    rank: number;\n    totalHabits: number;\n}\n\nexport interface RecognitionLevel {\n    level: \"bronze\" | \"silver\" | \"gold\" | \"platinum\" | \"diamond\";\n    title: string;\n    description: string;\n    threshold: number;\n    isHardHabitBonus: boolean;\n}\n\n/**\n * Calculate difficulty-weighted score for a habit\n * Requirements: 9.2 - Weight streaks by difficulty multiplier (1x, 1.5x, 2x)\n */\nexport function calculateHabitScore(\n    streak: HabitStreak,\n    goal: Goal,\n    totalCompletions: number = 0,\n): HabitScore {\n    const difficulty = goal.difficulty;\n    const multiplier = DIFFICULTY_MULTIPLIERS[difficulty];\n\n    // Base score calculation: streak length + completion bonus\n    const streakScore = streak.currentStreak * 10; // 10 points per day\n    const completionBonus = totalCompletions * 2; // 2 points per completion\n    const bestStreakBonus = streak.bestStreak * 5; // 5 points for best streak achievement\n\n    const rawScore = streakScore + completionBonus + bestStreakBonus;\n    const adjustedScore = Math.round(rawScore * multiplier);\n\n    return {\n        habitId: streak.habitId,\n        rawScore,\n        adjustedScore,\n        difficulty,\n        multiplier,\n        streakLength: streak.currentStreak,\n        totalCompletions,\n    };\n}\n\n/**\n * Calculate scores for multiple habits\n * Requirements: 9.3 - Show both raw and adjusted scores\n */\nexport function calculateMultipleHabitScores(\n    streaks: HabitStreak[],\n    goals: Goal[],\n    completionCounts: Record<string, number> = {},\n): HabitScore[] {\n    const goalMap = new Map(goals.map((goal) => [goal.id, goal]));\n\n    return streaks\n        .map((streak) => {\n            const goal = goalMap.get(streak.habitId);\n            if (!goal) return null;\n\n            const completions = completionCounts[streak.habitId] || 0;\n            return calculateHabitScore(streak, goal, completions);\n        })\n        .filter((score): score is HabitScore => score !== null);\n}\n\n/**\n * Normalize scores for habit comparison\n * Requirements: 9.4 - Normalize scores to account for different difficulty levels\n */\nexport function normalizeHabitScores(scores: HabitScore[]): NormalizedScore[] {\n    if (scores.length === 0) return [];\n\n    // Group scores by difficulty for fair comparison\n    const scoresByDifficulty = {\n        easy: scores.filter((s) => s.difficulty === \"easy\"),\n        medium: scores.filter((s) => s.difficulty === \"medium\"),\n        hard: scores.filter((s) => s.difficulty === \"hard\"),\n    };\n\n    const normalizedScores: NormalizedScore[] = [];\n\n    // Normalize within each difficulty group\n    Object.entries(scoresByDifficulty).forEach(\n        ([difficulty, difficultyScores]) => {\n            if (difficultyScores.length === 0) return;\n\n            // Sort by raw score for fair comparison within difficulty\n            const sortedScores = [...difficultyScores].sort(\n                (a, b) => b.rawScore - a.rawScore,\n            );\n\n            sortedScores.forEach((score, index) => {\n                const percentile =\n                    difficultyScores.length === 1\n                        ? 100\n                        : Math.round(\n                            ((difficultyScores.length - index - 1) /\n                                (difficultyScores.length - 1)) *\n                            100,\n                        );\n\n                normalizedScores.push({\n                    habitId: score.habitId,\n                    normalizedScore: score.adjustedScore,\n                    percentile,\n                    rank: index + 1,\n                    totalHabits: difficultyScores.length,\n                });\n            });\n        },\n    );\n\n    return normalizedScores;\n}\n\n/**\n * Get recognition level based on habit performance\n * Requirements: 9.5 - Additional recognition for hard habits\n */\nexport function getRecognitionLevel(\n    score: HabitScore,\n    normalizedScore: NormalizedScore,\n): RecognitionLevel {\n    const isHardHabit = score.difficulty === \"hard\";\n    const adjustedThreshold = isHardHabit ? 0.8 : 1.0; // Lower thresholds for hard habits\n\n    // Base thresholds (adjusted for hard habits)\n    const thresholds = {\n        diamond: 1000 * adjustedThreshold,\n        platinum: 500 * adjustedThreshold,\n        gold: 250 * adjustedThreshold,\n        silver: 100 * adjustedThreshold,\n        bronze: 50 * adjustedThreshold,\n    };\n\n    // Also consider percentile for recognition\n    const percentileBonus =\n        normalizedScore.percentile >= 90\n            ? 1.2\n            : normalizedScore.percentile >= 75\n                ? 1.1\n                : 1.0;\n\n    const effectiveScore = score.adjustedScore * percentileBonus;\n\n    if (effectiveScore >= thresholds.diamond) {\n        return {\n            level: \"diamond\",\n            title: isHardHabit ? \"Diamond Warrior\" : \"Diamond Achiever\",\n            description: isHardHabit\n                ? \"Mastered the most challenging habits with exceptional consistency\"\n                : \"Achieved exceptional consistency and dedication\",\n            threshold: thresholds.diamond,\n            isHardHabitBonus: isHardHabit,\n        };\n    } else if (effectiveScore >= thresholds.platinum) {\n        return {\n            level: \"platinum\",\n            title: isHardHabit ? \"Platinum Champion\" : \"Platinum Performer\",\n            description: isHardHabit\n                ? \"Conquered difficult habits with remarkable persistence\"\n                : \"Demonstrated remarkable consistency and growth\",\n            threshold: thresholds.platinum,\n            isHardHabitBonus: isHardHabit,\n        };\n    } else if (effectiveScore >= thresholds.gold) {\n        return {\n            level: \"gold\",\n            title: isHardHabit ? \"Gold Conqueror\" : \"Gold Standard\",\n            description: isHardHabit\n                ? \"Overcame challenging habits with strong determination\"\n                : \"Maintained excellent habit consistency\",\n            threshold: thresholds.gold,\n            isHardHabitBonus: isHardHabit,\n        };\n    } else if (effectiveScore >= thresholds.silver) {\n        return {\n            level: \"silver\",\n            title: isHardHabit ? \"Silver Challenger\" : \"Silver Streak\",\n            description: isHardHabit\n                ? \"Tackled difficult habits with growing confidence\"\n                : \"Built solid habit foundations\",\n            threshold: thresholds.silver,\n            isHardHabitBonus: isHardHabit,\n        };\n    } else {\n        return {\n            level: \"bronze\",\n            title: isHardHabit ? \"Bronze Brave\" : \"Bronze Builder\",\n            description: isHardHabit\n                ? \"Courageously started challenging habits\"\n                : \"Beginning the journey of habit formation\",\n            threshold: thresholds.bronze,\n            isHardHabitBonus: isHardHabit,\n        };\n    }\n}\n\n/**\n * Calculate overall user score across all habits\n * Requirements: 9.2, 9.4 - Aggregate difficulty-weighted scores\n */\nexport function calculateOverallUserScore(scores: HabitScore[]): {\n    totalRawScore: number;\n    totalAdjustedScore: number;\n    averageMultiplier: number;\n    hardHabitCount: number;\n    totalHabits: number;\n    overallLevel: RecognitionLevel;\n} {\n    if (scores.length === 0) {\n        return {\n            totalRawScore: 0,\n            totalAdjustedScore: 0,\n            averageMultiplier: 1,\n            hardHabitCount: 0,\n            totalHabits: 0,\n            overallLevel: {\n                level: \"bronze\",\n                title: \"Getting Started\",\n                description: \"Ready to begin your habit journey\",\n                threshold: 0,\n                isHardHabitBonus: false,\n            },\n        };\n    }\n\n    const totalRawScore = scores.reduce((sum, score) => sum + score.rawScore, 0);\n    const totalAdjustedScore = scores.reduce(\n        (sum, score) => sum + score.adjustedScore,\n        0,\n    );\n    const totalMultiplier = scores.reduce(\n        (sum, score) => sum + score.multiplier,\n        0,\n    );\n    const averageMultiplier = totalMultiplier / scores.length;\n    const hardHabitCount = scores.filter(\n        (score) => score.difficulty === \"hard\",\n    ).length;\n\n    // Calculate overall level based on total adjusted score and hard habit bonus\n    const hardHabitBonus = hardHabitCount > 0 ? 1 + hardHabitCount * 0.1 : 1;\n    const effectiveScore = totalAdjustedScore * hardHabitBonus;\n\n    let overallLevel: RecognitionLevel;\n    if (effectiveScore >= 2000) {\n        overallLevel = {\n            level: \"diamond\",\n            title: \"Habit Master\",\n            description: \"Achieved mastery across multiple challenging habits\",\n            threshold: 2000,\n            isHardHabitBonus: hardHabitCount > 0,\n        };\n    } else if (effectiveScore >= 1000) {\n        overallLevel = {\n            level: \"platinum\",\n            title: \"Habit Expert\",\n            description: \"Demonstrated expertise in habit formation and maintenance\",\n            threshold: 1000,\n            isHardHabitBonus: hardHabitCount > 0,\n        };\n    } else if (effectiveScore >= 500) {\n        overallLevel = {\n            level: \"gold\",\n            title: \"Habit Enthusiast\",\n            description: \"Built strong foundations across multiple habits\",\n            threshold: 500,\n            isHardHabitBonus: hardHabitCount > 0,\n        };\n    } else if (effectiveScore >= 200) {\n        overallLevel = {\n            level: \"silver\",\n            title: \"Habit Builder\",\n            description: \"Making steady progress in habit development\",\n            threshold: 200,\n            isHardHabitBonus: hardHabitCount > 0,\n        };\n    } else {\n        overallLevel = {\n            level: \"bronze\",\n            title: \"Habit Starter\",\n            description: \"Beginning the journey of positive change\",\n            threshold: 50,\n            isHardHabitBonus: hardHabitCount > 0,\n        };\n    }\n\n    return {\n        totalRawScore,\n        totalAdjustedScore,\n        averageMultiplier,\n        hardHabitCount,\n        totalHabits: scores.length,\n        overallLevel,\n    };\n}\n\n/**\n * Get difficulty-specific encouragement messages\n * Requirements: 9.5 - Additional recognition for hard habits\n */\nexport function getDifficultyEncouragement(\n    difficulty: \"easy\" | \"medium\" | \"hard\",\n): {\n    completionMessage: string;\n    streakMessage: string;\n    milestoneMessage: string;\n} {\n    switch (difficulty) {\n        case \"hard\":\n            return {\n                completionMessage:\n                    \"Incredible! You conquered a challenging habit today! ðŸ’ª\",\n                streakMessage:\n                    \"Your determination with this difficult habit is inspiring! ðŸ”¥\",\n                milestoneMessage:\n                    \"Amazing milestone! Hard habits like this build real character! ðŸ†\",\n            };\n        case \"medium\":\n            return {\n                completionMessage: \"Great job! You're building solid habits! ðŸ‘\",\n                streakMessage: \"Your consistency is paying off! Keep it up! â­\",\n                milestoneMessage: \"Fantastic milestone! Your dedication is showing! ðŸŽ¯\",\n            };\n        case \"easy\":\n            return {\n                completionMessage: \"Nice work! Every step counts! âœ¨\",\n                streakMessage: \"Building momentum with consistent action! ðŸ“ˆ\",\n                milestoneMessage:\n                    \"Excellent milestone! Small steps lead to big changes! ðŸŒŸ\",\n            };\n    }\n}\n\n/**\n * Calculate score progression over time\n */\nexport function calculateScoreProgression(\n    currentScore: HabitScore,\n    previousScore?: HabitScore,\n): {\n    rawScoreChange: number;\n    adjustedScoreChange: number;\n    progressPercentage: number;\n    trend: \"improving\" | \"stable\" | \"declining\";\n} {\n    if (!previousScore) {\n        return {\n            rawScoreChange: currentScore.rawScore,\n            adjustedScoreChange: currentScore.adjustedScore,\n            progressPercentage: 100,\n            trend: \"improving\",\n        };\n    }\n\n    const rawScoreChange = currentScore.rawScore - previousScore.rawScore;\n    const adjustedScoreChange =\n        currentScore.adjustedScore - previousScore.adjustedScore;\n\n    const progressPercentage =\n        previousScore.adjustedScore > 0\n            ? Math.round((adjustedScoreChange / previousScore.adjustedScore) * 100)\n            : 100;\n\n    let trend: \"improving\" | \"stable\" | \"declining\";\n    if (adjustedScoreChange > 0) {\n        trend = \"improving\";\n    } else if (adjustedScoreChange === 0) {\n        trend = \"stable\";\n    } else {\n        trend = \"declining\";\n    }\n\n    return {\n        rawScoreChange,\n        adjustedScoreChange,\n        progressPercentage,\n        trend,\n    };\n}\n"],"mappings":"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","ignoreList":[]}