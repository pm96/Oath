2c7897ce5fd9fb980fa93312983be361
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.calculateHabitScore = calculateHabitScore;
exports.calculateMultipleHabitScores = calculateMultipleHabitScores;
exports.calculateOverallUserScore = calculateOverallUserScore;
exports.calculateScoreProgression = calculateScoreProgression;
exports.getDifficultyEncouragement = getDifficultyEncouragement;
exports.getRecognitionLevel = getRecognitionLevel;
exports.normalizeHabitScores = normalizeHabitScores;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _habitStreaks = require("../../types/habit-streaks");
function calculateHabitScore(streak, goal) {
  var totalCompletions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
  var difficulty = goal.difficulty;
  var multiplier = _habitStreaks.DIFFICULTY_MULTIPLIERS[difficulty];
  var streakScore = streak.currentStreak * 10;
  var completionBonus = totalCompletions * 2;
  var bestStreakBonus = streak.bestStreak * 5;
  var rawScore = streakScore + completionBonus + bestStreakBonus;
  var adjustedScore = Math.round(rawScore * multiplier);
  return {
    habitId: streak.habitId,
    rawScore: rawScore,
    adjustedScore: adjustedScore,
    difficulty: difficulty,
    multiplier: multiplier,
    streakLength: streak.currentStreak,
    totalCompletions: totalCompletions
  };
}
function calculateMultipleHabitScores(streaks, goals) {
  var completionCounts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var goalMap = new Map(goals.map(function (goal) {
    return [goal.id, goal];
  }));
  return streaks.map(function (streak) {
    var goal = goalMap.get(streak.habitId);
    if (!goal) return null;
    var completions = completionCounts[streak.habitId] || 0;
    return calculateHabitScore(streak, goal, completions);
  }).filter(function (score) {
    return score !== null;
  });
}
function normalizeHabitScores(scores) {
  if (scores.length === 0) return [];
  var scoresByDifficulty = {
    easy: scores.filter(function (s) {
      return s.difficulty === "easy";
    }),
    medium: scores.filter(function (s) {
      return s.difficulty === "medium";
    }),
    hard: scores.filter(function (s) {
      return s.difficulty === "hard";
    })
  };
  var normalizedScores = [];
  Object.entries(scoresByDifficulty).forEach(function (_ref) {
    var _ref2 = (0, _slicedToArray2.default)(_ref, 2),
      difficulty = _ref2[0],
      difficultyScores = _ref2[1];
    if (difficultyScores.length === 0) return;
    var sortedScores = (0, _toConsumableArray2.default)(difficultyScores).sort(function (a, b) {
      return b.rawScore - a.rawScore;
    });
    sortedScores.forEach(function (score, index) {
      var percentile = difficultyScores.length === 1 ? 100 : Math.round((difficultyScores.length - index - 1) / (difficultyScores.length - 1) * 100);
      normalizedScores.push({
        habitId: score.habitId,
        normalizedScore: score.adjustedScore,
        percentile: percentile,
        rank: index + 1,
        totalHabits: difficultyScores.length
      });
    });
  });
  return normalizedScores;
}
function getRecognitionLevel(score, normalizedScore) {
  var isHardHabit = score.difficulty === "hard";
  var adjustedThreshold = isHardHabit ? 0.8 : 1.0;
  var thresholds = {
    diamond: 1000 * adjustedThreshold,
    platinum: 500 * adjustedThreshold,
    gold: 250 * adjustedThreshold,
    silver: 100 * adjustedThreshold,
    bronze: 50 * adjustedThreshold
  };
  var percentileBonus = normalizedScore.percentile >= 90 ? 1.2 : normalizedScore.percentile >= 75 ? 1.1 : 1.0;
  var effectiveScore = score.adjustedScore * percentileBonus;
  if (effectiveScore >= thresholds.diamond) {
    return {
      level: "diamond",
      title: isHardHabit ? "Diamond Warrior" : "Diamond Achiever",
      description: isHardHabit ? "Mastered the most challenging habits with exceptional consistency" : "Achieved exceptional consistency and dedication",
      threshold: thresholds.diamond,
      isHardHabitBonus: isHardHabit
    };
  } else if (effectiveScore >= thresholds.platinum) {
    return {
      level: "platinum",
      title: isHardHabit ? "Platinum Champion" : "Platinum Performer",
      description: isHardHabit ? "Conquered difficult habits with remarkable persistence" : "Demonstrated remarkable consistency and growth",
      threshold: thresholds.platinum,
      isHardHabitBonus: isHardHabit
    };
  } else if (effectiveScore >= thresholds.gold) {
    return {
      level: "gold",
      title: isHardHabit ? "Gold Conqueror" : "Gold Standard",
      description: isHardHabit ? "Overcame challenging habits with strong determination" : "Maintained excellent habit consistency",
      threshold: thresholds.gold,
      isHardHabitBonus: isHardHabit
    };
  } else if (effectiveScore >= thresholds.silver) {
    return {
      level: "silver",
      title: isHardHabit ? "Silver Challenger" : "Silver Streak",
      description: isHardHabit ? "Tackled difficult habits with growing confidence" : "Built solid habit foundations",
      threshold: thresholds.silver,
      isHardHabitBonus: isHardHabit
    };
  } else {
    return {
      level: "bronze",
      title: isHardHabit ? "Bronze Brave" : "Bronze Builder",
      description: isHardHabit ? "Courageously started challenging habits" : "Beginning the journey of habit formation",
      threshold: thresholds.bronze,
      isHardHabitBonus: isHardHabit
    };
  }
}
function calculateOverallUserScore(scores) {
  if (scores.length === 0) {
    return {
      totalRawScore: 0,
      totalAdjustedScore: 0,
      averageMultiplier: 1,
      hardHabitCount: 0,
      totalHabits: 0,
      overallLevel: {
        level: "bronze",
        title: "Getting Started",
        description: "Ready to begin your habit journey",
        threshold: 0,
        isHardHabitBonus: false
      }
    };
  }
  var totalRawScore = scores.reduce(function (sum, score) {
    return sum + score.rawScore;
  }, 0);
  var totalAdjustedScore = scores.reduce(function (sum, score) {
    return sum + score.adjustedScore;
  }, 0);
  var totalMultiplier = scores.reduce(function (sum, score) {
    return sum + score.multiplier;
  }, 0);
  var averageMultiplier = totalMultiplier / scores.length;
  var hardHabitCount = scores.filter(function (score) {
    return score.difficulty === "hard";
  }).length;
  var hardHabitBonus = hardHabitCount > 0 ? 1 + hardHabitCount * 0.1 : 1;
  var effectiveScore = totalAdjustedScore * hardHabitBonus;
  var overallLevel;
  if (effectiveScore >= 2000) {
    overallLevel = {
      level: "diamond",
      title: "Habit Master",
      description: "Achieved mastery across multiple challenging habits",
      threshold: 2000,
      isHardHabitBonus: hardHabitCount > 0
    };
  } else if (effectiveScore >= 1000) {
    overallLevel = {
      level: "platinum",
      title: "Habit Expert",
      description: "Demonstrated expertise in habit formation and maintenance",
      threshold: 1000,
      isHardHabitBonus: hardHabitCount > 0
    };
  } else if (effectiveScore >= 500) {
    overallLevel = {
      level: "gold",
      title: "Habit Enthusiast",
      description: "Built strong foundations across multiple habits",
      threshold: 500,
      isHardHabitBonus: hardHabitCount > 0
    };
  } else if (effectiveScore >= 200) {
    overallLevel = {
      level: "silver",
      title: "Habit Builder",
      description: "Making steady progress in habit development",
      threshold: 200,
      isHardHabitBonus: hardHabitCount > 0
    };
  } else {
    overallLevel = {
      level: "bronze",
      title: "Habit Starter",
      description: "Beginning the journey of positive change",
      threshold: 50,
      isHardHabitBonus: hardHabitCount > 0
    };
  }
  return {
    totalRawScore: totalRawScore,
    totalAdjustedScore: totalAdjustedScore,
    averageMultiplier: averageMultiplier,
    hardHabitCount: hardHabitCount,
    totalHabits: scores.length,
    overallLevel: overallLevel
  };
}
function getDifficultyEncouragement(difficulty) {
  switch (difficulty) {
    case "hard":
      return {
        completionMessage: "Incredible! You conquered a challenging habit today! ðŸ’ª",
        streakMessage: "Your determination with this difficult habit is inspiring! ðŸ”¥",
        milestoneMessage: "Amazing milestone! Hard habits like this build real character! ðŸ†"
      };
    case "medium":
      return {
        completionMessage: "Great job! You're building solid habits! ðŸ‘",
        streakMessage: "Your consistency is paying off! Keep it up! â­",
        milestoneMessage: "Fantastic milestone! Your dedication is showing! ðŸŽ¯"
      };
    case "easy":
      return {
        completionMessage: "Nice work! Every step counts! âœ¨",
        streakMessage: "Building momentum with consistent action! ðŸ“ˆ",
        milestoneMessage: "Excellent milestone! Small steps lead to big changes! ðŸŒŸ"
      };
  }
}
function calculateScoreProgression(currentScore, previousScore) {
  if (!previousScore) {
    return {
      rawScoreChange: currentScore.rawScore,
      adjustedScoreChange: currentScore.adjustedScore,
      progressPercentage: 100,
      trend: "improving"
    };
  }
  var rawScoreChange = currentScore.rawScore - previousScore.rawScore;
  var adjustedScoreChange = currentScore.adjustedScore - previousScore.adjustedScore;
  var progressPercentage = previousScore.adjustedScore > 0 ? Math.round(adjustedScoreChange / previousScore.adjustedScore * 100) : 100;
  var trend;
  if (adjustedScoreChange > 0) {
    trend = "improving";
  } else if (adjustedScoreChange === 0) {
    trend = "stable";
  } else {
    trend = "declining";
  }
  return {
    rawScoreChange: rawScoreChange,
    adjustedScoreChange: adjustedScoreChange,
    progressPercentage: progressPercentage,
    trend: trend
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaGFiaXRTdHJlYWtzIiwicmVxdWlyZSIsImNhbGN1bGF0ZUhhYml0U2NvcmUiLCJzdHJlYWsiLCJnb2FsIiwidG90YWxDb21wbGV0aW9ucyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImRpZmZpY3VsdHkiLCJtdWx0aXBsaWVyIiwiRElGRklDVUxUWV9NVUxUSVBMSUVSUyIsInN0cmVha1Njb3JlIiwiY3VycmVudFN0cmVhayIsImNvbXBsZXRpb25Cb251cyIsImJlc3RTdHJlYWtCb251cyIsImJlc3RTdHJlYWsiLCJyYXdTY29yZSIsImFkanVzdGVkU2NvcmUiLCJNYXRoIiwicm91bmQiLCJoYWJpdElkIiwic3RyZWFrTGVuZ3RoIiwiY2FsY3VsYXRlTXVsdGlwbGVIYWJpdFNjb3JlcyIsInN0cmVha3MiLCJnb2FscyIsImNvbXBsZXRpb25Db3VudHMiLCJnb2FsTWFwIiwiTWFwIiwibWFwIiwiaWQiLCJnZXQiLCJjb21wbGV0aW9ucyIsImZpbHRlciIsInNjb3JlIiwibm9ybWFsaXplSGFiaXRTY29yZXMiLCJzY29yZXMiLCJzY29yZXNCeURpZmZpY3VsdHkiLCJlYXN5IiwicyIsIm1lZGl1bSIsImhhcmQiLCJub3JtYWxpemVkU2NvcmVzIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJfcmVmIiwiX3JlZjIiLCJfc2xpY2VkVG9BcnJheTIiLCJkZWZhdWx0IiwiZGlmZmljdWx0eVNjb3JlcyIsInNvcnRlZFNjb3JlcyIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJzb3J0IiwiYSIsImIiLCJpbmRleCIsInBlcmNlbnRpbGUiLCJwdXNoIiwibm9ybWFsaXplZFNjb3JlIiwicmFuayIsInRvdGFsSGFiaXRzIiwiZ2V0UmVjb2duaXRpb25MZXZlbCIsImlzSGFyZEhhYml0IiwiYWRqdXN0ZWRUaHJlc2hvbGQiLCJ0aHJlc2hvbGRzIiwiZGlhbW9uZCIsInBsYXRpbnVtIiwiZ29sZCIsInNpbHZlciIsImJyb256ZSIsInBlcmNlbnRpbGVCb251cyIsImVmZmVjdGl2ZVNjb3JlIiwibGV2ZWwiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidGhyZXNob2xkIiwiaXNIYXJkSGFiaXRCb251cyIsImNhbGN1bGF0ZU92ZXJhbGxVc2VyU2NvcmUiLCJ0b3RhbFJhd1Njb3JlIiwidG90YWxBZGp1c3RlZFNjb3JlIiwiYXZlcmFnZU11bHRpcGxpZXIiLCJoYXJkSGFiaXRDb3VudCIsIm92ZXJhbGxMZXZlbCIsInJlZHVjZSIsInN1bSIsInRvdGFsTXVsdGlwbGllciIsImhhcmRIYWJpdEJvbnVzIiwiZ2V0RGlmZmljdWx0eUVuY291cmFnZW1lbnQiLCJjb21wbGV0aW9uTWVzc2FnZSIsInN0cmVha01lc3NhZ2UiLCJtaWxlc3RvbmVNZXNzYWdlIiwiY2FsY3VsYXRlU2NvcmVQcm9ncmVzc2lvbiIsImN1cnJlbnRTY29yZSIsInByZXZpb3VzU2NvcmUiLCJyYXdTY29yZUNoYW5nZSIsImFkanVzdGVkU2NvcmVDaGFuZ2UiLCJwcm9ncmVzc1BlcmNlbnRhZ2UiLCJ0cmVuZCJdLCJzb3VyY2VzIjpbInNjb3JpbmdTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERJRkZJQ1VMVFlfTVVMVElQTElFUlMsIEhhYml0U3RyZWFrIH0gZnJvbSBcIi4uLy4uL3R5cGVzL2hhYml0LXN0cmVha3NcIjtcbmltcG9ydCB7IEdvYWwgfSBmcm9tIFwiLi9jb2xsZWN0aW9uc1wiO1xuXG4vKipcbiAqIFNjb3JpbmcgU2VydmljZSBmb3IgSGFiaXQgRGlmZmljdWx0eSBhbmQgQWNoaWV2ZW1lbnQgQ2FsY3VsYXRpb25zXG4gKiBSZXF1aXJlbWVudHM6IDkuMiwgOS4zLCA5LjQsIDkuNVxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgSGFiaXRTY29yZSB7XG4gICAgaGFiaXRJZDogc3RyaW5nO1xuICAgIHJhd1Njb3JlOiBudW1iZXI7XG4gICAgYWRqdXN0ZWRTY29yZTogbnVtYmVyO1xuICAgIGRpZmZpY3VsdHk6IFwiZWFzeVwiIHwgXCJtZWRpdW1cIiB8IFwiaGFyZFwiO1xuICAgIG11bHRpcGxpZXI6IG51bWJlcjtcbiAgICBzdHJlYWtMZW5ndGg6IG51bWJlcjtcbiAgICB0b3RhbENvbXBsZXRpb25zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9ybWFsaXplZFNjb3JlIHtcbiAgICBoYWJpdElkOiBzdHJpbmc7XG4gICAgbm9ybWFsaXplZFNjb3JlOiBudW1iZXI7XG4gICAgcGVyY2VudGlsZTogbnVtYmVyO1xuICAgIHJhbms6IG51bWJlcjtcbiAgICB0b3RhbEhhYml0czogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlY29nbml0aW9uTGV2ZWwge1xuICAgIGxldmVsOiBcImJyb256ZVwiIHwgXCJzaWx2ZXJcIiB8IFwiZ29sZFwiIHwgXCJwbGF0aW51bVwiIHwgXCJkaWFtb25kXCI7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIHRocmVzaG9sZDogbnVtYmVyO1xuICAgIGlzSGFyZEhhYml0Qm9udXM6IGJvb2xlYW47XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIGRpZmZpY3VsdHktd2VpZ2h0ZWQgc2NvcmUgZm9yIGEgaGFiaXRcbiAqIFJlcXVpcmVtZW50czogOS4yIC0gV2VpZ2h0IHN0cmVha3MgYnkgZGlmZmljdWx0eSBtdWx0aXBsaWVyICgxeCwgMS41eCwgMngpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVIYWJpdFNjb3JlKFxuICAgIHN0cmVhazogSGFiaXRTdHJlYWssXG4gICAgZ29hbDogR29hbCxcbiAgICB0b3RhbENvbXBsZXRpb25zOiBudW1iZXIgPSAwLFxuKTogSGFiaXRTY29yZSB7XG4gICAgY29uc3QgZGlmZmljdWx0eSA9IGdvYWwuZGlmZmljdWx0eTtcbiAgICBjb25zdCBtdWx0aXBsaWVyID0gRElGRklDVUxUWV9NVUxUSVBMSUVSU1tkaWZmaWN1bHR5XTtcblxuICAgIC8vIEJhc2Ugc2NvcmUgY2FsY3VsYXRpb246IHN0cmVhayBsZW5ndGggKyBjb21wbGV0aW9uIGJvbnVzXG4gICAgY29uc3Qgc3RyZWFrU2NvcmUgPSBzdHJlYWsuY3VycmVudFN0cmVhayAqIDEwOyAvLyAxMCBwb2ludHMgcGVyIGRheVxuICAgIGNvbnN0IGNvbXBsZXRpb25Cb251cyA9IHRvdGFsQ29tcGxldGlvbnMgKiAyOyAvLyAyIHBvaW50cyBwZXIgY29tcGxldGlvblxuICAgIGNvbnN0IGJlc3RTdHJlYWtCb251cyA9IHN0cmVhay5iZXN0U3RyZWFrICogNTsgLy8gNSBwb2ludHMgZm9yIGJlc3Qgc3RyZWFrIGFjaGlldmVtZW50XG5cbiAgICBjb25zdCByYXdTY29yZSA9IHN0cmVha1Njb3JlICsgY29tcGxldGlvbkJvbnVzICsgYmVzdFN0cmVha0JvbnVzO1xuICAgIGNvbnN0IGFkanVzdGVkU2NvcmUgPSBNYXRoLnJvdW5kKHJhd1Njb3JlICogbXVsdGlwbGllcik7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBoYWJpdElkOiBzdHJlYWsuaGFiaXRJZCxcbiAgICAgICAgcmF3U2NvcmUsXG4gICAgICAgIGFkanVzdGVkU2NvcmUsXG4gICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgIG11bHRpcGxpZXIsXG4gICAgICAgIHN0cmVha0xlbmd0aDogc3RyZWFrLmN1cnJlbnRTdHJlYWssXG4gICAgICAgIHRvdGFsQ29tcGxldGlvbnMsXG4gICAgfTtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgc2NvcmVzIGZvciBtdWx0aXBsZSBoYWJpdHNcbiAqIFJlcXVpcmVtZW50czogOS4zIC0gU2hvdyBib3RoIHJhdyBhbmQgYWRqdXN0ZWQgc2NvcmVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVNdWx0aXBsZUhhYml0U2NvcmVzKFxuICAgIHN0cmVha3M6IEhhYml0U3RyZWFrW10sXG4gICAgZ29hbHM6IEdvYWxbXSxcbiAgICBjb21wbGV0aW9uQ291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge30sXG4pOiBIYWJpdFNjb3JlW10ge1xuICAgIGNvbnN0IGdvYWxNYXAgPSBuZXcgTWFwKGdvYWxzLm1hcCgoZ29hbCkgPT4gW2dvYWwuaWQsIGdvYWxdKSk7XG5cbiAgICByZXR1cm4gc3RyZWFrc1xuICAgICAgICAubWFwKChzdHJlYWspID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdvYWwgPSBnb2FsTWFwLmdldChzdHJlYWsuaGFiaXRJZCk7XG4gICAgICAgICAgICBpZiAoIWdvYWwpIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICBjb25zdCBjb21wbGV0aW9ucyA9IGNvbXBsZXRpb25Db3VudHNbc3RyZWFrLmhhYml0SWRdIHx8IDA7XG4gICAgICAgICAgICByZXR1cm4gY2FsY3VsYXRlSGFiaXRTY29yZShzdHJlYWssIGdvYWwsIGNvbXBsZXRpb25zKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbHRlcigoc2NvcmUpOiBzY29yZSBpcyBIYWJpdFNjb3JlID0+IHNjb3JlICE9PSBudWxsKTtcbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgc2NvcmVzIGZvciBoYWJpdCBjb21wYXJpc29uXG4gKiBSZXF1aXJlbWVudHM6IDkuNCAtIE5vcm1hbGl6ZSBzY29yZXMgdG8gYWNjb3VudCBmb3IgZGlmZmVyZW50IGRpZmZpY3VsdHkgbGV2ZWxzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVIYWJpdFNjb3JlcyhzY29yZXM6IEhhYml0U2NvcmVbXSk6IE5vcm1hbGl6ZWRTY29yZVtdIHtcbiAgICBpZiAoc2NvcmVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xuXG4gICAgLy8gR3JvdXAgc2NvcmVzIGJ5IGRpZmZpY3VsdHkgZm9yIGZhaXIgY29tcGFyaXNvblxuICAgIGNvbnN0IHNjb3Jlc0J5RGlmZmljdWx0eSA9IHtcbiAgICAgICAgZWFzeTogc2NvcmVzLmZpbHRlcigocykgPT4gcy5kaWZmaWN1bHR5ID09PSBcImVhc3lcIiksXG4gICAgICAgIG1lZGl1bTogc2NvcmVzLmZpbHRlcigocykgPT4gcy5kaWZmaWN1bHR5ID09PSBcIm1lZGl1bVwiKSxcbiAgICAgICAgaGFyZDogc2NvcmVzLmZpbHRlcigocykgPT4gcy5kaWZmaWN1bHR5ID09PSBcImhhcmRcIiksXG4gICAgfTtcblxuICAgIGNvbnN0IG5vcm1hbGl6ZWRTY29yZXM6IE5vcm1hbGl6ZWRTY29yZVtdID0gW107XG5cbiAgICAvLyBOb3JtYWxpemUgd2l0aGluIGVhY2ggZGlmZmljdWx0eSBncm91cFxuICAgIE9iamVjdC5lbnRyaWVzKHNjb3Jlc0J5RGlmZmljdWx0eSkuZm9yRWFjaChcbiAgICAgICAgKFtkaWZmaWN1bHR5LCBkaWZmaWN1bHR5U2NvcmVzXSkgPT4ge1xuICAgICAgICAgICAgaWYgKGRpZmZpY3VsdHlTY29yZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgICAgIC8vIFNvcnQgYnkgcmF3IHNjb3JlIGZvciBmYWlyIGNvbXBhcmlzb24gd2l0aGluIGRpZmZpY3VsdHlcbiAgICAgICAgICAgIGNvbnN0IHNvcnRlZFNjb3JlcyA9IFsuLi5kaWZmaWN1bHR5U2NvcmVzXS5zb3J0KFxuICAgICAgICAgICAgICAgIChhLCBiKSA9PiBiLnJhd1Njb3JlIC0gYS5yYXdTY29yZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHNvcnRlZFNjb3Jlcy5mb3JFYWNoKChzY29yZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwZXJjZW50aWxlID1cbiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eVNjb3Jlcy5sZW5ndGggPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgID8gMTAwXG4gICAgICAgICAgICAgICAgICAgICAgICA6IE1hdGgucm91bmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKChkaWZmaWN1bHR5U2NvcmVzLmxlbmd0aCAtIGluZGV4IC0gMSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZGlmZmljdWx0eVNjb3Jlcy5sZW5ndGggLSAxKSkgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBub3JtYWxpemVkU2NvcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBoYWJpdElkOiBzY29yZS5oYWJpdElkLFxuICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkU2NvcmU6IHNjb3JlLmFkanVzdGVkU2NvcmUsXG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnRpbGUsXG4gICAgICAgICAgICAgICAgICAgIHJhbms6IGluZGV4ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxIYWJpdHM6IGRpZmZpY3VsdHlTY29yZXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgKTtcblxuICAgIHJldHVybiBub3JtYWxpemVkU2NvcmVzO1xufVxuXG4vKipcbiAqIEdldCByZWNvZ25pdGlvbiBsZXZlbCBiYXNlZCBvbiBoYWJpdCBwZXJmb3JtYW5jZVxuICogUmVxdWlyZW1lbnRzOiA5LjUgLSBBZGRpdGlvbmFsIHJlY29nbml0aW9uIGZvciBoYXJkIGhhYml0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVjb2duaXRpb25MZXZlbChcbiAgICBzY29yZTogSGFiaXRTY29yZSxcbiAgICBub3JtYWxpemVkU2NvcmU6IE5vcm1hbGl6ZWRTY29yZSxcbik6IFJlY29nbml0aW9uTGV2ZWwge1xuICAgIGNvbnN0IGlzSGFyZEhhYml0ID0gc2NvcmUuZGlmZmljdWx0eSA9PT0gXCJoYXJkXCI7XG4gICAgY29uc3QgYWRqdXN0ZWRUaHJlc2hvbGQgPSBpc0hhcmRIYWJpdCA/IDAuOCA6IDEuMDsgLy8gTG93ZXIgdGhyZXNob2xkcyBmb3IgaGFyZCBoYWJpdHNcblxuICAgIC8vIEJhc2UgdGhyZXNob2xkcyAoYWRqdXN0ZWQgZm9yIGhhcmQgaGFiaXRzKVxuICAgIGNvbnN0IHRocmVzaG9sZHMgPSB7XG4gICAgICAgIGRpYW1vbmQ6IDEwMDAgKiBhZGp1c3RlZFRocmVzaG9sZCxcbiAgICAgICAgcGxhdGludW06IDUwMCAqIGFkanVzdGVkVGhyZXNob2xkLFxuICAgICAgICBnb2xkOiAyNTAgKiBhZGp1c3RlZFRocmVzaG9sZCxcbiAgICAgICAgc2lsdmVyOiAxMDAgKiBhZGp1c3RlZFRocmVzaG9sZCxcbiAgICAgICAgYnJvbnplOiA1MCAqIGFkanVzdGVkVGhyZXNob2xkLFxuICAgIH07XG5cbiAgICAvLyBBbHNvIGNvbnNpZGVyIHBlcmNlbnRpbGUgZm9yIHJlY29nbml0aW9uXG4gICAgY29uc3QgcGVyY2VudGlsZUJvbnVzID1cbiAgICAgICAgbm9ybWFsaXplZFNjb3JlLnBlcmNlbnRpbGUgPj0gOTBcbiAgICAgICAgICAgID8gMS4yXG4gICAgICAgICAgICA6IG5vcm1hbGl6ZWRTY29yZS5wZXJjZW50aWxlID49IDc1XG4gICAgICAgICAgICAgICAgPyAxLjFcbiAgICAgICAgICAgICAgICA6IDEuMDtcblxuICAgIGNvbnN0IGVmZmVjdGl2ZVNjb3JlID0gc2NvcmUuYWRqdXN0ZWRTY29yZSAqIHBlcmNlbnRpbGVCb251cztcblxuICAgIGlmIChlZmZlY3RpdmVTY29yZSA+PSB0aHJlc2hvbGRzLmRpYW1vbmQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxldmVsOiBcImRpYW1vbmRcIixcbiAgICAgICAgICAgIHRpdGxlOiBpc0hhcmRIYWJpdCA/IFwiRGlhbW9uZCBXYXJyaW9yXCIgOiBcIkRpYW1vbmQgQWNoaWV2ZXJcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpc0hhcmRIYWJpdFxuICAgICAgICAgICAgICAgID8gXCJNYXN0ZXJlZCB0aGUgbW9zdCBjaGFsbGVuZ2luZyBoYWJpdHMgd2l0aCBleGNlcHRpb25hbCBjb25zaXN0ZW5jeVwiXG4gICAgICAgICAgICAgICAgOiBcIkFjaGlldmVkIGV4Y2VwdGlvbmFsIGNvbnNpc3RlbmN5IGFuZCBkZWRpY2F0aW9uXCIsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHRocmVzaG9sZHMuZGlhbW9uZCxcbiAgICAgICAgICAgIGlzSGFyZEhhYml0Qm9udXM6IGlzSGFyZEhhYml0LFxuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoZWZmZWN0aXZlU2NvcmUgPj0gdGhyZXNob2xkcy5wbGF0aW51bSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGV2ZWw6IFwicGxhdGludW1cIixcbiAgICAgICAgICAgIHRpdGxlOiBpc0hhcmRIYWJpdCA/IFwiUGxhdGludW0gQ2hhbXBpb25cIiA6IFwiUGxhdGludW0gUGVyZm9ybWVyXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogaXNIYXJkSGFiaXRcbiAgICAgICAgICAgICAgICA/IFwiQ29ucXVlcmVkIGRpZmZpY3VsdCBoYWJpdHMgd2l0aCByZW1hcmthYmxlIHBlcnNpc3RlbmNlXCJcbiAgICAgICAgICAgICAgICA6IFwiRGVtb25zdHJhdGVkIHJlbWFya2FibGUgY29uc2lzdGVuY3kgYW5kIGdyb3d0aFwiLFxuICAgICAgICAgICAgdGhyZXNob2xkOiB0aHJlc2hvbGRzLnBsYXRpbnVtLFxuICAgICAgICAgICAgaXNIYXJkSGFiaXRCb251czogaXNIYXJkSGFiaXQsXG4gICAgICAgIH07XG4gICAgfSBlbHNlIGlmIChlZmZlY3RpdmVTY29yZSA+PSB0aHJlc2hvbGRzLmdvbGQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxldmVsOiBcImdvbGRcIixcbiAgICAgICAgICAgIHRpdGxlOiBpc0hhcmRIYWJpdCA/IFwiR29sZCBDb25xdWVyb3JcIiA6IFwiR29sZCBTdGFuZGFyZFwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGlzSGFyZEhhYml0XG4gICAgICAgICAgICAgICAgPyBcIk92ZXJjYW1lIGNoYWxsZW5naW5nIGhhYml0cyB3aXRoIHN0cm9uZyBkZXRlcm1pbmF0aW9uXCJcbiAgICAgICAgICAgICAgICA6IFwiTWFpbnRhaW5lZCBleGNlbGxlbnQgaGFiaXQgY29uc2lzdGVuY3lcIixcbiAgICAgICAgICAgIHRocmVzaG9sZDogdGhyZXNob2xkcy5nb2xkLFxuICAgICAgICAgICAgaXNIYXJkSGFiaXRCb251czogaXNIYXJkSGFiaXQsXG4gICAgICAgIH07XG4gICAgfSBlbHNlIGlmIChlZmZlY3RpdmVTY29yZSA+PSB0aHJlc2hvbGRzLnNpbHZlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGV2ZWw6IFwic2lsdmVyXCIsXG4gICAgICAgICAgICB0aXRsZTogaXNIYXJkSGFiaXQgPyBcIlNpbHZlciBDaGFsbGVuZ2VyXCIgOiBcIlNpbHZlciBTdHJlYWtcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpc0hhcmRIYWJpdFxuICAgICAgICAgICAgICAgID8gXCJUYWNrbGVkIGRpZmZpY3VsdCBoYWJpdHMgd2l0aCBncm93aW5nIGNvbmZpZGVuY2VcIlxuICAgICAgICAgICAgICAgIDogXCJCdWlsdCBzb2xpZCBoYWJpdCBmb3VuZGF0aW9uc1wiLFxuICAgICAgICAgICAgdGhyZXNob2xkOiB0aHJlc2hvbGRzLnNpbHZlcixcbiAgICAgICAgICAgIGlzSGFyZEhhYml0Qm9udXM6IGlzSGFyZEhhYml0LFxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsZXZlbDogXCJicm9uemVcIixcbiAgICAgICAgICAgIHRpdGxlOiBpc0hhcmRIYWJpdCA/IFwiQnJvbnplIEJyYXZlXCIgOiBcIkJyb256ZSBCdWlsZGVyXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogaXNIYXJkSGFiaXRcbiAgICAgICAgICAgICAgICA/IFwiQ291cmFnZW91c2x5IHN0YXJ0ZWQgY2hhbGxlbmdpbmcgaGFiaXRzXCJcbiAgICAgICAgICAgICAgICA6IFwiQmVnaW5uaW5nIHRoZSBqb3VybmV5IG9mIGhhYml0IGZvcm1hdGlvblwiLFxuICAgICAgICAgICAgdGhyZXNob2xkOiB0aHJlc2hvbGRzLmJyb256ZSxcbiAgICAgICAgICAgIGlzSGFyZEhhYml0Qm9udXM6IGlzSGFyZEhhYml0LFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgb3ZlcmFsbCB1c2VyIHNjb3JlIGFjcm9zcyBhbGwgaGFiaXRzXG4gKiBSZXF1aXJlbWVudHM6IDkuMiwgOS40IC0gQWdncmVnYXRlIGRpZmZpY3VsdHktd2VpZ2h0ZWQgc2NvcmVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVPdmVyYWxsVXNlclNjb3JlKHNjb3JlczogSGFiaXRTY29yZVtdKToge1xuICAgIHRvdGFsUmF3U2NvcmU6IG51bWJlcjtcbiAgICB0b3RhbEFkanVzdGVkU2NvcmU6IG51bWJlcjtcbiAgICBhdmVyYWdlTXVsdGlwbGllcjogbnVtYmVyO1xuICAgIGhhcmRIYWJpdENvdW50OiBudW1iZXI7XG4gICAgdG90YWxIYWJpdHM6IG51bWJlcjtcbiAgICBvdmVyYWxsTGV2ZWw6IFJlY29nbml0aW9uTGV2ZWw7XG59IHtcbiAgICBpZiAoc2NvcmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG90YWxSYXdTY29yZTogMCxcbiAgICAgICAgICAgIHRvdGFsQWRqdXN0ZWRTY29yZTogMCxcbiAgICAgICAgICAgIGF2ZXJhZ2VNdWx0aXBsaWVyOiAxLFxuICAgICAgICAgICAgaGFyZEhhYml0Q291bnQ6IDAsXG4gICAgICAgICAgICB0b3RhbEhhYml0czogMCxcbiAgICAgICAgICAgIG92ZXJhbGxMZXZlbDoge1xuICAgICAgICAgICAgICAgIGxldmVsOiBcImJyb256ZVwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIkdldHRpbmcgU3RhcnRlZFwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlJlYWR5IHRvIGJlZ2luIHlvdXIgaGFiaXQgam91cm5leVwiLFxuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgICAgICAgICBpc0hhcmRIYWJpdEJvbnVzOiBmYWxzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgdG90YWxSYXdTY29yZSA9IHNjb3Jlcy5yZWR1Y2UoKHN1bSwgc2NvcmUpID0+IHN1bSArIHNjb3JlLnJhd1Njb3JlLCAwKTtcbiAgICBjb25zdCB0b3RhbEFkanVzdGVkU2NvcmUgPSBzY29yZXMucmVkdWNlKFxuICAgICAgICAoc3VtLCBzY29yZSkgPT4gc3VtICsgc2NvcmUuYWRqdXN0ZWRTY29yZSxcbiAgICAgICAgMCxcbiAgICApO1xuICAgIGNvbnN0IHRvdGFsTXVsdGlwbGllciA9IHNjb3Jlcy5yZWR1Y2UoXG4gICAgICAgIChzdW0sIHNjb3JlKSA9PiBzdW0gKyBzY29yZS5tdWx0aXBsaWVyLFxuICAgICAgICAwLFxuICAgICk7XG4gICAgY29uc3QgYXZlcmFnZU11bHRpcGxpZXIgPSB0b3RhbE11bHRpcGxpZXIgLyBzY29yZXMubGVuZ3RoO1xuICAgIGNvbnN0IGhhcmRIYWJpdENvdW50ID0gc2NvcmVzLmZpbHRlcihcbiAgICAgICAgKHNjb3JlKSA9PiBzY29yZS5kaWZmaWN1bHR5ID09PSBcImhhcmRcIixcbiAgICApLmxlbmd0aDtcblxuICAgIC8vIENhbGN1bGF0ZSBvdmVyYWxsIGxldmVsIGJhc2VkIG9uIHRvdGFsIGFkanVzdGVkIHNjb3JlIGFuZCBoYXJkIGhhYml0IGJvbnVzXG4gICAgY29uc3QgaGFyZEhhYml0Qm9udXMgPSBoYXJkSGFiaXRDb3VudCA+IDAgPyAxICsgaGFyZEhhYml0Q291bnQgKiAwLjEgOiAxO1xuICAgIGNvbnN0IGVmZmVjdGl2ZVNjb3JlID0gdG90YWxBZGp1c3RlZFNjb3JlICogaGFyZEhhYml0Qm9udXM7XG5cbiAgICBsZXQgb3ZlcmFsbExldmVsOiBSZWNvZ25pdGlvbkxldmVsO1xuICAgIGlmIChlZmZlY3RpdmVTY29yZSA+PSAyMDAwKSB7XG4gICAgICAgIG92ZXJhbGxMZXZlbCA9IHtcbiAgICAgICAgICAgIGxldmVsOiBcImRpYW1vbmRcIixcbiAgICAgICAgICAgIHRpdGxlOiBcIkhhYml0IE1hc3RlclwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiQWNoaWV2ZWQgbWFzdGVyeSBhY3Jvc3MgbXVsdGlwbGUgY2hhbGxlbmdpbmcgaGFiaXRzXCIsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDIwMDAsXG4gICAgICAgICAgICBpc0hhcmRIYWJpdEJvbnVzOiBoYXJkSGFiaXRDb3VudCA+IDAsXG4gICAgICAgIH07XG4gICAgfSBlbHNlIGlmIChlZmZlY3RpdmVTY29yZSA+PSAxMDAwKSB7XG4gICAgICAgIG92ZXJhbGxMZXZlbCA9IHtcbiAgICAgICAgICAgIGxldmVsOiBcInBsYXRpbnVtXCIsXG4gICAgICAgICAgICB0aXRsZTogXCJIYWJpdCBFeHBlcnRcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkRlbW9uc3RyYXRlZCBleHBlcnRpc2UgaW4gaGFiaXQgZm9ybWF0aW9uIGFuZCBtYWludGVuYW5jZVwiLFxuICAgICAgICAgICAgdGhyZXNob2xkOiAxMDAwLFxuICAgICAgICAgICAgaXNIYXJkSGFiaXRCb251czogaGFyZEhhYml0Q291bnQgPiAwLFxuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoZWZmZWN0aXZlU2NvcmUgPj0gNTAwKSB7XG4gICAgICAgIG92ZXJhbGxMZXZlbCA9IHtcbiAgICAgICAgICAgIGxldmVsOiBcImdvbGRcIixcbiAgICAgICAgICAgIHRpdGxlOiBcIkhhYml0IEVudGh1c2lhc3RcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkJ1aWx0IHN0cm9uZyBmb3VuZGF0aW9ucyBhY3Jvc3MgbXVsdGlwbGUgaGFiaXRzXCIsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDUwMCxcbiAgICAgICAgICAgIGlzSGFyZEhhYml0Qm9udXM6IGhhcmRIYWJpdENvdW50ID4gMCxcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGVmZmVjdGl2ZVNjb3JlID49IDIwMCkge1xuICAgICAgICBvdmVyYWxsTGV2ZWwgPSB7XG4gICAgICAgICAgICBsZXZlbDogXCJzaWx2ZXJcIixcbiAgICAgICAgICAgIHRpdGxlOiBcIkhhYml0IEJ1aWxkZXJcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIk1ha2luZyBzdGVhZHkgcHJvZ3Jlc3MgaW4gaGFiaXQgZGV2ZWxvcG1lbnRcIixcbiAgICAgICAgICAgIHRocmVzaG9sZDogMjAwLFxuICAgICAgICAgICAgaXNIYXJkSGFiaXRCb251czogaGFyZEhhYml0Q291bnQgPiAwLFxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG92ZXJhbGxMZXZlbCA9IHtcbiAgICAgICAgICAgIGxldmVsOiBcImJyb256ZVwiLFxuICAgICAgICAgICAgdGl0bGU6IFwiSGFiaXQgU3RhcnRlclwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiQmVnaW5uaW5nIHRoZSBqb3VybmV5IG9mIHBvc2l0aXZlIGNoYW5nZVwiLFxuICAgICAgICAgICAgdGhyZXNob2xkOiA1MCxcbiAgICAgICAgICAgIGlzSGFyZEhhYml0Qm9udXM6IGhhcmRIYWJpdENvdW50ID4gMCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0b3RhbFJhd1Njb3JlLFxuICAgICAgICB0b3RhbEFkanVzdGVkU2NvcmUsXG4gICAgICAgIGF2ZXJhZ2VNdWx0aXBsaWVyLFxuICAgICAgICBoYXJkSGFiaXRDb3VudCxcbiAgICAgICAgdG90YWxIYWJpdHM6IHNjb3Jlcy5sZW5ndGgsXG4gICAgICAgIG92ZXJhbGxMZXZlbCxcbiAgICB9O1xufVxuXG4vKipcbiAqIEdldCBkaWZmaWN1bHR5LXNwZWNpZmljIGVuY291cmFnZW1lbnQgbWVzc2FnZXNcbiAqIFJlcXVpcmVtZW50czogOS41IC0gQWRkaXRpb25hbCByZWNvZ25pdGlvbiBmb3IgaGFyZCBoYWJpdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERpZmZpY3VsdHlFbmNvdXJhZ2VtZW50KFxuICAgIGRpZmZpY3VsdHk6IFwiZWFzeVwiIHwgXCJtZWRpdW1cIiB8IFwiaGFyZFwiLFxuKToge1xuICAgIGNvbXBsZXRpb25NZXNzYWdlOiBzdHJpbmc7XG4gICAgc3RyZWFrTWVzc2FnZTogc3RyaW5nO1xuICAgIG1pbGVzdG9uZU1lc3NhZ2U6IHN0cmluZztcbn0ge1xuICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgICAgICBjYXNlIFwiaGFyZFwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uTWVzc2FnZTpcbiAgICAgICAgICAgICAgICAgICAgXCJJbmNyZWRpYmxlISBZb3UgY29ucXVlcmVkIGEgY2hhbGxlbmdpbmcgaGFiaXQgdG9kYXkhIPCfkqpcIixcbiAgICAgICAgICAgICAgICBzdHJlYWtNZXNzYWdlOlxuICAgICAgICAgICAgICAgICAgICBcIllvdXIgZGV0ZXJtaW5hdGlvbiB3aXRoIHRoaXMgZGlmZmljdWx0IGhhYml0IGlzIGluc3BpcmluZyEg8J+UpVwiLFxuICAgICAgICAgICAgICAgIG1pbGVzdG9uZU1lc3NhZ2U6XG4gICAgICAgICAgICAgICAgICAgIFwiQW1hemluZyBtaWxlc3RvbmUhIEhhcmQgaGFiaXRzIGxpa2UgdGhpcyBidWlsZCByZWFsIGNoYXJhY3RlciEg8J+PhlwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBcIm1lZGl1bVwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uTWVzc2FnZTogXCJHcmVhdCBqb2IhIFlvdSdyZSBidWlsZGluZyBzb2xpZCBoYWJpdHMhIPCfkY9cIixcbiAgICAgICAgICAgICAgICBzdHJlYWtNZXNzYWdlOiBcIllvdXIgY29uc2lzdGVuY3kgaXMgcGF5aW5nIG9mZiEgS2VlcCBpdCB1cCEg4q2QXCIsXG4gICAgICAgICAgICAgICAgbWlsZXN0b25lTWVzc2FnZTogXCJGYW50YXN0aWMgbWlsZXN0b25lISBZb3VyIGRlZGljYXRpb24gaXMgc2hvd2luZyEg8J+Or1wiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBcImVhc3lcIjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY29tcGxldGlvbk1lc3NhZ2U6IFwiTmljZSB3b3JrISBFdmVyeSBzdGVwIGNvdW50cyEg4pyoXCIsXG4gICAgICAgICAgICAgICAgc3RyZWFrTWVzc2FnZTogXCJCdWlsZGluZyBtb21lbnR1bSB3aXRoIGNvbnNpc3RlbnQgYWN0aW9uISDwn5OIXCIsXG4gICAgICAgICAgICAgICAgbWlsZXN0b25lTWVzc2FnZTpcbiAgICAgICAgICAgICAgICAgICAgXCJFeGNlbGxlbnQgbWlsZXN0b25lISBTbWFsbCBzdGVwcyBsZWFkIHRvIGJpZyBjaGFuZ2VzISDwn4yfXCIsXG4gICAgICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgc2NvcmUgcHJvZ3Jlc3Npb24gb3ZlciB0aW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVTY29yZVByb2dyZXNzaW9uKFxuICAgIGN1cnJlbnRTY29yZTogSGFiaXRTY29yZSxcbiAgICBwcmV2aW91c1Njb3JlPzogSGFiaXRTY29yZSxcbik6IHtcbiAgICByYXdTY29yZUNoYW5nZTogbnVtYmVyO1xuICAgIGFkanVzdGVkU2NvcmVDaGFuZ2U6IG51bWJlcjtcbiAgICBwcm9ncmVzc1BlcmNlbnRhZ2U6IG51bWJlcjtcbiAgICB0cmVuZDogXCJpbXByb3ZpbmdcIiB8IFwic3RhYmxlXCIgfCBcImRlY2xpbmluZ1wiO1xufSB7XG4gICAgaWYgKCFwcmV2aW91c1Njb3JlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByYXdTY29yZUNoYW5nZTogY3VycmVudFNjb3JlLnJhd1Njb3JlLFxuICAgICAgICAgICAgYWRqdXN0ZWRTY29yZUNoYW5nZTogY3VycmVudFNjb3JlLmFkanVzdGVkU2NvcmUsXG4gICAgICAgICAgICBwcm9ncmVzc1BlcmNlbnRhZ2U6IDEwMCxcbiAgICAgICAgICAgIHRyZW5kOiBcImltcHJvdmluZ1wiLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHJhd1Njb3JlQ2hhbmdlID0gY3VycmVudFNjb3JlLnJhd1Njb3JlIC0gcHJldmlvdXNTY29yZS5yYXdTY29yZTtcbiAgICBjb25zdCBhZGp1c3RlZFNjb3JlQ2hhbmdlID1cbiAgICAgICAgY3VycmVudFNjb3JlLmFkanVzdGVkU2NvcmUgLSBwcmV2aW91c1Njb3JlLmFkanVzdGVkU2NvcmU7XG5cbiAgICBjb25zdCBwcm9ncmVzc1BlcmNlbnRhZ2UgPVxuICAgICAgICBwcmV2aW91c1Njb3JlLmFkanVzdGVkU2NvcmUgPiAwXG4gICAgICAgICAgICA/IE1hdGgucm91bmQoKGFkanVzdGVkU2NvcmVDaGFuZ2UgLyBwcmV2aW91c1Njb3JlLmFkanVzdGVkU2NvcmUpICogMTAwKVxuICAgICAgICAgICAgOiAxMDA7XG5cbiAgICBsZXQgdHJlbmQ6IFwiaW1wcm92aW5nXCIgfCBcInN0YWJsZVwiIHwgXCJkZWNsaW5pbmdcIjtcbiAgICBpZiAoYWRqdXN0ZWRTY29yZUNoYW5nZSA+IDApIHtcbiAgICAgICAgdHJlbmQgPSBcImltcHJvdmluZ1wiO1xuICAgIH0gZWxzZSBpZiAoYWRqdXN0ZWRTY29yZUNoYW5nZSA9PT0gMCkge1xuICAgICAgICB0cmVuZCA9IFwic3RhYmxlXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJlbmQgPSBcImRlY2xpbmluZ1wiO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHJhd1Njb3JlQ2hhbmdlLFxuICAgICAgICBhZGp1c3RlZFNjb3JlQ2hhbmdlLFxuICAgICAgICBwcm9ncmVzc1BlcmNlbnRhZ2UsXG4gICAgICAgIHRyZW5kLFxuICAgIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxhQUFBLEdB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