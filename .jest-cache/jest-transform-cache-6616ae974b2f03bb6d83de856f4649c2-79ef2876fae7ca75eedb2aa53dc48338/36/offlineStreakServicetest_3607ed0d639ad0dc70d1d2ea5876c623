c3e830bda911f49dcdd23b2ed679720d
_getJestObj().mock("@react-native-async-storage/async-storage", function () {
  return {
    getItem: jest.fn(),
    setItem: jest.fn(),
    removeItem: jest.fn(),
    getAllKeys: jest.fn(),
    multiRemove: jest.fn()
  };
});
_getJestObj().mock("../services/firebase/streakService", function () {
  return {
    StreakService: jest.fn().mockImplementation(function () {
      return {
        recordCompletion: jest.fn(),
        calculateStreak: jest.fn(),
        useStreakFreeze: jest.fn(),
        getHabitCalendar: jest.fn(),
        getHabitStreak: jest.fn()
      };
    })
  };
});
_getJestObj().mock("../services/firebase/syncService", function () {
  return {
    syncService: {
      queueOperation: jest.fn()
    }
  };
});
_getJestObj().mock("../utils/errorHandling", function () {
  return {
    isOnline: jest.fn()
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _firestore = require("firebase/firestore");
var _offlineStreakService = require("../services/firebase/offlineStreakService");
function _getJestObj() {
  var _require2 = require("@jest/globals"),
    jest = _require2.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var _require = require("../utils/errorHandling"),
  isOnline = _require.isOnline;
describe("OfflineStreakService", function () {
  beforeEach(function () {
    jest.clearAllMocks();
    _asyncStorage.default.getItem.mockResolvedValue(null);
    _asyncStorage.default.setItem.mockResolvedValue(undefined);
    _asyncStorage.default.getAllKeys.mockResolvedValue([]);
    _asyncStorage.default.multiRemove.mockResolvedValue(undefined);
  });
  describe("Completion Recording", function () {
    it("should record completion online when connected", (0, _asyncToGenerator2.default)(function* () {
      isOnline.mockResolvedValue(true);
      var completion = {
        habitId: "habit1",
        userId: "user1",
        completedAt: _firestore.Timestamp.now(),
        timezone: "UTC",
        difficulty: "medium"
      };
      var mockResult = Object.assign({}, completion, {
        id: "completion1"
      });
      var mockStreakService = _offlineStreakService.offlineStreakService.streakService;
      mockStreakService.recordCompletion.mockResolvedValue(mockResult);
      var result = yield _offlineStreakService.offlineStreakService.recordCompletion(completion);
      expect(mockStreakService.recordCompletion).toHaveBeenCalledWith(completion);
      expect(result).toEqual(mockResult);
      expect(_asyncStorage.default.setItem).toHaveBeenCalled();
    }));
    it("should record completion offline when disconnected", (0, _asyncToGenerator2.default)(function* () {
      isOnline.mockResolvedValue(false);
      var completion = {
        habitId: "habit1",
        userId: "user1",
        completedAt: _firestore.Timestamp.now(),
        timezone: "UTC",
        difficulty: "medium"
      };
      var result = yield _offlineStreakService.offlineStreakService.recordCompletion(completion);
      expect(result.id).toMatch(/^offline_/);
      expect(_asyncStorage.default.setItem).toHaveBeenCalled();
    }));
    it("should fallback to offline mode when online operation fails", (0, _asyncToGenerator2.default)(function* () {
      isOnline.mockResolvedValue(true);
      var completion = {
        habitId: "habit1",
        userId: "user1",
        completedAt: _firestore.Timestamp.now(),
        timezone: "UTC",
        difficulty: "medium"
      };
      var mockStreakService = _offlineStreakService.offlineStreakService.streakService;
      mockStreakService.recordCompletion.mockRejectedValue(new Error("Network error"));
      var result = yield _offlineStreakService.offlineStreakService.recordCompletion(completion);
      expect(result.id).toMatch(/^offline_/);
      expect(_asyncStorage.default.setItem).toHaveBeenCalled();
    }));
  });
  describe("Streak Calculation", function () {
    it("should calculate streak online when connected", (0, _asyncToGenerator2.default)(function* () {
      isOnline.mockResolvedValue(true);
      var mockStreak = {
        habitId: "habit1",
        userId: "user1",
        currentStreak: 5,
        bestStreak: 10,
        lastCompletionDate: "2024-01-15",
        streakStartDate: "2024-01-11",
        freezesAvailable: 1,
        freezesUsed: 0,
        milestones: []
      };
      var mockStreakService = _offlineStreakService.offlineStreakService.streakService;
      mockStreakService.calculateStreak.mockResolvedValue(mockStreak);
      var result = yield _offlineStreakService.offlineStreakService.calculateStreak("habit1", "user1");
      expect(mockStreakService.calculateStreak).toHaveBeenCalledWith("habit1", "user1");
      expect(result).toEqual(mockStreak);
      expect(_asyncStorage.default.setItem).toHaveBeenCalled();
    }));
    it("should return cached streak when offline", (0, _asyncToGenerator2.default)(function* () {
      isOnline.mockResolvedValue(false);
      var cachedStreak = {
        habitId: "habit1",
        userId: "user1",
        currentStreak: 3,
        bestStreak: 8,
        lastCompletionDate: "2024-01-13",
        streakStartDate: "2024-01-11",
        freezesAvailable: 0,
        freezesUsed: 1,
        milestones: []
      };
      _asyncStorage.default.getItem.mockResolvedValue(JSON.stringify(cachedStreak));
      var result = yield _offlineStreakService.offlineStreakService.calculateStreak("habit1", "user1");
      expect(result).toEqual(cachedStreak);
    }));
    it("should return default streak when no cache available", (0, _asyncToGenerator2.default)(function* () {
      isOnline.mockResolvedValue(false);
      _asyncStorage.default.getItem.mockResolvedValue(null);
      var result = yield _offlineStreakService.offlineStreakService.calculateStreak("habit1", "user1");
      expect(result).toEqual({
        habitId: "habit1",
        userId: "user1",
        currentStreak: 0,
        bestStreak: 0,
        lastCompletionDate: "",
        streakStartDate: "",
        freezesAvailable: 0,
        freezesUsed: 0,
        milestones: []
      });
    }));
  });
  describe("Cache Management", function () {
    it("should clear user cache", (0, _asyncToGenerator2.default)(function* () {
      var mockKeys = ["@offline_streak_streak_user1_habit1", "@offline_streak_completion_comp1", "@offline_streak_calendar_user1_habit1", "@other_cache_key"];
      _asyncStorage.default.getAllKeys.mockResolvedValue(mockKeys);
      yield _offlineStreakService.offlineStreakService.clearUserCache("user1");
      expect(_asyncStorage.default.multiRemove).toHaveBeenCalledWith(["@offline_streak_streak_user1_habit1", "@offline_streak_calendar_user1_habit1"]);
    }));
    it("should get cache statistics", (0, _asyncToGenerator2.default)(function* () {
      var mockKeys = ["@offline_streak_streak_user1_habit1", "@offline_streak_completion_comp1"];
      var mockData = JSON.stringify({
        data: "test",
        timestamp: Date.now()
      });
      _asyncStorage.default.getAllKeys.mockResolvedValue(mockKeys);
      _asyncStorage.default.getItem.mockResolvedValue(mockData);
      var stats = yield _offlineStreakService.offlineStreakService.getCacheStats("user1");
      expect(stats.totalItems).toBe(1);
      expect(stats.totalSize).toBeGreaterThan(0);
      expect(typeof stats.lastUpdated).toBe("number");
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJnZXRJdGVtIiwiamVzdCIsImZuIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJnZXRBbGxLZXlzIiwibXVsdGlSZW1vdmUiLCJTdHJlYWtTZXJ2aWNlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwicmVjb3JkQ29tcGxldGlvbiIsImNhbGN1bGF0ZVN0cmVhayIsInVzZVN0cmVha0ZyZWV6ZSIsImdldEhhYml0Q2FsZW5kYXIiLCJnZXRIYWJpdFN0cmVhayIsInN5bmNTZXJ2aWNlIiwicXVldWVPcGVyYXRpb24iLCJpc09ubGluZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiZGVmYXVsdCIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9hc3luY1N0b3JhZ2UiLCJfZmlyZXN0b3JlIiwiX29mZmxpbmVTdHJlYWtTZXJ2aWNlIiwiX3JlcXVpcmUyIiwiX3JlcXVpcmUiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiQXN5bmNTdG9yYWdlIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJ1bmRlZmluZWQiLCJpdCIsImNvbXBsZXRpb24iLCJoYWJpdElkIiwidXNlcklkIiwiY29tcGxldGVkQXQiLCJUaW1lc3RhbXAiLCJub3ciLCJ0aW1lem9uZSIsImRpZmZpY3VsdHkiLCJtb2NrUmVzdWx0IiwiT2JqZWN0IiwiYXNzaWduIiwiaWQiLCJtb2NrU3RyZWFrU2VydmljZSIsIm9mZmxpbmVTdHJlYWtTZXJ2aWNlIiwic3RyZWFrU2VydmljZSIsInJlc3VsdCIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwidG9FcXVhbCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJ0b01hdGNoIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsIm1vY2tTdHJlYWsiLCJjdXJyZW50U3RyZWFrIiwiYmVzdFN0cmVhayIsImxhc3RDb21wbGV0aW9uRGF0ZSIsInN0cmVha1N0YXJ0RGF0ZSIsImZyZWV6ZXNBdmFpbGFibGUiLCJmcmVlemVzVXNlZCIsIm1pbGVzdG9uZXMiLCJjYWNoZWRTdHJlYWsiLCJKU09OIiwic3RyaW5naWZ5IiwibW9ja0tleXMiLCJjbGVhclVzZXJDYWNoZSIsIm1vY2tEYXRhIiwiZGF0YSIsInRpbWVzdGFtcCIsIkRhdGUiLCJzdGF0cyIsImdldENhY2hlU3RhdHMiLCJ0b3RhbEl0ZW1zIiwidG9CZSIsInRvdGFsU2l6ZSIsInRvQmVHcmVhdGVyVGhhbiIsImxhc3RVcGRhdGVkIl0sInNvdXJjZXMiOlsib2ZmbGluZVN0cmVha1NlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE9mZmxpbmUgU3RyZWFrIFNlcnZpY2UgVGVzdHNcbiAqXG4gKiBUZXN0cyBmb3Igb2ZmbGluZS1hd2FyZSBzdHJlYWsgb3BlcmF0aW9uc1xuICogUmVxdWlyZW1lbnRzOiAxMC4zLCAxMC40XG4gKi9cblxuaW1wb3J0IEFzeW5jU3RvcmFnZSBmcm9tIFwiQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2VcIjtcbmltcG9ydCB7IFRpbWVzdGFtcCB9IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7IG9mZmxpbmVTdHJlYWtTZXJ2aWNlIH0gZnJvbSBcIi4uL3NlcnZpY2VzL2ZpcmViYXNlL29mZmxpbmVTdHJlYWtTZXJ2aWNlXCI7XG5pbXBvcnQgeyBIYWJpdENvbXBsZXRpb24sIEhhYml0U3RyZWFrIH0gZnJvbSBcIi4uL3R5cGVzL2hhYml0LXN0cmVha3NcIjtcblxuLy8gTW9jayBBc3luY1N0b3JhZ2Vcbmplc3QubW9jayhcIkByZWFjdC1uYXRpdmUtYXN5bmMtc3RvcmFnZS9hc3luYy1zdG9yYWdlXCIsICgpID0+ICh7XG4gICAgZ2V0SXRlbTogamVzdC5mbigpLFxuICAgIHNldEl0ZW06IGplc3QuZm4oKSxcbiAgICByZW1vdmVJdGVtOiBqZXN0LmZuKCksXG4gICAgZ2V0QWxsS2V5czogamVzdC5mbigpLFxuICAgIG11bHRpUmVtb3ZlOiBqZXN0LmZuKCksXG59KSk7XG5cbi8vIE1vY2sgdGhlIHVuZGVybHlpbmcgU3RyZWFrU2VydmljZVxuamVzdC5tb2NrKFwiLi4vc2VydmljZXMvZmlyZWJhc2Uvc3RyZWFrU2VydmljZVwiLCAoKSA9PiAoe1xuICAgIFN0cmVha1NlcnZpY2U6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcbiAgICAgICAgcmVjb3JkQ29tcGxldGlvbjogamVzdC5mbigpLFxuICAgICAgICBjYWxjdWxhdGVTdHJlYWs6IGplc3QuZm4oKSxcbiAgICAgICAgdXNlU3RyZWFrRnJlZXplOiBqZXN0LmZuKCksXG4gICAgICAgIGdldEhhYml0Q2FsZW5kYXI6IGplc3QuZm4oKSxcbiAgICAgICAgZ2V0SGFiaXRTdHJlYWs6IGplc3QuZm4oKSxcbiAgICB9KSksXG59KSk7XG5cbi8vIE1vY2sgc3luYyBzZXJ2aWNlXG5qZXN0Lm1vY2soXCIuLi9zZXJ2aWNlcy9maXJlYmFzZS9zeW5jU2VydmljZVwiLCAoKSA9PiAoe1xuICAgIHN5bmNTZXJ2aWNlOiB7XG4gICAgICAgIHF1ZXVlT3BlcmF0aW9uOiBqZXN0LmZuKCksXG4gICAgfSxcbn0pKTtcblxuLy8gTW9jayBlcnJvciBoYW5kbGluZyB1dGlsaXRpZXNcbmplc3QubW9jayhcIi4uL3V0aWxzL2Vycm9ySGFuZGxpbmdcIiwgKCkgPT4gKHtcbiAgICBpc09ubGluZTogamVzdC5mbigpLFxufSkpO1xuXG5jb25zdCB7IGlzT25saW5lIH0gPSByZXF1aXJlKFwiLi4vdXRpbHMvZXJyb3JIYW5kbGluZ1wiKTtcblxuZGVzY3JpYmUoXCJPZmZsaW5lU3RyZWFrU2VydmljZVwiLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgICAgICAoQXN5bmNTdG9yYWdlLmdldEl0ZW0gYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICAgICAgKEFzeW5jU3RvcmFnZS5zZXRJdGVtIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcbiAgICAgICAgKEFzeW5jU3RvcmFnZS5nZXRBbGxLZXlzIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuICAgICAgICAoQXN5bmNTdG9yYWdlLm11bHRpUmVtb3ZlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiQ29tcGxldGlvbiBSZWNvcmRpbmdcIiwgKCkgPT4ge1xuICAgICAgICBpdChcInNob3VsZCByZWNvcmQgY29tcGxldGlvbiBvbmxpbmUgd2hlbiBjb25uZWN0ZWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaXNPbmxpbmUubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb24gPSB7XG4gICAgICAgICAgICAgICAgaGFiaXRJZDogXCJoYWJpdDFcIixcbiAgICAgICAgICAgICAgICB1c2VySWQ6IFwidXNlcjFcIixcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWRBdDogVGltZXN0YW1wLm5vdygpLFxuICAgICAgICAgICAgICAgIHRpbWV6b25lOiBcIlVUQ1wiLFxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IFwibWVkaXVtXCIgYXMgY29uc3QsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBtb2NrUmVzdWx0OiBIYWJpdENvbXBsZXRpb24gPSB7XG4gICAgICAgICAgICAgICAgLi4uY29tcGxldGlvbixcbiAgICAgICAgICAgICAgICBpZDogXCJjb21wbGV0aW9uMVwiLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gTW9jayBzdWNjZXNzZnVsIG9ubGluZSBvcGVyYXRpb25cbiAgICAgICAgICAgIGNvbnN0IG1vY2tTdHJlYWtTZXJ2aWNlID0gKG9mZmxpbmVTdHJlYWtTZXJ2aWNlIGFzIGFueSkuc3RyZWFrU2VydmljZTtcbiAgICAgICAgICAgIG1vY2tTdHJlYWtTZXJ2aWNlLnJlY29yZENvbXBsZXRpb24ubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Jlc3VsdCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9mZmxpbmVTdHJlYWtTZXJ2aWNlLnJlY29yZENvbXBsZXRpb24oY29tcGxldGlvbik7XG5cbiAgICAgICAgICAgIGV4cGVjdChtb2NrU3RyZWFrU2VydmljZS5yZWNvcmRDb21wbGV0aW9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1Jlc3VsdCk7XG4gICAgICAgICAgICBleHBlY3QoQXN5bmNTdG9yYWdlLnNldEl0ZW0pLnRvSGF2ZUJlZW5DYWxsZWQoKTsgLy8gU2hvdWxkIGNhY2hlIHRoZSByZXN1bHRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgcmVjb3JkIGNvbXBsZXRpb24gb2ZmbGluZSB3aGVuIGRpc2Nvbm5lY3RlZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpc09ubGluZS5tb2NrUmVzb2x2ZWRWYWx1ZShmYWxzZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb24gPSB7XG4gICAgICAgICAgICAgICAgaGFiaXRJZDogXCJoYWJpdDFcIixcbiAgICAgICAgICAgICAgICB1c2VySWQ6IFwidXNlcjFcIixcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWRBdDogVGltZXN0YW1wLm5vdygpLFxuICAgICAgICAgICAgICAgIHRpbWV6b25lOiBcIlVUQ1wiLFxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IFwibWVkaXVtXCIgYXMgY29uc3QsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvZmZsaW5lU3RyZWFrU2VydmljZS5yZWNvcmRDb21wbGV0aW9uKGNvbXBsZXRpb24pO1xuXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlkKS50b01hdGNoKC9eb2ZmbGluZV8vKTtcbiAgICAgICAgICAgIGV4cGVjdChBc3luY1N0b3JhZ2Uuc2V0SXRlbSkudG9IYXZlQmVlbkNhbGxlZCgpOyAvLyBTaG91bGQgY2FjaGUgb2ZmbGluZSBjb21wbGV0aW9uXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGZhbGxiYWNrIHRvIG9mZmxpbmUgbW9kZSB3aGVuIG9ubGluZSBvcGVyYXRpb24gZmFpbHNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaXNPbmxpbmUubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb24gPSB7XG4gICAgICAgICAgICAgICAgaGFiaXRJZDogXCJoYWJpdDFcIixcbiAgICAgICAgICAgICAgICB1c2VySWQ6IFwidXNlcjFcIixcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWRBdDogVGltZXN0YW1wLm5vdygpLFxuICAgICAgICAgICAgICAgIHRpbWV6b25lOiBcIlVUQ1wiLFxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IFwibWVkaXVtXCIgYXMgY29uc3QsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBNb2NrIGZhaWxlZCBvbmxpbmUgb3BlcmF0aW9uXG4gICAgICAgICAgICBjb25zdCBtb2NrU3RyZWFrU2VydmljZSA9IChvZmZsaW5lU3RyZWFrU2VydmljZSBhcyBhbnkpLnN0cmVha1NlcnZpY2U7XG4gICAgICAgICAgICBtb2NrU3RyZWFrU2VydmljZS5yZWNvcmRDb21wbGV0aW9uLm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICAgICAgICAgIG5ldyBFcnJvcihcIk5ldHdvcmsgZXJyb3JcIiksXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvZmZsaW5lU3RyZWFrU2VydmljZS5yZWNvcmRDb21wbGV0aW9uKGNvbXBsZXRpb24pO1xuXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlkKS50b01hdGNoKC9eb2ZmbGluZV8vKTtcbiAgICAgICAgICAgIGV4cGVjdChBc3luY1N0b3JhZ2Uuc2V0SXRlbSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiU3RyZWFrIENhbGN1bGF0aW9uXCIsICgpID0+IHtcbiAgICAgICAgaXQoXCJzaG91bGQgY2FsY3VsYXRlIHN0cmVhayBvbmxpbmUgd2hlbiBjb25uZWN0ZWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaXNPbmxpbmUubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1vY2tTdHJlYWs6IEhhYml0U3RyZWFrID0ge1xuICAgICAgICAgICAgICAgIGhhYml0SWQ6IFwiaGFiaXQxXCIsXG4gICAgICAgICAgICAgICAgdXNlcklkOiBcInVzZXIxXCIsXG4gICAgICAgICAgICAgICAgY3VycmVudFN0cmVhazogNSxcbiAgICAgICAgICAgICAgICBiZXN0U3RyZWFrOiAxMCxcbiAgICAgICAgICAgICAgICBsYXN0Q29tcGxldGlvbkRhdGU6IFwiMjAyNC0wMS0xNVwiLFxuICAgICAgICAgICAgICAgIHN0cmVha1N0YXJ0RGF0ZTogXCIyMDI0LTAxLTExXCIsXG4gICAgICAgICAgICAgICAgZnJlZXplc0F2YWlsYWJsZTogMSxcbiAgICAgICAgICAgICAgICBmcmVlemVzVXNlZDogMCxcbiAgICAgICAgICAgICAgICBtaWxlc3RvbmVzOiBbXSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IG1vY2tTdHJlYWtTZXJ2aWNlID0gKG9mZmxpbmVTdHJlYWtTZXJ2aWNlIGFzIGFueSkuc3RyZWFrU2VydmljZTtcbiAgICAgICAgICAgIG1vY2tTdHJlYWtTZXJ2aWNlLmNhbGN1bGF0ZVN0cmVhay5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU3RyZWFrKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb2ZmbGluZVN0cmVha1NlcnZpY2UuY2FsY3VsYXRlU3RyZWFrKFxuICAgICAgICAgICAgICAgIFwiaGFiaXQxXCIsXG4gICAgICAgICAgICAgICAgXCJ1c2VyMVwiLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZXhwZWN0KG1vY2tTdHJlYWtTZXJ2aWNlLmNhbGN1bGF0ZVN0cmVhaykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgICAgICAgXCJoYWJpdDFcIixcbiAgICAgICAgICAgICAgICBcInVzZXIxXCIsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrU3RyZWFrKTtcbiAgICAgICAgICAgIGV4cGVjdChBc3luY1N0b3JhZ2Uuc2V0SXRlbSkudG9IYXZlQmVlbkNhbGxlZCgpOyAvLyBTaG91bGQgY2FjaGUgdGhlIHJlc3VsdFxuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCByZXR1cm4gY2FjaGVkIHN0cmVhayB3aGVuIG9mZmxpbmVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaXNPbmxpbmUubW9ja1Jlc29sdmVkVmFsdWUoZmFsc2UpO1xuXG4gICAgICAgICAgICBjb25zdCBjYWNoZWRTdHJlYWsgPSB7XG4gICAgICAgICAgICAgICAgaGFiaXRJZDogXCJoYWJpdDFcIixcbiAgICAgICAgICAgICAgICB1c2VySWQ6IFwidXNlcjFcIixcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RyZWFrOiAzLFxuICAgICAgICAgICAgICAgIGJlc3RTdHJlYWs6IDgsXG4gICAgICAgICAgICAgICAgbGFzdENvbXBsZXRpb25EYXRlOiBcIjIwMjQtMDEtMTNcIixcbiAgICAgICAgICAgICAgICBzdHJlYWtTdGFydERhdGU6IFwiMjAyNC0wMS0xMVwiLFxuICAgICAgICAgICAgICAgIGZyZWV6ZXNBdmFpbGFibGU6IDAsXG4gICAgICAgICAgICAgICAgZnJlZXplc1VzZWQ6IDEsXG4gICAgICAgICAgICAgICAgbWlsZXN0b25lczogW10sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAoQXN5bmNTdG9yYWdlLmdldEl0ZW0gYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShjYWNoZWRTdHJlYWspLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb2ZmbGluZVN0cmVha1NlcnZpY2UuY2FsY3VsYXRlU3RyZWFrKFxuICAgICAgICAgICAgICAgIFwiaGFiaXQxXCIsXG4gICAgICAgICAgICAgICAgXCJ1c2VyMVwiLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChjYWNoZWRTdHJlYWspO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCByZXR1cm4gZGVmYXVsdCBzdHJlYWsgd2hlbiBubyBjYWNoZSBhdmFpbGFibGVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaXNPbmxpbmUubW9ja1Jlc29sdmVkVmFsdWUoZmFsc2UpO1xuICAgICAgICAgICAgKEFzeW5jU3RvcmFnZS5nZXRJdGVtIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9mZmxpbmVTdHJlYWtTZXJ2aWNlLmNhbGN1bGF0ZVN0cmVhayhcbiAgICAgICAgICAgICAgICBcImhhYml0MVwiLFxuICAgICAgICAgICAgICAgIFwidXNlcjFcIixcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICAgICAgICAgIGhhYml0SWQ6IFwiaGFiaXQxXCIsXG4gICAgICAgICAgICAgICAgdXNlcklkOiBcInVzZXIxXCIsXG4gICAgICAgICAgICAgICAgY3VycmVudFN0cmVhazogMCxcbiAgICAgICAgICAgICAgICBiZXN0U3RyZWFrOiAwLFxuICAgICAgICAgICAgICAgIGxhc3RDb21wbGV0aW9uRGF0ZTogXCJcIixcbiAgICAgICAgICAgICAgICBzdHJlYWtTdGFydERhdGU6IFwiXCIsXG4gICAgICAgICAgICAgICAgZnJlZXplc0F2YWlsYWJsZTogMCxcbiAgICAgICAgICAgICAgICBmcmVlemVzVXNlZDogMCxcbiAgICAgICAgICAgICAgICBtaWxlc3RvbmVzOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiQ2FjaGUgTWFuYWdlbWVudFwiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwic2hvdWxkIGNsZWFyIHVzZXIgY2FjaGVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9ja0tleXMgPSBbXG4gICAgICAgICAgICAgICAgXCJAb2ZmbGluZV9zdHJlYWtfc3RyZWFrX3VzZXIxX2hhYml0MVwiLFxuICAgICAgICAgICAgICAgIFwiQG9mZmxpbmVfc3RyZWFrX2NvbXBsZXRpb25fY29tcDFcIixcbiAgICAgICAgICAgICAgICBcIkBvZmZsaW5lX3N0cmVha19jYWxlbmRhcl91c2VyMV9oYWJpdDFcIixcbiAgICAgICAgICAgICAgICBcIkBvdGhlcl9jYWNoZV9rZXlcIixcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIChBc3luY1N0b3JhZ2UuZ2V0QWxsS2V5cyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tLZXlzKTtcblxuICAgICAgICAgICAgYXdhaXQgb2ZmbGluZVN0cmVha1NlcnZpY2UuY2xlYXJVc2VyQ2FjaGUoXCJ1c2VyMVwiKTtcblxuICAgICAgICAgICAgZXhwZWN0KEFzeW5jU3RvcmFnZS5tdWx0aVJlbW92ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoW1xuICAgICAgICAgICAgICAgIFwiQG9mZmxpbmVfc3RyZWFrX3N0cmVha191c2VyMV9oYWJpdDFcIixcbiAgICAgICAgICAgICAgICBcIkBvZmZsaW5lX3N0cmVha19jYWxlbmRhcl91c2VyMV9oYWJpdDFcIixcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBnZXQgY2FjaGUgc3RhdGlzdGljc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2NrS2V5cyA9IFtcbiAgICAgICAgICAgICAgICBcIkBvZmZsaW5lX3N0cmVha19zdHJlYWtfdXNlcjFfaGFiaXQxXCIsXG4gICAgICAgICAgICAgICAgXCJAb2ZmbGluZV9zdHJlYWtfY29tcGxldGlvbl9jb21wMVwiLFxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgY29uc3QgbW9ja0RhdGEgPSBKU09OLnN0cmluZ2lmeSh7IGRhdGE6IFwidGVzdFwiLCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSk7XG5cbiAgICAgICAgICAgIChBc3luY1N0b3JhZ2UuZ2V0QWxsS2V5cyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tLZXlzKTtcbiAgICAgICAgICAgIChBc3luY1N0b3JhZ2UuZ2V0SXRlbSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEYXRhKTtcblxuICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBvZmZsaW5lU3RyZWFrU2VydmljZS5nZXRDYWNoZVN0YXRzKFwidXNlcjFcIik7XG5cbiAgICAgICAgICAgIGV4cGVjdChzdGF0cy50b3RhbEl0ZW1zKS50b0JlKDEpOyAvLyBPbmx5IG9uZSBrZXkgbWF0Y2hlcyB1c2VyMVxuICAgICAgICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsU2l6ZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0cy5sYXN0VXBkYXRlZCku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