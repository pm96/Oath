{"version":3,"names":["_getJestObj","mock","db","APP_ID","collection","jest","fn","doc","getDoc","getDocs","query","where","orderBy","runTransaction","serverTimestamp","seconds","Date","now","Timestamp","toMillis","toDate","fromDate","date","getTime","getHabitCompletionsCollection","path","getHabitStreaksCollection","getHabitAnalyticsCollection","getUserFriendlyErrorMessage","error","message","retryWithBackoff","isOnline","streakValidationService","validateStreakData","validateCompletion","_interopRequireDefault","require","default","_asyncToGenerator2","_firestore","_analyticsService","_completionService","_streakService","_dateUtils","_require3","describe","streakService","completionService","analyticsService","mockTimezone","getUserTimezone","beforeEach","StreakService","CompletionService","AnalyticsService","clearAllMocks","_require","mockImplementation","_ref","callback","mockTransaction","get","mockResolvedValue","exists","data","set","update","_x","_x2","apply","arguments","docs","it","testId","Math","random","mockUserId","mockHabitId","firstCompletion","habitId","userId","completedAt","timezone","difficulty","expect","recordCompletion","resolves","not","toThrow","initialStreak","calculateStreak","toBeDefined","toBe","analytics","calculateHabitAnalytics","i","setDate","getDate","setHours","completion","streak","currentStreak","toBeGreaterThanOrEqual","bestStreak","promises","results","Promise","allSettled","successful","filter","r","status","length","toBeGreaterThan","userIds","Array","from","_","map","rejects","getCompletionHistory","futureCompletion","startTime","all","duration","toBeLessThan","push","_require2","mockRejectedValueOnce","Error","getHabitStreak","history","completions","toEqual","habitIds","consistencyScore","getOverallConsistencyScore","difficulties","timezones"],"sources":["habitStreaksBasicIntegration.test.ts"],"sourcesContent":["/**\n * Basic Integration Tests for Habit Tracking & Streaks System\n *\n * Tests core system integration for task 18: Final integration and testing\n */\n\nimport { Timestamp } from \"firebase/firestore\";\nimport { AnalyticsService } from \"../services/firebase/analyticsService\";\nimport { CompletionService } from \"../services/firebase/completionService\";\nimport { StreakService } from \"../services/firebase/streakService\";\nimport { HabitCompletion } from \"../types/habit-streaks\";\nimport { getUserTimezone } from \"../utils/dateUtils\";\n\n// Mock Firebase\njest.mock(\"../firebaseConfig\", () => ({\n    db: {},\n    APP_ID: \"test-app\",\n}));\n\njest.mock(\"firebase/firestore\", () => ({\n    collection: jest.fn(),\n    doc: jest.fn(),\n    getDoc: jest.fn(),\n    getDocs: jest.fn(),\n    query: jest.fn(),\n    where: jest.fn(),\n    orderBy: jest.fn(),\n    runTransaction: jest.fn(),\n    serverTimestamp: jest.fn(() => ({ seconds: Date.now() / 1000 })),\n    Timestamp: {\n        now: jest.fn(() => ({\n            seconds: Date.now() / 1000,\n            toMillis: () => Date.now(),\n            toDate: () => new Date(),\n        })),\n        fromDate: jest.fn((date: Date) => ({\n            seconds: date.getTime() / 1000,\n            toMillis: () => date.getTime(),\n            toDate: () => date,\n        })),\n    },\n}));\n\njest.mock(\"../services/firebase/collections\", () => ({\n    getHabitCompletionsCollection: jest.fn(() => ({ path: \"completions\" })),\n    getHabitStreaksCollection: jest.fn(() => ({ path: \"streaks\" })),\n    getHabitAnalyticsCollection: jest.fn(() => ({ path: \"analytics\" })),\n}));\n\njest.mock(\"../utils/errorHandling\", () => ({\n    getUserFriendlyErrorMessage: jest.fn(\n        (error) => error.message || \"Unknown error\",\n    ),\n    retryWithBackoff: jest.fn((fn) => fn()),\n    isOnline: jest.fn(() => true),\n}));\n\n// Mock missing services\njest.mock(\"../services/firebase/streakValidationService\", () => ({\n    streakValidationService: {\n        validateStreakData: jest.fn(() => true),\n        validateCompletion: jest.fn(() => true),\n    },\n}));\n\ndescribe(\"Habit Tracking System - Final Integration Tests\", () => {\n    let streakService: StreakService;\n    let completionService: CompletionService;\n    let analyticsService: AnalyticsService;\n\n    const mockTimezone = getUserTimezone();\n\n    beforeEach(() => {\n        streakService = new StreakService();\n        completionService = new CompletionService();\n        analyticsService = new AnalyticsService();\n\n        jest.clearAllMocks();\n\n        // Mock successful Firebase operations\n        const { runTransaction, getDocs, getDoc } = require(\"firebase/firestore\");\n        runTransaction.mockImplementation(async (db, callback) => {\n            const mockTransaction = {\n                get: jest.fn().mockResolvedValue({\n                    exists: () => false,\n                    data: () => null,\n                }),\n                set: jest.fn(),\n                update: jest.fn(),\n            };\n            return callback(mockTransaction);\n        });\n\n        getDocs.mockResolvedValue({ docs: [] });\n        getDoc.mockResolvedValue({ exists: () => false, data: () => null });\n    });\n\n    describe(\"Complete User Flow: Habit Creation to Milestone Achievement\", () => {\n        it(\"should handle complete user journey from first completion to streak tracking\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const mockUserId = `user-${testId}`;\n            const mockHabitId = `habit-${testId}`;\n\n            // Step 1: Record first completion\n            const firstCompletion: Omit<HabitCompletion, \"id\"> = {\n                habitId: mockHabitId,\n                userId: mockUserId,\n                completedAt: Timestamp.now(),\n                timezone: mockTimezone,\n                difficulty: \"medium\",\n            };\n\n            await expect(\n                completionService.recordCompletion(firstCompletion),\n            ).resolves.not.toThrow();\n\n            // Step 2: Calculate initial streak\n            const initialStreak = await streakService.calculateStreak(\n                mockHabitId,\n                mockUserId,\n            );\n            expect(initialStreak).toBeDefined();\n            expect(initialStreak.habitId).toBe(mockHabitId);\n            expect(initialStreak.userId).toBe(mockUserId);\n\n            // Step 3: Verify analytics calculation\n            const analytics = await analyticsService.calculateHabitAnalytics(\n                mockHabitId,\n                mockUserId,\n            );\n            expect(analytics).toBeDefined();\n            expect(analytics.habitId).toBe(mockHabitId);\n            expect(analytics.userId).toBe(mockUserId);\n        });\n\n        it(\"should handle multiple consecutive completions\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const mockUserId = `user-${testId}`;\n            const mockHabitId = `habit-${testId}`;\n\n            // Create 5 consecutive completions\n            for (let i = 0; i < 5; i++) {\n                const date = new Date();\n                date.setDate(date.getDate() - (4 - i));\n                date.setHours(12, 0, 0, 0);\n\n                const completion: Omit<HabitCompletion, \"id\"> = {\n                    habitId: mockHabitId,\n                    userId: mockUserId,\n                    completedAt: Timestamp.fromDate(date),\n                    timezone: mockTimezone,\n                    difficulty: \"medium\",\n                };\n\n                await expect(\n                    completionService.recordCompletion(completion),\n                ).resolves.not.toThrow();\n            }\n\n            // Verify streak calculation\n            const streak = await streakService.calculateStreak(\n                mockHabitId,\n                mockUserId,\n            );\n            expect(streak.currentStreak).toBeGreaterThanOrEqual(0);\n            expect(streak.bestStreak).toBeGreaterThanOrEqual(streak.currentStreak);\n        });\n    });\n\n    describe(\"Cross-Device Synchronization\", () => {\n        it(\"should maintain data consistency across multiple operations\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const mockUserId = `user-${testId}`;\n            const mockHabitId = `habit-${testId}`;\n\n            const completion: Omit<HabitCompletion, \"id\"> = {\n                habitId: mockHabitId,\n                userId: mockUserId,\n                completedAt: Timestamp.now(),\n                timezone: mockTimezone,\n                difficulty: \"hard\",\n            };\n\n            // Simulate concurrent operations\n            const promises = [\n                completionService.recordCompletion(completion),\n                streakService.calculateStreak(mockHabitId, mockUserId),\n                analyticsService.calculateHabitAnalytics(mockHabitId, mockUserId),\n            ];\n\n            const results = await Promise.allSettled(promises);\n\n            // At least some operations should succeed\n            const successful = results.filter((r) => r.status === \"fulfilled\");\n            expect(successful.length).toBeGreaterThan(0);\n        });\n\n        it(\"should handle multiple users concurrently\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const mockHabitId = `habit-${testId}`;\n            const userIds = Array.from(\n                { length: 5 },\n                (_, i) => `user-${testId}-${i}`,\n            );\n\n            const promises = userIds.map((userId) =>\n                streakService.calculateStreak(mockHabitId, userId),\n            );\n\n            const results = await Promise.allSettled(promises);\n            const successful = results.filter((r) => r.status === \"fulfilled\");\n\n            // Most operations should succeed\n            expect(successful.length).toBeGreaterThan(0);\n        });\n    });\n\n    describe(\"Security Measures and Access Controls\", () => {\n        it(\"should validate input parameters\", async () => {\n            // Test empty habitId\n            await expect(\n                streakService.calculateStreak(\"\", \"test-user\"),\n            ).rejects.toThrow(\"Habit ID and User ID are required\");\n\n            await expect(\n                completionService.getCompletionHistory(\"\", \"test-user\"),\n            ).rejects.toThrow(\"Habit ID and User ID are required\");\n\n            await expect(\n                analyticsService.calculateHabitAnalytics(\"\", \"test-user\"),\n            ).rejects.toThrow(\"Habit ID and User ID are required\");\n\n            // Test empty userId\n            await expect(\n                streakService.calculateStreak(\"test-habit\", \"\"),\n            ).rejects.toThrow(\"Habit ID and User ID are required\");\n        });\n\n        it(\"should handle invalid completion timestamps\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const mockUserId = `user-${testId}`;\n            const mockHabitId = `habit-${testId}`;\n\n            const futureCompletion: Omit<HabitCompletion, \"id\"> = {\n                habitId: mockHabitId,\n                userId: mockUserId,\n                completedAt: Timestamp.fromDate(new Date(Date.now() + 86400000)), // Tomorrow\n                timezone: mockTimezone,\n                difficulty: \"easy\",\n            };\n\n            await expect(\n                completionService.recordCompletion(futureCompletion),\n            ).rejects.toThrow(\"Cannot record completions for future dates\");\n        });\n    });\n\n    describe(\"Performance and Load Testing\", () => {\n        it(\"should complete operations within reasonable time\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const mockUserId = `user-${testId}`;\n            const mockHabitId = `habit-${testId}`;\n\n            const startTime = Date.now();\n\n            await Promise.all([\n                streakService.calculateStreak(mockHabitId, mockUserId),\n                analyticsService.calculateHabitAnalytics(mockHabitId, mockUserId),\n                completionService.getCompletionHistory(mockHabitId, mockUserId),\n            ]);\n\n            const duration = Date.now() - startTime;\n\n            // Should complete within 5 seconds\n            expect(duration).toBeLessThan(5000);\n        });\n\n        it(\"should handle concurrent streak calculations\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const promises = [];\n\n            for (let i = 0; i < 10; i++) {\n                promises.push(\n                    streakService.calculateStreak(\n                        `habit-${testId}-${i}`,\n                        `user-${testId}-${i}`,\n                    ),\n                );\n            }\n\n            const results = await Promise.allSettled(promises);\n            const successful = results.filter((r) => r.status === \"fulfilled\");\n\n            // Most operations should succeed\n            expect(successful.length).toBeGreaterThan(5);\n        });\n    });\n\n    describe(\"Error Handling and Recovery\", () => {\n        it(\"should handle Firebase transaction failures gracefully\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const mockUserId = `user-${testId}`;\n            const mockHabitId = `habit-${testId}`;\n\n            // Mock transaction failure\n            const { runTransaction } = require(\"firebase/firestore\");\n            runTransaction.mockRejectedValueOnce(new Error(\"Transaction failed\"));\n\n            const completion: Omit<HabitCompletion, \"id\"> = {\n                habitId: mockHabitId,\n                userId: mockUserId,\n                completedAt: Timestamp.now(),\n                timezone: mockTimezone,\n                difficulty: \"medium\",\n            };\n\n            await expect(\n                completionService.recordCompletion(completion),\n            ).rejects.toThrow(\"Transaction failed\");\n        });\n\n        it(\"should handle missing data gracefully\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const mockUserId = `user-${testId}`;\n            const mockHabitId = `habit-${testId}`;\n\n            // Should handle missing streak data\n            const streak = await streakService.getHabitStreak(\n                mockHabitId,\n                mockUserId,\n            );\n            expect(streak).toBeDefined();\n\n            // Should handle empty completion history\n            const history = await completionService.getCompletionHistory(\n                mockHabitId,\n                mockUserId,\n            );\n            expect(history).toBeDefined();\n            expect(history.completions).toEqual([]);\n        });\n    });\n\n    describe(\"Multi-Habit Analytics\", () => {\n        it(\"should calculate cross-habit consistency scores\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const mockUserId = `user-${testId}`;\n            const habitIds = [\"habit-1\", \"habit-2\", \"habit-3\"];\n\n            // Create completions for multiple habits\n            for (let i = 0; i < habitIds.length; i++) {\n                const completion: Omit<HabitCompletion, \"id\"> = {\n                    habitId: `${testId}-${habitIds[i]}`,\n                    userId: mockUserId,\n                    completedAt: Timestamp.now(),\n                    timezone: mockTimezone,\n                    difficulty: \"medium\",\n                };\n\n                await expect(\n                    completionService.recordCompletion(completion),\n                ).resolves.not.toThrow();\n            }\n\n            // Calculate overall consistency\n            const consistencyScore =\n                await analyticsService.getOverallConsistencyScore(mockUserId);\n            expect(typeof consistencyScore).toBe(\"number\");\n            expect(consistencyScore).toBeGreaterThanOrEqual(0);\n        });\n\n        it(\"should handle different difficulty levels correctly\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const mockUserId = `user-${testId}`;\n            const difficulties = [\"easy\", \"medium\", \"hard\"];\n\n            for (let i = 0; i < difficulties.length; i++) {\n                const completion: Omit<HabitCompletion, \"id\"> = {\n                    habitId: `habit-${testId}-${difficulties[i]}`,\n                    userId: mockUserId,\n                    completedAt: Timestamp.now(),\n                    timezone: mockTimezone,\n                    difficulty: difficulties[i] as \"easy\" | \"medium\" | \"hard\",\n                };\n\n                await expect(\n                    completionService.recordCompletion(completion),\n                ).resolves.not.toThrow();\n\n                const analytics = await analyticsService.calculateHabitAnalytics(\n                    `habit-${testId}-${difficulties[i]}`,\n                    mockUserId,\n                );\n                expect(analytics).toBeDefined();\n            }\n        });\n    });\n\n    describe(\"Timezone Handling\", () => {\n        it(\"should handle different timezones correctly\", async () => {\n            const testId = `test-${Date.now()}-${Math.random()}`;\n            const mockUserId = `user-${testId}`;\n            const timezones = [\"America/New_York\", \"Europe/London\", \"Asia/Tokyo\"];\n\n            for (let i = 0; i < timezones.length; i++) {\n                const completion: Omit<HabitCompletion, \"id\"> = {\n                    habitId: `habit-${testId}-${i}`,\n                    userId: mockUserId,\n                    completedAt: Timestamp.now(),\n                    timezone: timezones[i],\n                    difficulty: \"medium\",\n                };\n\n                await expect(\n                    completionService.recordCompletion(completion),\n                ).resolves.not.toThrow();\n            }\n\n            // Verify streak calculation handles timezone differences\n            const streak = await streakService.calculateStreak(\n                `habit-${testId}-0`,\n                mockUserId,\n            );\n            expect(streak).toBeDefined();\n        });\n    });\n});\n"],"mappings":"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","ignoreList":[]}