{"version":3,"names":["_getJestObj","mock","addDoc","jest","fn","getDocs","query","where","orderBy","limit","onSnapshot","serverTimestamp","seconds","Date","now","Timestamp","fromDate","date","toDate","getTime","nanoseconds","getNudgesCollection","path","getUserFriendlyErrorMessage","error","message","retryWithBackoff","_ref","_asyncToGenerator2","default","_x","apply","arguments","_interopRequireWildcard","require","_interopRequireDefault","fc","_nudgeService","_require","describe","beforeEach","clearAllMocks","it","mockAddDoc","mockResolvedValue","id","mockGetDocs","docs","assert","asyncProperty","record","senderId","string","minLength","maxLength","senderName","receiverId","goalId","goalDescription","_ref3","input","pre","sendNudge","expect","toHaveBeenCalledWith","anything","objectContaining","timestamp","cooldownUntil","createdAt","callArgs","calls","length","nudgeData","toHaveProperty","toBe","_x2","numRuns","option","nil","_ref5","hasAllFields","rejects","toThrow","_x3","userId","_ref8","_ref7","_x4","minutesAgo","integer","min","max","_ref1","_ref0","nudgeTime","cooldownEnd","data","cooldowns","getNudgeCooldowns","canNudge","canSendNudge","remainingMinutes","getRemainingCooldownMinutes","has","toBeGreaterThan","toBeLessThanOrEqual","_x5","hoursAgo","_ref12","_ref11","_x6","_ref14","nudgeInput","not","toHaveBeenCalled","_x7","minutesRemaining","_ref16","fail","toMatch","match","errorMinutes","parseInt","Math","abs","_x8"],"sources":["nudgeService.property.test.ts"],"sourcesContent":["/**\n * Property-Based Tests for Nudge Service\n * Feature: social-nudging-feed\n */\n\nimport * as fc from \"fast-check\";\nimport {\n    canSendNudge,\n    getNudgeCooldowns,\n    getRemainingCooldownMinutes,\n    sendNudge,\n    SendNudgeInput,\n} from \"../services/firebase/nudgeService\";\n\n// Mock Firebase functions for testing\njest.mock(\"firebase/firestore\", () => ({\n    addDoc: jest.fn(),\n    getDocs: jest.fn(),\n    query: jest.fn(),\n    where: jest.fn(),\n    orderBy: jest.fn(),\n    limit: jest.fn(),\n    onSnapshot: jest.fn(),\n    serverTimestamp: jest.fn(() => ({ seconds: Date.now() / 1000 })),\n    Timestamp: {\n        fromDate: jest.fn((date: Date) => ({\n            toDate: () => date,\n            seconds: date.getTime() / 1000,\n            nanoseconds: 0,\n        })),\n    },\n}));\n\njest.mock(\"../services/firebase/collections\", () => ({\n    getNudgesCollection: jest.fn(() => ({ path: \"test-collection\" })),\n}));\n\njest.mock(\"@/utils/errorHandling\", () => ({\n    getUserFriendlyErrorMessage: jest.fn(\n        (error: any) => error.message || \"Unknown error\",\n    ),\n    retryWithBackoff: jest.fn(async (fn: () => Promise<any>) => await fn()),\n}));\n\ndescribe(\"Nudge Service Property-Based Tests\", () => {\n    beforeEach(() => {\n        jest.clearAllMocks();\n    });\n\n    /**\n     * **Feature: social-nudging-feed, Property 9: Nudge document creation completeness**\n     * **Validates: Requirements 3.3, 8.1**\n     */\n    describe(\"Property 9: Nudge document creation completeness\", () => {\n        it(\"should create nudge documents with all required fields\", async () => {\n            const mockAddDoc = require(\"firebase/firestore\").addDoc as jest.Mock;\n            mockAddDoc.mockResolvedValue({ id: \"test-nudge-id\" });\n\n            // Mock empty cooldowns (no existing nudges)\n            const mockGetDocs = require(\"firebase/firestore\").getDocs as jest.Mock;\n            mockGetDocs.mockResolvedValue({ docs: [] });\n\n            await fc.assert(\n                fc.asyncProperty(\n                    fc.record({\n                        senderId: fc.string({ minLength: 1, maxLength: 50 }),\n                        senderName: fc.string({ minLength: 1, maxLength: 100 }),\n                        receiverId: fc.string({ minLength: 1, maxLength: 50 }),\n                        goalId: fc.string({ minLength: 1, maxLength: 50 }),\n                        goalDescription: fc.string({ minLength: 1, maxLength: 500 }),\n                    }),\n                    async (input: SendNudgeInput) => {\n                        // Ensure sender and receiver are different\n                        fc.pre(input.senderId !== input.receiverId);\n\n                        await sendNudge(input);\n\n                        // Verify addDoc was called with correct structure\n                        expect(mockAddDoc).toHaveBeenCalledWith(\n                            expect.anything(), // collection reference\n                            expect.objectContaining({\n                                senderId: input.senderId,\n                                senderName: input.senderName,\n                                receiverId: input.receiverId,\n                                goalId: input.goalId,\n                                goalDescription: input.goalDescription,\n                                timestamp: expect.anything(),\n                                cooldownUntil: expect.anything(),\n                                createdAt: expect.anything(),\n                            }),\n                        );\n\n                        // Verify all required fields are present\n                        const callArgs =\n                            mockAddDoc.mock.calls[mockAddDoc.mock.calls.length - 1];\n                        const nudgeData = callArgs[1];\n\n                        expect(nudgeData).toHaveProperty(\"senderId\");\n                        expect(nudgeData).toHaveProperty(\"senderName\");\n                        expect(nudgeData).toHaveProperty(\"receiverId\");\n                        expect(nudgeData).toHaveProperty(\"goalId\");\n                        expect(nudgeData).toHaveProperty(\"goalDescription\");\n                        expect(nudgeData).toHaveProperty(\"timestamp\");\n                        expect(nudgeData).toHaveProperty(\"cooldownUntil\");\n                        expect(nudgeData).toHaveProperty(\"createdAt\");\n\n                        // Verify field values match input\n                        expect(nudgeData.senderId).toBe(input.senderId);\n                        expect(nudgeData.senderName).toBe(input.senderName);\n                        expect(nudgeData.receiverId).toBe(input.receiverId);\n                        expect(nudgeData.goalId).toBe(input.goalId);\n                        expect(nudgeData.goalDescription).toBe(input.goalDescription);\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should reject nudge creation with missing required fields\", async () => {\n            await fc.assert(\n                fc.asyncProperty(\n                    fc.record({\n                        senderId: fc.option(fc.string(), { nil: \"\" }),\n                        senderName: fc.option(fc.string(), { nil: \"\" }),\n                        receiverId: fc.option(fc.string(), { nil: \"\" }),\n                        goalId: fc.option(fc.string(), { nil: \"\" }),\n                        goalDescription: fc.option(fc.string(), { nil: \"\" }),\n                    }),\n                    async (input: any) => {\n                        // Only test cases where at least one required field is missing\n                        const hasAllFields =\n                            input.senderId &&\n                            input.senderName &&\n                            input.receiverId &&\n                            input.goalId &&\n                            input.goalDescription &&\n                            input.senderId !== input.receiverId;\n\n                        fc.pre(!hasAllFields);\n\n                        await expect(sendNudge(input)).rejects.toThrow();\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should prevent self-nudging\", async () => {\n            await fc.assert(\n                fc.asyncProperty(\n                    fc.record({\n                        userId: fc.string({ minLength: 1, maxLength: 50 }),\n                        senderName: fc.string({ minLength: 1, maxLength: 100 }),\n                        goalId: fc.string({ minLength: 1, maxLength: 50 }),\n                        goalDescription: fc.string({ minLength: 1, maxLength: 500 }),\n                    }),\n                    async ({ userId, senderName, goalId, goalDescription }) => {\n                        const input: SendNudgeInput = {\n                            senderId: userId,\n                            senderName,\n                            receiverId: userId, // Same as sender\n                            goalId,\n                            goalDescription,\n                        };\n\n                        await expect(sendNudge(input)).rejects.toThrow(\n                            \"Cannot nudge yourself\",\n                        );\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n    });\n\n    /**\n     * **Feature: social-nudging-feed, Property 12: Nudge cooldown enforcement**\n     * **Validates: Requirements 4.1, 4.2**\n     */\n    describe(\"Property 12: Nudge cooldown enforcement\", () => {\n        it(\"should enforce 1-hour cooldown period\", async () => {\n            const mockGetDocs = require(\"firebase/firestore\").getDocs as jest.Mock;\n\n            await fc.assert(\n                fc.asyncProperty(\n                    fc.record({\n                        userId: fc.string({ minLength: 1, maxLength: 50 }),\n                        goalId: fc.string({ minLength: 1, maxLength: 50 }),\n                        minutesAgo: fc.integer({ min: 1, max: 59 }), // Within 1 hour\n                    }),\n                    async ({ userId, goalId, minutesAgo }) => {\n                        const now = new Date();\n                        const nudgeTime = new Date(now.getTime() - minutesAgo * 60 * 1000);\n                        const cooldownEnd = new Date(nudgeTime.getTime() + 60 * 60 * 1000); // 1 hour later\n\n                        // Mock existing nudge within cooldown\n                        mockGetDocs.mockResolvedValue({\n                            docs: [\n                                {\n                                    data: () => ({\n                                        goalId,\n                                        cooldownUntil: {\n                                            toDate: () => cooldownEnd,\n                                        },\n                                    }),\n                                },\n                            ],\n                        });\n\n                        const cooldowns = await getNudgeCooldowns(userId);\n                        const canNudge = await canSendNudge(userId, goalId);\n                        const remainingMinutes = await getRemainingCooldownMinutes(\n                            userId,\n                            goalId,\n                        );\n\n                        // Should have cooldown for this goal\n                        expect(cooldowns.has(goalId)).toBe(true);\n                        expect(canNudge).toBe(false);\n                        expect(remainingMinutes).toBeGreaterThan(0);\n                        expect(remainingMinutes).toBeLessThanOrEqual(60);\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should allow nudging after cooldown expires\", async () => {\n            const mockGetDocs = require(\"firebase/firestore\").getDocs as jest.Mock;\n\n            await fc.assert(\n                fc.asyncProperty(\n                    fc.record({\n                        userId: fc.string({ minLength: 1, maxLength: 50 }),\n                        goalId: fc.string({ minLength: 1, maxLength: 50 }),\n                        hoursAgo: fc.integer({ min: 2, max: 24 }), // More than 1 hour ago\n                    }),\n                    async ({ userId, goalId, hoursAgo }) => {\n                        const now = new Date();\n                        const nudgeTime = new Date(\n                            now.getTime() - hoursAgo * 60 * 60 * 1000,\n                        );\n                        const cooldownEnd = new Date(nudgeTime.getTime() + 60 * 60 * 1000); // 1 hour later (expired)\n\n                        // Mock expired cooldown (should not be returned by query)\n                        mockGetDocs.mockResolvedValue({ docs: [] });\n\n                        const cooldowns = await getNudgeCooldowns(userId);\n                        const canNudge = await canSendNudge(userId, goalId);\n                        const remainingMinutes = await getRemainingCooldownMinutes(\n                            userId,\n                            goalId,\n                        );\n\n                        // Should not have active cooldown for this goal\n                        expect(cooldowns.has(goalId)).toBe(false);\n                        expect(canNudge).toBe(true);\n                        expect(remainingMinutes).toBe(0);\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n    });\n\n    /**\n     * **Feature: social-nudging-feed, Property 13: Rapid nudge prevention**\n     * **Validates: Requirements 4.3**\n     */\n    describe(\"Property 13: Rapid nudge prevention\", () => {\n        it(\"should prevent rapid nudging with appropriate error message\", async () => {\n            const mockAddDoc = require(\"firebase/firestore\").addDoc as jest.Mock;\n            const mockGetDocs = require(\"firebase/firestore\").getDocs as jest.Mock;\n\n            await fc.assert(\n                fc.asyncProperty(\n                    fc.record({\n                        senderId: fc.string({ minLength: 1, maxLength: 50 }),\n                        senderName: fc.string({ minLength: 1, maxLength: 100 }),\n                        receiverId: fc.string({ minLength: 1, maxLength: 50 }),\n                        goalId: fc.string({ minLength: 1, maxLength: 50 }),\n                        goalDescription: fc.string({ minLength: 1, maxLength: 500 }),\n                        minutesAgo: fc.integer({ min: 1, max: 59 }), // Within cooldown\n                    }),\n                    async (input) => {\n                        // Ensure sender and receiver are different\n                        fc.pre(input.senderId !== input.receiverId);\n\n                        const now = new Date();\n                        const nudgeTime = new Date(\n                            now.getTime() - input.minutesAgo * 60 * 1000,\n                        );\n                        const cooldownEnd = new Date(nudgeTime.getTime() + 60 * 60 * 1000);\n\n                        // Mock existing nudge within cooldown\n                        mockGetDocs.mockResolvedValue({\n                            docs: [\n                                {\n                                    data: () => ({\n                                        goalId: input.goalId,\n                                        cooldownUntil: {\n                                            toDate: () => cooldownEnd,\n                                        },\n                                    }),\n                                },\n                            ],\n                        });\n\n                        const nudgeInput: SendNudgeInput = {\n                            senderId: input.senderId,\n                            senderName: input.senderName,\n                            receiverId: input.receiverId,\n                            goalId: input.goalId,\n                            goalDescription: input.goalDescription,\n                        };\n\n                        await expect(sendNudge(nudgeInput)).rejects.toThrow(\n                            /Already nudged - wait \\d+m/,\n                        );\n\n                        // Verify addDoc was not called due to cooldown\n                        expect(mockAddDoc).not.toHaveBeenCalled();\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n\n        it(\"should show correct remaining time in error message\", async () => {\n            const mockGetDocs = require(\"firebase/firestore\").getDocs as jest.Mock;\n\n            await fc.assert(\n                fc.asyncProperty(\n                    fc.record({\n                        senderId: fc.string({ minLength: 1, maxLength: 50 }),\n                        senderName: fc.string({ minLength: 1, maxLength: 100 }),\n                        receiverId: fc.string({ minLength: 1, maxLength: 50 }),\n                        goalId: fc.string({ minLength: 1, maxLength: 50 }),\n                        goalDescription: fc.string({ minLength: 1, maxLength: 500 }),\n                        minutesRemaining: fc.integer({ min: 1, max: 60 }),\n                    }),\n                    async (input) => {\n                        // Ensure sender and receiver are different\n                        fc.pre(input.senderId !== input.receiverId);\n\n                        const now = new Date();\n                        const cooldownEnd = new Date(\n                            now.getTime() + input.minutesRemaining * 60 * 1000,\n                        );\n\n                        // Mock existing nudge with specific remaining time\n                        mockGetDocs.mockResolvedValue({\n                            docs: [\n                                {\n                                    data: () => ({\n                                        goalId: input.goalId,\n                                        cooldownUntil: {\n                                            toDate: () => cooldownEnd,\n                                        },\n                                    }),\n                                },\n                            ],\n                        });\n\n                        const nudgeInput: SendNudgeInput = {\n                            senderId: input.senderId,\n                            senderName: input.senderName,\n                            receiverId: input.receiverId,\n                            goalId: input.goalId,\n                            goalDescription: input.goalDescription,\n                        };\n\n                        try {\n                            await sendNudge(nudgeInput);\n                            fail(\"Expected error to be thrown\");\n                        } catch (error: any) {\n                            expect(error.message).toMatch(/Already nudged - wait \\d+m/);\n\n                            // Extract the number from the error message\n                            const match = error.message.match(/wait (\\d+)m/);\n                            if (match) {\n                                const errorMinutes = parseInt(match[1]);\n                                // Should be close to the expected remaining time (within 1 minute due to timing)\n                                expect(\n                                    Math.abs(errorMinutes - input.minutesRemaining),\n                                ).toBeLessThanOrEqual(1);\n                            }\n                        }\n                    },\n                ),\n                { numRuns: 20 },\n            );\n        });\n    });\n});\n"],"mappings":"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","ignoreList":[]}