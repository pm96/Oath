{"version":3,"names":["_getJestObj","mock","doc","jest","fn","getDoc","setDoc","collection","getDocs","query","where","serverTimestamp","seconds","Date","now","db","apps","messaging","send","_interopRequireDefault","require","default","_asyncToGenerator2","_streakNotificationService","_require0","describe","beforeEach","clearAllMocks","it","_require","mockResolvedValue","exists","preferences","streakNotificationService","getUserNotificationPreferences","expect","toEqual","streakReminders","milestoneNotifications","recoveryNotifications","weeklyProgress","reminderTime","_require2","data","_require3","_require4","updateNotificationPreferences","toHaveBeenCalledWith","anything","objectContaining","userId","merge","service","message7","createMilestoneMessage","days","toContain","message30","message100","message1","createStreakRiskMessage","message15","message50","message0","createRecoveryMessage","message20","messagePerfect","createWeeklyProgressMessage","messageGood","messageAverage","_require5","mockImplementation","ref","path","includes","Promise","resolve","fcmToken","result","sendMilestoneNotification","achievedAt","celebrated","toBe","_require6","_require7","_require8","mockRejectedValue","Error","_require9"],"sources":["streakNotificationService.test.ts"],"sourcesContent":["import { streakNotificationService } from \"@/services/firebase/streakNotificationService\";\n\n/**\n * Unit Tests for Streak Notification Service\n *\n * Tests core notification functionality including:\n * - Notification preference management\n * - Message creation\n * - Basic notification sending logic\n *\n * Requirements: 11.1, 11.2, 11.3, 11.4, 11.5\n */\n\n// Mock Firebase\njest.mock(\"firebase/firestore\", () => ({\n    doc: jest.fn(),\n    getDoc: jest.fn(),\n    setDoc: jest.fn(),\n    collection: jest.fn(),\n    getDocs: jest.fn(),\n    query: jest.fn(),\n    where: jest.fn(),\n    serverTimestamp: jest.fn(() => ({ seconds: Date.now() / 1000 })),\n}));\n\njest.mock(\"../firebaseConfig\", () => ({\n    db: {},\n}));\n\njest.mock(\"firebase-admin\", () => ({\n    apps: [],\n    messaging: () => ({\n        send: jest.fn(),\n    }),\n}));\n\ndescribe(\"StreakNotificationService\", () => {\n    beforeEach(() => {\n        jest.clearAllMocks();\n    });\n\n    describe(\"Notification Preferences\", () => {\n        it(\"should return default preferences when no user preferences exist\", async () => {\n            const { getDoc } = require(\"firebase/firestore\");\n            getDoc.mockResolvedValue({\n                exists: () => false,\n            });\n\n            const preferences =\n                await streakNotificationService.getUserNotificationPreferences(\n                    \"user123\",\n                );\n\n            expect(preferences).toEqual({\n                streakReminders: true,\n                milestoneNotifications: true,\n                recoveryNotifications: true,\n                weeklyProgress: true,\n                reminderTime: 2,\n            });\n        });\n\n        it(\"should merge user preferences with defaults\", async () => {\n            const { getDoc } = require(\"firebase/firestore\");\n            getDoc.mockResolvedValue({\n                exists: () => true,\n                data: () => ({\n                    preferences: {\n                        streakReminders: false,\n                        reminderTime: 4,\n                    },\n                }),\n            });\n\n            const preferences =\n                await streakNotificationService.getUserNotificationPreferences(\n                    \"user123\",\n                );\n\n            expect(preferences).toEqual({\n                streakReminders: false,\n                milestoneNotifications: true,\n                recoveryNotifications: true,\n                weeklyProgress: true,\n                reminderTime: 4,\n            });\n        });\n\n        it(\"should update notification preferences\", async () => {\n            const { setDoc } = require(\"firebase/firestore\");\n            const { getDoc } = require(\"firebase/firestore\");\n\n            // Mock current preferences\n            getDoc.mockResolvedValue({\n                exists: () => true,\n                data: () => ({\n                    preferences: {\n                        streakReminders: true,\n                        milestoneNotifications: true,\n                        recoveryNotifications: true,\n                        weeklyProgress: true,\n                        reminderTime: 2,\n                    },\n                }),\n            });\n\n            await streakNotificationService.updateNotificationPreferences(\"user123\", {\n                streakReminders: false,\n                reminderTime: 3,\n            });\n\n            expect(setDoc).toHaveBeenCalledWith(\n                expect.anything(),\n                expect.objectContaining({\n                    userId: \"user123\",\n                    preferences: expect.objectContaining({\n                        streakReminders: false,\n                        reminderTime: 3,\n                        milestoneNotifications: true,\n                        recoveryNotifications: true,\n                        weeklyProgress: true,\n                    }),\n                }),\n                { merge: true },\n            );\n        });\n    });\n\n    describe(\"Message Creation\", () => {\n        it(\"should create appropriate milestone messages\", () => {\n            const service = streakNotificationService as any;\n\n            // Test 7-day milestone\n            const message7 = service.createMilestoneMessage(\"Exercise\", { days: 7 });\n            expect(message7).toContain(\"7 days straight\");\n            expect(message7).toContain(\"Exercise\");\n\n            // Test 30-day milestone\n            const message30 = service.createMilestoneMessage(\"Reading\", { days: 30 });\n            expect(message30).toContain(\"30-day streak\");\n            expect(message30).toContain(\"Reading\");\n            expect(message30).toContain(\"streak freeze\");\n\n            // Test 100-day milestone\n            const message100 = service.createMilestoneMessage(\"Meditation\", {\n                days: 100,\n            });\n            expect(message100).toContain(\"100 days\");\n            expect(message100).toContain(\"Meditation\");\n            expect(message100).toContain(\"top 1%\");\n        });\n\n        it(\"should create appropriate streak risk messages\", () => {\n            const service = streakNotificationService as any;\n\n            // Test short streak\n            const message1 = service.createStreakRiskMessage(\"Exercise\", 1);\n            expect(message1).toContain(\"1 day\");\n            expect(message1).toContain(\"Exercise\");\n\n            // Test medium streak\n            const message15 = service.createStreakRiskMessage(\"Reading\", 15);\n            expect(message15).toContain(\"15-day\");\n            expect(message15).toContain(\"Reading\");\n\n            // Test long streak\n            const message50 = service.createStreakRiskMessage(\"Meditation\", 50);\n            expect(message50).toContain(\"50-day\");\n            expect(message50).toContain(\"Meditation\");\n            expect(message50).toContain(\"incredible progress\");\n        });\n\n        it(\"should create appropriate recovery messages\", () => {\n            const service = streakNotificationService as any;\n\n            // Test first-time user\n            const message0 = service.createRecoveryMessage(\"Exercise\", 0);\n            expect(message0).toContain(\"start fresh\");\n            expect(message0).toContain(\"Exercise\");\n\n            // Test user with previous streak\n            const message20 = service.createRecoveryMessage(\"Reading\", 20);\n            expect(message20).toContain(\"20 days\");\n            expect(message20).toContain(\"Reading\");\n            expect(message20).toContain(\"go even further\");\n        });\n\n        it(\"should create appropriate weekly progress messages\", () => {\n            const service = streakNotificationService as any;\n\n            // Test perfect week\n            const messagePerfect = service.createWeeklyProgressMessage(\n                \"Exercise\",\n                30,\n                7,\n            );\n            expect(messagePerfect).toContain(\"Perfect week\");\n            expect(messagePerfect).toContain(\"30 days\");\n            expect(messagePerfect).toContain(\"Exercise\");\n\n            // Test good week\n            const messageGood = service.createWeeklyProgressMessage(\"Reading\", 25, 6);\n            expect(messageGood).toContain(\"Great week\");\n            expect(messageGood).toContain(\"25 days\");\n            expect(messageGood).toContain(\"6/7\");\n\n            // Test average week\n            const messageAverage = service.createWeeklyProgressMessage(\n                \"Meditation\",\n                20,\n                4,\n            );\n            expect(messageAverage).toContain(\"20 days\");\n            expect(messageAverage).toContain(\"4/7\");\n            expect(messageAverage).toContain(\"Keep pushing\");\n        });\n    });\n\n    describe(\"Notification Sending\", () => {\n        beforeEach(() => {\n            const { getDoc } = require(\"firebase/firestore\");\n\n            // Mock user preferences (enabled)\n            getDoc.mockImplementation((ref) => {\n                const path = ref.path || \"\";\n                if (path.includes(\"settings/notifications\")) {\n                    return Promise.resolve({\n                        exists: () => true,\n                        data: () => ({\n                            preferences: {\n                                streakReminders: true,\n                                milestoneNotifications: true,\n                                recoveryNotifications: true,\n                                weeklyProgress: true,\n                                reminderTime: 2,\n                            },\n                        }),\n                    });\n                }\n                // Mock user FCM token\n                if (path.includes(\"users/\")) {\n                    return Promise.resolve({\n                        exists: () => true,\n                        data: () => ({\n                            fcmToken: \"mock-fcm-token\",\n                        }),\n                    });\n                }\n                return Promise.resolve({ exists: () => false });\n            });\n        });\n\n        it(\"should send milestone notification when preferences allow\", async () => {\n            const result = await streakNotificationService.sendMilestoneNotification(\n                \"user123\",\n                \"habit456\",\n                \"Exercise\",\n                { days: 7, achievedAt: new Date(), celebrated: false },\n            );\n\n            expect(result).toBe(true);\n        });\n\n        it(\"should not send notification when preferences disabled\", async () => {\n            const { getDoc } = require(\"firebase/firestore\");\n\n            // Mock disabled preferences\n            getDoc.mockImplementation((ref) => {\n                const path = ref.path || \"\";\n                if (path.includes(\"settings/notifications\")) {\n                    return Promise.resolve({\n                        exists: () => true,\n                        data: () => ({\n                            preferences: {\n                                milestoneNotifications: false,\n                            },\n                        }),\n                    });\n                }\n                return Promise.resolve({ exists: () => false });\n            });\n\n            const result = await streakNotificationService.sendMilestoneNotification(\n                \"user123\",\n                \"habit456\",\n                \"Exercise\",\n                { days: 7, achievedAt: new Date(), celebrated: false },\n            );\n\n            expect(result).toBe(false);\n        });\n\n        it(\"should not send notification when no FCM token\", async () => {\n            const { getDoc } = require(\"firebase/firestore\");\n\n            // Mock user without FCM token\n            getDoc.mockImplementation((ref) => {\n                const path = ref.path || \"\";\n                if (path.includes(\"settings/notifications\")) {\n                    return Promise.resolve({\n                        exists: () => true,\n                        data: () => ({\n                            preferences: {\n                                milestoneNotifications: true,\n                            },\n                        }),\n                    });\n                }\n                if (path.includes(\"users/\")) {\n                    return Promise.resolve({\n                        exists: () => true,\n                        data: () => ({\n                            // No fcmToken\n                        }),\n                    });\n                }\n                return Promise.resolve({ exists: () => false });\n            });\n\n            const result = await streakNotificationService.sendMilestoneNotification(\n                \"user123\",\n                \"habit456\",\n                \"Exercise\",\n                { days: 7, achievedAt: new Date(), celebrated: false },\n            );\n\n            expect(result).toBe(false);\n        });\n    });\n\n    describe(\"Error Handling\", () => {\n        it(\"should handle errors gracefully when sending notifications\", async () => {\n            const { getDoc } = require(\"firebase/firestore\");\n\n            // Mock error in getDoc\n            getDoc.mockRejectedValue(new Error(\"Database error\"));\n\n            const result = await streakNotificationService.sendMilestoneNotification(\n                \"user123\",\n                \"habit456\",\n                \"Exercise\",\n                { days: 7, achievedAt: new Date(), celebrated: false },\n            );\n\n            expect(result).toBe(false);\n        });\n\n        it(\"should return default preferences on error\", async () => {\n            const { getDoc } = require(\"firebase/firestore\");\n\n            // Mock error in getDoc\n            getDoc.mockRejectedValue(new Error(\"Database error\"));\n\n            const preferences =\n                await streakNotificationService.getUserNotificationPreferences(\n                    \"user123\",\n                );\n\n            expect(preferences).toEqual({\n                streakReminders: true,\n                milestoneNotifications: true,\n                recoveryNotifications: true,\n                weeklyProgress: true,\n                reminderTime: 2,\n            });\n        });\n    });\n});\n"],"mappings":"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","ignoreList":[]}