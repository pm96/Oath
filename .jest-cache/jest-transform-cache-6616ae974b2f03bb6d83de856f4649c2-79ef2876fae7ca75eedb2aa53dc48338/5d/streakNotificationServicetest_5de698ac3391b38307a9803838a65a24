16715d9f13c41f8fdeae7211106a040e
_getJestObj().mock("firebase/firestore", function () {
  return {
    doc: jest.fn(),
    getDoc: jest.fn(),
    setDoc: jest.fn(),
    collection: jest.fn(),
    getDocs: jest.fn(),
    query: jest.fn(),
    where: jest.fn(),
    serverTimestamp: jest.fn(function () {
      return {
        seconds: Date.now() / 1000
      };
    })
  };
});
_getJestObj().mock("../firebaseConfig", function () {
  return {
    db: {}
  };
});
_getJestObj().mock("firebase-admin", function () {
  return {
    apps: [],
    messaging: function messaging() {
      return {
        send: jest.fn()
      };
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _streakNotificationService = require("../services/firebase/streakNotificationService");
function _getJestObj() {
  var _require0 = require("@jest/globals"),
    jest = _require0.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe("StreakNotificationService", function () {
  beforeEach(function () {
    jest.clearAllMocks();
  });
  describe("Notification Preferences", function () {
    it("should return default preferences when no user preferences exist", (0, _asyncToGenerator2.default)(function* () {
      var _require = require("firebase/firestore"),
        getDoc = _require.getDoc;
      getDoc.mockResolvedValue({
        exists: function exists() {
          return false;
        }
      });
      var preferences = yield _streakNotificationService.streakNotificationService.getUserNotificationPreferences("user123");
      expect(preferences).toEqual({
        streakReminders: true,
        milestoneNotifications: true,
        recoveryNotifications: true,
        weeklyProgress: true,
        reminderTime: 2
      });
    }));
    it("should merge user preferences with defaults", (0, _asyncToGenerator2.default)(function* () {
      var _require2 = require("firebase/firestore"),
        getDoc = _require2.getDoc;
      getDoc.mockResolvedValue({
        exists: function exists() {
          return true;
        },
        data: function data() {
          return {
            preferences: {
              streakReminders: false,
              reminderTime: 4
            }
          };
        }
      });
      var preferences = yield _streakNotificationService.streakNotificationService.getUserNotificationPreferences("user123");
      expect(preferences).toEqual({
        streakReminders: false,
        milestoneNotifications: true,
        recoveryNotifications: true,
        weeklyProgress: true,
        reminderTime: 4
      });
    }));
    it("should update notification preferences", (0, _asyncToGenerator2.default)(function* () {
      var _require3 = require("firebase/firestore"),
        setDoc = _require3.setDoc;
      var _require4 = require("firebase/firestore"),
        getDoc = _require4.getDoc;
      getDoc.mockResolvedValue({
        exists: function exists() {
          return true;
        },
        data: function data() {
          return {
            preferences: {
              streakReminders: true,
              milestoneNotifications: true,
              recoveryNotifications: true,
              weeklyProgress: true,
              reminderTime: 2
            }
          };
        }
      });
      yield _streakNotificationService.streakNotificationService.updateNotificationPreferences("user123", {
        streakReminders: false,
        reminderTime: 3
      });
      expect(setDoc).toHaveBeenCalledWith(expect.anything(), expect.objectContaining({
        userId: "user123",
        preferences: expect.objectContaining({
          streakReminders: false,
          reminderTime: 3,
          milestoneNotifications: true,
          recoveryNotifications: true,
          weeklyProgress: true
        })
      }), {
        merge: true
      });
    }));
  });
  describe("Message Creation", function () {
    it("should create appropriate milestone messages", function () {
      var service = _streakNotificationService.streakNotificationService;
      var message7 = service.createMilestoneMessage("Exercise", {
        days: 7
      });
      expect(message7).toContain("7 days straight");
      expect(message7).toContain("Exercise");
      var message30 = service.createMilestoneMessage("Reading", {
        days: 30
      });
      expect(message30).toContain("30-day streak");
      expect(message30).toContain("Reading");
      expect(message30).toContain("streak freeze");
      var message100 = service.createMilestoneMessage("Meditation", {
        days: 100
      });
      expect(message100).toContain("100 days");
      expect(message100).toContain("Meditation");
      expect(message100).toContain("top 1%");
    });
    it("should create appropriate streak risk messages", function () {
      var service = _streakNotificationService.streakNotificationService;
      var message1 = service.createStreakRiskMessage("Exercise", 1);
      expect(message1).toContain("1 day");
      expect(message1).toContain("Exercise");
      var message15 = service.createStreakRiskMessage("Reading", 15);
      expect(message15).toContain("15-day");
      expect(message15).toContain("Reading");
      var message50 = service.createStreakRiskMessage("Meditation", 50);
      expect(message50).toContain("50-day");
      expect(message50).toContain("Meditation");
      expect(message50).toContain("incredible progress");
    });
    it("should create appropriate recovery messages", function () {
      var service = _streakNotificationService.streakNotificationService;
      var message0 = service.createRecoveryMessage("Exercise", 0);
      expect(message0).toContain("start fresh");
      expect(message0).toContain("Exercise");
      var message20 = service.createRecoveryMessage("Reading", 20);
      expect(message20).toContain("20 days");
      expect(message20).toContain("Reading");
      expect(message20).toContain("go even further");
    });
    it("should create appropriate weekly progress messages", function () {
      var service = _streakNotificationService.streakNotificationService;
      var messagePerfect = service.createWeeklyProgressMessage("Exercise", 30, 7);
      expect(messagePerfect).toContain("Perfect week");
      expect(messagePerfect).toContain("30 days");
      expect(messagePerfect).toContain("Exercise");
      var messageGood = service.createWeeklyProgressMessage("Reading", 25, 6);
      expect(messageGood).toContain("Great week");
      expect(messageGood).toContain("25 days");
      expect(messageGood).toContain("6/7");
      var messageAverage = service.createWeeklyProgressMessage("Meditation", 20, 4);
      expect(messageAverage).toContain("20 days");
      expect(messageAverage).toContain("4/7");
      expect(messageAverage).toContain("Keep pushing");
    });
  });
  describe("Notification Sending", function () {
    beforeEach(function () {
      var _require5 = require("firebase/firestore"),
        getDoc = _require5.getDoc;
      getDoc.mockImplementation(function (ref) {
        var path = ref.path || "";
        if (path.includes("settings/notifications")) {
          return Promise.resolve({
            exists: function exists() {
              return true;
            },
            data: function data() {
              return {
                preferences: {
                  streakReminders: true,
                  milestoneNotifications: true,
                  recoveryNotifications: true,
                  weeklyProgress: true,
                  reminderTime: 2
                }
              };
            }
          });
        }
        if (path.includes("users/")) {
          return Promise.resolve({
            exists: function exists() {
              return true;
            },
            data: function data() {
              return {
                fcmToken: "mock-fcm-token"
              };
            }
          });
        }
        return Promise.resolve({
          exists: function exists() {
            return false;
          }
        });
      });
    });
    it("should send milestone notification when preferences allow", (0, _asyncToGenerator2.default)(function* () {
      var result = yield _streakNotificationService.streakNotificationService.sendMilestoneNotification("user123", "habit456", "Exercise", {
        days: 7,
        achievedAt: new Date(),
        celebrated: false
      });
      expect(result).toBe(true);
    }));
    it("should not send notification when preferences disabled", (0, _asyncToGenerator2.default)(function* () {
      var _require6 = require("firebase/firestore"),
        getDoc = _require6.getDoc;
      getDoc.mockImplementation(function (ref) {
        var path = ref.path || "";
        if (path.includes("settings/notifications")) {
          return Promise.resolve({
            exists: function exists() {
              return true;
            },
            data: function data() {
              return {
                preferences: {
                  milestoneNotifications: false
                }
              };
            }
          });
        }
        return Promise.resolve({
          exists: function exists() {
            return false;
          }
        });
      });
      var result = yield _streakNotificationService.streakNotificationService.sendMilestoneNotification("user123", "habit456", "Exercise", {
        days: 7,
        achievedAt: new Date(),
        celebrated: false
      });
      expect(result).toBe(false);
    }));
    it("should not send notification when no FCM token", (0, _asyncToGenerator2.default)(function* () {
      var _require7 = require("firebase/firestore"),
        getDoc = _require7.getDoc;
      getDoc.mockImplementation(function (ref) {
        var path = ref.path || "";
        if (path.includes("settings/notifications")) {
          return Promise.resolve({
            exists: function exists() {
              return true;
            },
            data: function data() {
              return {
                preferences: {
                  milestoneNotifications: true
                }
              };
            }
          });
        }
        if (path.includes("users/")) {
          return Promise.resolve({
            exists: function exists() {
              return true;
            },
            data: function data() {
              return {};
            }
          });
        }
        return Promise.resolve({
          exists: function exists() {
            return false;
          }
        });
      });
      var result = yield _streakNotificationService.streakNotificationService.sendMilestoneNotification("user123", "habit456", "Exercise", {
        days: 7,
        achievedAt: new Date(),
        celebrated: false
      });
      expect(result).toBe(false);
    }));
  });
  describe("Error Handling", function () {
    it("should handle errors gracefully when sending notifications", (0, _asyncToGenerator2.default)(function* () {
      var _require8 = require("firebase/firestore"),
        getDoc = _require8.getDoc;
      getDoc.mockRejectedValue(new Error("Database error"));
      var result = yield _streakNotificationService.streakNotificationService.sendMilestoneNotification("user123", "habit456", "Exercise", {
        days: 7,
        achievedAt: new Date(),
        celebrated: false
      });
      expect(result).toBe(false);
    }));
    it("should return default preferences on error", (0, _asyncToGenerator2.default)(function* () {
      var _require9 = require("firebase/firestore"),
        getDoc = _require9.getDoc;
      getDoc.mockRejectedValue(new Error("Database error"));
      var preferences = yield _streakNotificationService.streakNotificationService.getUserNotificationPreferences("user123");
      expect(preferences).toEqual({
        streakReminders: true,
        milestoneNotifications: true,
        recoveryNotifications: true,
        weeklyProgress: true,
        reminderTime: 2
      });
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJkb2MiLCJqZXN0IiwiZm4iLCJnZXREb2MiLCJzZXREb2MiLCJjb2xsZWN0aW9uIiwiZ2V0RG9jcyIsInF1ZXJ5Iiwid2hlcmUiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJzZWNvbmRzIiwiRGF0ZSIsIm5vdyIsImRiIiwiYXBwcyIsIm1lc3NhZ2luZyIsInNlbmQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImRlZmF1bHQiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZSIsIl9yZXF1aXJlMCIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsIl9yZXF1aXJlIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJleGlzdHMiLCJwcmVmZXJlbmNlcyIsInN0cmVha05vdGlmaWNhdGlvblNlcnZpY2UiLCJnZXRVc2VyTm90aWZpY2F0aW9uUHJlZmVyZW5jZXMiLCJleHBlY3QiLCJ0b0VxdWFsIiwic3RyZWFrUmVtaW5kZXJzIiwibWlsZXN0b25lTm90aWZpY2F0aW9ucyIsInJlY292ZXJ5Tm90aWZpY2F0aW9ucyIsIndlZWtseVByb2dyZXNzIiwicmVtaW5kZXJUaW1lIiwiX3JlcXVpcmUyIiwiZGF0YSIsIl9yZXF1aXJlMyIsIl9yZXF1aXJlNCIsInVwZGF0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2VzIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJhbnl0aGluZyIsIm9iamVjdENvbnRhaW5pbmciLCJ1c2VySWQiLCJtZXJnZSIsInNlcnZpY2UiLCJtZXNzYWdlNyIsImNyZWF0ZU1pbGVzdG9uZU1lc3NhZ2UiLCJkYXlzIiwidG9Db250YWluIiwibWVzc2FnZTMwIiwibWVzc2FnZTEwMCIsIm1lc3NhZ2UxIiwiY3JlYXRlU3RyZWFrUmlza01lc3NhZ2UiLCJtZXNzYWdlMTUiLCJtZXNzYWdlNTAiLCJtZXNzYWdlMCIsImNyZWF0ZVJlY292ZXJ5TWVzc2FnZSIsIm1lc3NhZ2UyMCIsIm1lc3NhZ2VQZXJmZWN0IiwiY3JlYXRlV2Vla2x5UHJvZ3Jlc3NNZXNzYWdlIiwibWVzc2FnZUdvb2QiLCJtZXNzYWdlQXZlcmFnZSIsIl9yZXF1aXJlNSIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsInJlZiIsInBhdGgiLCJpbmNsdWRlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwiZmNtVG9rZW4iLCJyZXN1bHQiLCJzZW5kTWlsZXN0b25lTm90aWZpY2F0aW9uIiwiYWNoaWV2ZWRBdCIsImNlbGVicmF0ZWQiLCJ0b0JlIiwiX3JlcXVpcmU2IiwiX3JlcXVpcmU3IiwiX3JlcXVpcmU4IiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsIl9yZXF1aXJlOSJdLCJzb3VyY2VzIjpbInN0cmVha05vdGlmaWNhdGlvblNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdHJlYWtOb3RpZmljYXRpb25TZXJ2aWNlIH0gZnJvbSBcIkAvc2VydmljZXMvZmlyZWJhc2Uvc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZVwiO1xuXG4vKipcbiAqIFVuaXQgVGVzdHMgZm9yIFN0cmVhayBOb3RpZmljYXRpb24gU2VydmljZVxuICpcbiAqIFRlc3RzIGNvcmUgbm90aWZpY2F0aW9uIGZ1bmN0aW9uYWxpdHkgaW5jbHVkaW5nOlxuICogLSBOb3RpZmljYXRpb24gcHJlZmVyZW5jZSBtYW5hZ2VtZW50XG4gKiAtIE1lc3NhZ2UgY3JlYXRpb25cbiAqIC0gQmFzaWMgbm90aWZpY2F0aW9uIHNlbmRpbmcgbG9naWNcbiAqXG4gKiBSZXF1aXJlbWVudHM6IDExLjEsIDExLjIsIDExLjMsIDExLjQsIDExLjVcbiAqL1xuXG4vLyBNb2NrIEZpcmViYXNlXG5qZXN0Lm1vY2soXCJmaXJlYmFzZS9maXJlc3RvcmVcIiwgKCkgPT4gKHtcbiAgICBkb2M6IGplc3QuZm4oKSxcbiAgICBnZXREb2M6IGplc3QuZm4oKSxcbiAgICBzZXREb2M6IGplc3QuZm4oKSxcbiAgICBjb2xsZWN0aW9uOiBqZXN0LmZuKCksXG4gICAgZ2V0RG9jczogamVzdC5mbigpLFxuICAgIHF1ZXJ5OiBqZXN0LmZuKCksXG4gICAgd2hlcmU6IGplc3QuZm4oKSxcbiAgICBzZXJ2ZXJUaW1lc3RhbXA6IGplc3QuZm4oKCkgPT4gKHsgc2Vjb25kczogRGF0ZS5ub3coKSAvIDEwMDAgfSkpLFxufSkpO1xuXG5qZXN0Lm1vY2soXCIuLi9maXJlYmFzZUNvbmZpZ1wiLCAoKSA9PiAoe1xuICAgIGRiOiB7fSxcbn0pKTtcblxuamVzdC5tb2NrKFwiZmlyZWJhc2UtYWRtaW5cIiwgKCkgPT4gKHtcbiAgICBhcHBzOiBbXSxcbiAgICBtZXNzYWdpbmc6ICgpID0+ICh7XG4gICAgICAgIHNlbmQ6IGplc3QuZm4oKSxcbiAgICB9KSxcbn0pKTtcblxuZGVzY3JpYmUoXCJTdHJlYWtOb3RpZmljYXRpb25TZXJ2aWNlXCIsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIk5vdGlmaWNhdGlvbiBQcmVmZXJlbmNlc1wiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBkZWZhdWx0IHByZWZlcmVuY2VzIHdoZW4gbm8gdXNlciBwcmVmZXJlbmNlcyBleGlzdFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGdldERvYyB9ID0gcmVxdWlyZShcImZpcmViYXNlL2ZpcmVzdG9yZVwiKTtcbiAgICAgICAgICAgIGdldERvYy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgZXhpc3RzOiAoKSA9PiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBwcmVmZXJlbmNlcyA9XG4gICAgICAgICAgICAgICAgYXdhaXQgc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZS5nZXRVc2VyTm90aWZpY2F0aW9uUHJlZmVyZW5jZXMoXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcjEyM1wiLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGV4cGVjdChwcmVmZXJlbmNlcykudG9FcXVhbCh7XG4gICAgICAgICAgICAgICAgc3RyZWFrUmVtaW5kZXJzOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1pbGVzdG9uZU5vdGlmaWNhdGlvbnM6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVjb3ZlcnlOb3RpZmljYXRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgIHdlZWtseVByb2dyZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlbWluZGVyVGltZTogMixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBtZXJnZSB1c2VyIHByZWZlcmVuY2VzIHdpdGggZGVmYXVsdHNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBnZXREb2MgfSA9IHJlcXVpcmUoXCJmaXJlYmFzZS9maXJlc3RvcmVcIik7XG4gICAgICAgICAgICBnZXREb2MubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgIGV4aXN0czogKCkgPT4gdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBwcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFrUmVtaW5kZXJzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbWluZGVyVGltZTogNCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBwcmVmZXJlbmNlcyA9XG4gICAgICAgICAgICAgICAgYXdhaXQgc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZS5nZXRVc2VyTm90aWZpY2F0aW9uUHJlZmVyZW5jZXMoXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcjEyM1wiLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGV4cGVjdChwcmVmZXJlbmNlcykudG9FcXVhbCh7XG4gICAgICAgICAgICAgICAgc3RyZWFrUmVtaW5kZXJzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtaWxlc3RvbmVOb3RpZmljYXRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlY292ZXJ5Tm90aWZpY2F0aW9uczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3ZWVrbHlQcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICByZW1pbmRlclRpbWU6IDQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgdXBkYXRlIG5vdGlmaWNhdGlvbiBwcmVmZXJlbmNlc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHNldERvYyB9ID0gcmVxdWlyZShcImZpcmViYXNlL2ZpcmVzdG9yZVwiKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZ2V0RG9jIH0gPSByZXF1aXJlKFwiZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4gICAgICAgICAgICAvLyBNb2NrIGN1cnJlbnQgcHJlZmVyZW5jZXNcbiAgICAgICAgICAgIGdldERvYy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgZXhpc3RzOiAoKSA9PiB0cnVlLFxuICAgICAgICAgICAgICAgIGRhdGE6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYWtSZW1pbmRlcnM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaWxlc3RvbmVOb3RpZmljYXRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3ZlcnlOb3RpZmljYXRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2Vla2x5UHJvZ3Jlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1pbmRlclRpbWU6IDIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXdhaXQgc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZS51cGRhdGVOb3RpZmljYXRpb25QcmVmZXJlbmNlcyhcInVzZXIxMjNcIiwge1xuICAgICAgICAgICAgICAgIHN0cmVha1JlbWluZGVyczogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVtaW5kZXJUaW1lOiAzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGV4cGVjdChzZXREb2MpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICAgICAgIGV4cGVjdC5hbnl0aGluZygpLFxuICAgICAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBcInVzZXIxMjNcIixcbiAgICAgICAgICAgICAgICAgICAgcHJlZmVyZW5jZXM6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVha1JlbWluZGVyczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1pbmRlclRpbWU6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaWxlc3RvbmVOb3RpZmljYXRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3ZlcnlOb3RpZmljYXRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2Vla2x5UHJvZ3Jlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHsgbWVyZ2U6IHRydWUgfSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJNZXNzYWdlIENyZWF0aW9uXCIsICgpID0+IHtcbiAgICAgICAgaXQoXCJzaG91bGQgY3JlYXRlIGFwcHJvcHJpYXRlIG1pbGVzdG9uZSBtZXNzYWdlc1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZSBhcyBhbnk7XG5cbiAgICAgICAgICAgIC8vIFRlc3QgNy1kYXkgbWlsZXN0b25lXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlNyA9IHNlcnZpY2UuY3JlYXRlTWlsZXN0b25lTWVzc2FnZShcIkV4ZXJjaXNlXCIsIHsgZGF5czogNyB9KTtcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlNykudG9Db250YWluKFwiNyBkYXlzIHN0cmFpZ2h0XCIpO1xuICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2U3KS50b0NvbnRhaW4oXCJFeGVyY2lzZVwiKTtcblxuICAgICAgICAgICAgLy8gVGVzdCAzMC1kYXkgbWlsZXN0b25lXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlMzAgPSBzZXJ2aWNlLmNyZWF0ZU1pbGVzdG9uZU1lc3NhZ2UoXCJSZWFkaW5nXCIsIHsgZGF5czogMzAgfSk7XG4gICAgICAgICAgICBleHBlY3QobWVzc2FnZTMwKS50b0NvbnRhaW4oXCIzMC1kYXkgc3RyZWFrXCIpO1xuICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2UzMCkudG9Db250YWluKFwiUmVhZGluZ1wiKTtcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlMzApLnRvQ29udGFpbihcInN0cmVhayBmcmVlemVcIik7XG5cbiAgICAgICAgICAgIC8vIFRlc3QgMTAwLWRheSBtaWxlc3RvbmVcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UxMDAgPSBzZXJ2aWNlLmNyZWF0ZU1pbGVzdG9uZU1lc3NhZ2UoXCJNZWRpdGF0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICBkYXlzOiAxMDAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlMTAwKS50b0NvbnRhaW4oXCIxMDAgZGF5c1wiKTtcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlMTAwKS50b0NvbnRhaW4oXCJNZWRpdGF0aW9uXCIpO1xuICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2UxMDApLnRvQ29udGFpbihcInRvcCAxJVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgY3JlYXRlIGFwcHJvcHJpYXRlIHN0cmVhayByaXNrIG1lc3NhZ2VzXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBzdHJlYWtOb3RpZmljYXRpb25TZXJ2aWNlIGFzIGFueTtcblxuICAgICAgICAgICAgLy8gVGVzdCBzaG9ydCBzdHJlYWtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UxID0gc2VydmljZS5jcmVhdGVTdHJlYWtSaXNrTWVzc2FnZShcIkV4ZXJjaXNlXCIsIDEpO1xuICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2UxKS50b0NvbnRhaW4oXCIxIGRheVwiKTtcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlMSkudG9Db250YWluKFwiRXhlcmNpc2VcIik7XG5cbiAgICAgICAgICAgIC8vIFRlc3QgbWVkaXVtIHN0cmVha1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZTE1ID0gc2VydmljZS5jcmVhdGVTdHJlYWtSaXNrTWVzc2FnZShcIlJlYWRpbmdcIiwgMTUpO1xuICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2UxNSkudG9Db250YWluKFwiMTUtZGF5XCIpO1xuICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2UxNSkudG9Db250YWluKFwiUmVhZGluZ1wiKTtcblxuICAgICAgICAgICAgLy8gVGVzdCBsb25nIHN0cmVha1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZTUwID0gc2VydmljZS5jcmVhdGVTdHJlYWtSaXNrTWVzc2FnZShcIk1lZGl0YXRpb25cIiwgNTApO1xuICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2U1MCkudG9Db250YWluKFwiNTAtZGF5XCIpO1xuICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2U1MCkudG9Db250YWluKFwiTWVkaXRhdGlvblwiKTtcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlNTApLnRvQ29udGFpbihcImluY3JlZGlibGUgcHJvZ3Jlc3NcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGNyZWF0ZSBhcHByb3ByaWF0ZSByZWNvdmVyeSBtZXNzYWdlc1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZSBhcyBhbnk7XG5cbiAgICAgICAgICAgIC8vIFRlc3QgZmlyc3QtdGltZSB1c2VyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlMCA9IHNlcnZpY2UuY3JlYXRlUmVjb3ZlcnlNZXNzYWdlKFwiRXhlcmNpc2VcIiwgMCk7XG4gICAgICAgICAgICBleHBlY3QobWVzc2FnZTApLnRvQ29udGFpbihcInN0YXJ0IGZyZXNoXCIpO1xuICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2UwKS50b0NvbnRhaW4oXCJFeGVyY2lzZVwiKTtcblxuICAgICAgICAgICAgLy8gVGVzdCB1c2VyIHdpdGggcHJldmlvdXMgc3RyZWFrXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlMjAgPSBzZXJ2aWNlLmNyZWF0ZVJlY292ZXJ5TWVzc2FnZShcIlJlYWRpbmdcIiwgMjApO1xuICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2UyMCkudG9Db250YWluKFwiMjAgZGF5c1wiKTtcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlMjApLnRvQ29udGFpbihcIlJlYWRpbmdcIik7XG4gICAgICAgICAgICBleHBlY3QobWVzc2FnZTIwKS50b0NvbnRhaW4oXCJnbyBldmVuIGZ1cnRoZXJcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGNyZWF0ZSBhcHByb3ByaWF0ZSB3ZWVrbHkgcHJvZ3Jlc3MgbWVzc2FnZXNcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IHN0cmVha05vdGlmaWNhdGlvblNlcnZpY2UgYXMgYW55O1xuXG4gICAgICAgICAgICAvLyBUZXN0IHBlcmZlY3Qgd2Vla1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZVBlcmZlY3QgPSBzZXJ2aWNlLmNyZWF0ZVdlZWtseVByb2dyZXNzTWVzc2FnZShcbiAgICAgICAgICAgICAgICBcIkV4ZXJjaXNlXCIsXG4gICAgICAgICAgICAgICAgMzAsXG4gICAgICAgICAgICAgICAgNyxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBleHBlY3QobWVzc2FnZVBlcmZlY3QpLnRvQ29udGFpbihcIlBlcmZlY3Qgd2Vla1wiKTtcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlUGVyZmVjdCkudG9Db250YWluKFwiMzAgZGF5c1wiKTtcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlUGVyZmVjdCkudG9Db250YWluKFwiRXhlcmNpc2VcIik7XG5cbiAgICAgICAgICAgIC8vIFRlc3QgZ29vZCB3ZWVrXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlR29vZCA9IHNlcnZpY2UuY3JlYXRlV2Vla2x5UHJvZ3Jlc3NNZXNzYWdlKFwiUmVhZGluZ1wiLCAyNSwgNik7XG4gICAgICAgICAgICBleHBlY3QobWVzc2FnZUdvb2QpLnRvQ29udGFpbihcIkdyZWF0IHdlZWtcIik7XG4gICAgICAgICAgICBleHBlY3QobWVzc2FnZUdvb2QpLnRvQ29udGFpbihcIjI1IGRheXNcIik7XG4gICAgICAgICAgICBleHBlY3QobWVzc2FnZUdvb2QpLnRvQ29udGFpbihcIjYvN1wiKTtcblxuICAgICAgICAgICAgLy8gVGVzdCBhdmVyYWdlIHdlZWtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VBdmVyYWdlID0gc2VydmljZS5jcmVhdGVXZWVrbHlQcm9ncmVzc01lc3NhZ2UoXG4gICAgICAgICAgICAgICAgXCJNZWRpdGF0aW9uXCIsXG4gICAgICAgICAgICAgICAgMjAsXG4gICAgICAgICAgICAgICAgNCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBleHBlY3QobWVzc2FnZUF2ZXJhZ2UpLnRvQ29udGFpbihcIjIwIGRheXNcIik7XG4gICAgICAgICAgICBleHBlY3QobWVzc2FnZUF2ZXJhZ2UpLnRvQ29udGFpbihcIjQvN1wiKTtcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlQXZlcmFnZSkudG9Db250YWluKFwiS2VlcCBwdXNoaW5nXCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiTm90aWZpY2F0aW9uIFNlbmRpbmdcIiwgKCkgPT4ge1xuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZ2V0RG9jIH0gPSByZXF1aXJlKFwiZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4gICAgICAgICAgICAvLyBNb2NrIHVzZXIgcHJlZmVyZW5jZXMgKGVuYWJsZWQpXG4gICAgICAgICAgICBnZXREb2MubW9ja0ltcGxlbWVudGF0aW9uKChyZWYpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gcmVmLnBhdGggfHwgXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAocGF0aC5pbmNsdWRlcyhcInNldHRpbmdzL25vdGlmaWNhdGlvbnNcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdHM6ICgpID0+IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVha1JlbWluZGVyczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlsZXN0b25lTm90aWZpY2F0aW9uczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3ZlcnlOb3RpZmljYXRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWVrbHlQcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtaW5kZXJUaW1lOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIE1vY2sgdXNlciBGQ00gdG9rZW5cbiAgICAgICAgICAgICAgICBpZiAocGF0aC5pbmNsdWRlcyhcInVzZXJzL1wiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0czogKCkgPT4gdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmNtVG9rZW46IFwibW9jay1mY20tdG9rZW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IGV4aXN0czogKCkgPT4gZmFsc2UgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgc2VuZCBtaWxlc3RvbmUgbm90aWZpY2F0aW9uIHdoZW4gcHJlZmVyZW5jZXMgYWxsb3dcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZS5zZW5kTWlsZXN0b25lTm90aWZpY2F0aW9uKFxuICAgICAgICAgICAgICAgIFwidXNlcjEyM1wiLFxuICAgICAgICAgICAgICAgIFwiaGFiaXQ0NTZcIixcbiAgICAgICAgICAgICAgICBcIkV4ZXJjaXNlXCIsXG4gICAgICAgICAgICAgICAgeyBkYXlzOiA3LCBhY2hpZXZlZEF0OiBuZXcgRGF0ZSgpLCBjZWxlYnJhdGVkOiBmYWxzZSB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgbm90IHNlbmQgbm90aWZpY2F0aW9uIHdoZW4gcHJlZmVyZW5jZXMgZGlzYWJsZWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBnZXREb2MgfSA9IHJlcXVpcmUoXCJmaXJlYmFzZS9maXJlc3RvcmVcIik7XG5cbiAgICAgICAgICAgIC8vIE1vY2sgZGlzYWJsZWQgcHJlZmVyZW5jZXNcbiAgICAgICAgICAgIGdldERvYy5tb2NrSW1wbGVtZW50YXRpb24oKHJlZikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSByZWYucGF0aCB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIGlmIChwYXRoLmluY2x1ZGVzKFwic2V0dGluZ3Mvbm90aWZpY2F0aW9uc1wiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0czogKCkgPT4gdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlsZXN0b25lTm90aWZpY2F0aW9uczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IGV4aXN0czogKCkgPT4gZmFsc2UgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZS5zZW5kTWlsZXN0b25lTm90aWZpY2F0aW9uKFxuICAgICAgICAgICAgICAgIFwidXNlcjEyM1wiLFxuICAgICAgICAgICAgICAgIFwiaGFiaXQ0NTZcIixcbiAgICAgICAgICAgICAgICBcIkV4ZXJjaXNlXCIsXG4gICAgICAgICAgICAgICAgeyBkYXlzOiA3LCBhY2hpZXZlZEF0OiBuZXcgRGF0ZSgpLCBjZWxlYnJhdGVkOiBmYWxzZSB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIG5vdCBzZW5kIG5vdGlmaWNhdGlvbiB3aGVuIG5vIEZDTSB0b2tlblwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGdldERvYyB9ID0gcmVxdWlyZShcImZpcmViYXNlL2ZpcmVzdG9yZVwiKTtcblxuICAgICAgICAgICAgLy8gTW9jayB1c2VyIHdpdGhvdXQgRkNNIHRva2VuXG4gICAgICAgICAgICBnZXREb2MubW9ja0ltcGxlbWVudGF0aW9uKChyZWYpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gcmVmLnBhdGggfHwgXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAocGF0aC5pbmNsdWRlcyhcInNldHRpbmdzL25vdGlmaWNhdGlvbnNcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdHM6ICgpID0+IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbGVzdG9uZU5vdGlmaWNhdGlvbnM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBhdGguaW5jbHVkZXMoXCJ1c2Vycy9cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdHM6ICgpID0+IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGZjbVRva2VuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeyBleGlzdHM6ICgpID0+IGZhbHNlIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0cmVha05vdGlmaWNhdGlvblNlcnZpY2Uuc2VuZE1pbGVzdG9uZU5vdGlmaWNhdGlvbihcbiAgICAgICAgICAgICAgICBcInVzZXIxMjNcIixcbiAgICAgICAgICAgICAgICBcImhhYml0NDU2XCIsXG4gICAgICAgICAgICAgICAgXCJFeGVyY2lzZVwiLFxuICAgICAgICAgICAgICAgIHsgZGF5czogNywgYWNoaWV2ZWRBdDogbmV3IERhdGUoKSwgY2VsZWJyYXRlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiRXJyb3IgSGFuZGxpbmdcIiwgKCkgPT4ge1xuICAgICAgICBpdChcInNob3VsZCBoYW5kbGUgZXJyb3JzIGdyYWNlZnVsbHkgd2hlbiBzZW5kaW5nIG5vdGlmaWNhdGlvbnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBnZXREb2MgfSA9IHJlcXVpcmUoXCJmaXJlYmFzZS9maXJlc3RvcmVcIik7XG5cbiAgICAgICAgICAgIC8vIE1vY2sgZXJyb3IgaW4gZ2V0RG9jXG4gICAgICAgICAgICBnZXREb2MubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3JcIikpO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdHJlYWtOb3RpZmljYXRpb25TZXJ2aWNlLnNlbmRNaWxlc3RvbmVOb3RpZmljYXRpb24oXG4gICAgICAgICAgICAgICAgXCJ1c2VyMTIzXCIsXG4gICAgICAgICAgICAgICAgXCJoYWJpdDQ1NlwiLFxuICAgICAgICAgICAgICAgIFwiRXhlcmNpc2VcIixcbiAgICAgICAgICAgICAgICB7IGRheXM6IDcsIGFjaGlldmVkQXQ6IG5ldyBEYXRlKCksIGNlbGVicmF0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIGRlZmF1bHQgcHJlZmVyZW5jZXMgb24gZXJyb3JcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBnZXREb2MgfSA9IHJlcXVpcmUoXCJmaXJlYmFzZS9maXJlc3RvcmVcIik7XG5cbiAgICAgICAgICAgIC8vIE1vY2sgZXJyb3IgaW4gZ2V0RG9jXG4gICAgICAgICAgICBnZXREb2MubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3JcIikpO1xuXG4gICAgICAgICAgICBjb25zdCBwcmVmZXJlbmNlcyA9XG4gICAgICAgICAgICAgICAgYXdhaXQgc3RyZWFrTm90aWZpY2F0aW9uU2VydmljZS5nZXRVc2VyTm90aWZpY2F0aW9uUHJlZmVyZW5jZXMoXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcjEyM1wiLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGV4cGVjdChwcmVmZXJlbmNlcykudG9FcXVhbCh7XG4gICAgICAgICAgICAgICAgc3RyZWFrUmVtaW5kZXJzOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1pbGVzdG9uZU5vdGlmaWNhdGlvbnM6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVjb3ZlcnlOb3RpZmljYXRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgIHdlZWtseVByb2dyZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlbWluZGVyVGltZTogMixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFjQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7RUFBQSxPQUFPO0lBQ25DQyxHQUFHLEVBQUVDLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDZEMsTUFBTSxFQUFFRixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBQ2pCRSxNQUFNLEVBQUVILElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDakJHLFVBQVUsRUFBRUosSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNyQkksT0FBTyxFQUFFTCxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBQ2xCSyxLQUFLLEVBQUVOLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDaEJNLEtBQUssRUFBRVAsSUFBSSxDQUFD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