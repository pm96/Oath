331da3669802880fbece0529940d24d8
_getJestObj().mock("../firebaseConfig", function () {
  return {
    db: {},
    APP_ID: "test-app"
  };
});
_getJestObj().mock("firebase/firestore", function () {
  return {
    collection: jest.fn(),
    doc: jest.fn(),
    getDocs: jest.fn(),
    query: jest.fn(),
    where: jest.fn(),
    orderBy: jest.fn(),
    runTransaction: jest.fn(),
    serverTimestamp: jest.fn(function () {
      return {
        seconds: Date.now() / 1000
      };
    }),
    Timestamp: {
      now: jest.fn(function () {
        return {
          seconds: Date.now() / 1000,
          toMillis: function toMillis() {
            return Date.now();
          },
          toDate: function toDate() {
            return new Date();
          }
        };
      }),
      fromDate: jest.fn(function (date) {
        return {
          seconds: date.getTime() / 1000,
          toMillis: function toMillis() {
            return date.getTime();
          },
          toDate: function toDate() {
            return date;
          }
        };
      })
    }
  };
});
_getJestObj().mock("../services/firebase/collections", function () {
  return {
    getHabitCompletionsCollection: jest.fn(function () {
      return {
        path: "completions"
      };
    })
  };
});
_getJestObj().mock("../utils/errorHandling", function () {
  return {
    getUserFriendlyErrorMessage: jest.fn(function (error) {
      return error.message;
    }),
    retryWithBackoff: jest.fn(function (fn) {
      return fn();
    })
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _firestore = require("firebase/firestore");
var _completionService = require("../services/firebase/completionService");
var _dateUtils = require("../utils/dateUtils");
function _getJestObj() {
  var _require3 = require("@jest/globals"),
    jest = _require3.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe("CompletionService", function () {
  var service;
  var mockUserId = "user123";
  var mockHabitId = "habit456";
  var mockTimezone = (0, _dateUtils.getUserTimezone)();
  beforeEach(function () {
    service = new _completionService.CompletionService();
    jest.clearAllMocks();
  });
  describe("recordCompletion", function () {
    it("should throw error for missing habitId", (0, _asyncToGenerator2.default)(function* () {
      var completion = {
        habitId: "",
        userId: mockUserId,
        completedAt: _firestore.Timestamp.now(),
        timezone: mockTimezone,
        difficulty: "easy"
      };
      yield expect(service.recordCompletion(completion)).rejects.toThrow("Habit ID and User ID are required");
    }));
    it("should throw error for missing userId", (0, _asyncToGenerator2.default)(function* () {
      var completion = {
        habitId: mockHabitId,
        userId: "",
        completedAt: _firestore.Timestamp.now(),
        timezone: mockTimezone,
        difficulty: "easy"
      };
      yield expect(service.recordCompletion(completion)).rejects.toThrow("Habit ID and User ID are required");
    }));
    it("should throw error for future completion dates", (0, _asyncToGenerator2.default)(function* () {
      var futureDate = new Date();
      futureDate.setDate(futureDate.getDate() + 1);
      var completion = {
        habitId: mockHabitId,
        userId: mockUserId,
        completedAt: _firestore.Timestamp.fromDate(futureDate),
        timezone: mockTimezone,
        difficulty: "easy"
      };
      yield expect(service.recordCompletion(completion)).rejects.toThrow("Cannot record completions for future dates");
    }));
  });
  describe("calculateCompletionRate", function () {
    it("should throw error for missing parameters", (0, _asyncToGenerator2.default)(function* () {
      yield expect(service.calculateCompletionRate("", mockUserId, "2024-01-01", "2024-01-07")).rejects.toThrow("All parameters are required for completion rate calculation");
      yield expect(service.calculateCompletionRate(mockHabitId, "", "2024-01-01", "2024-01-07")).rejects.toThrow("All parameters are required for completion rate calculation");
      yield expect(service.calculateCompletionRate(mockHabitId, mockUserId, "", "2024-01-07")).rejects.toThrow("All parameters are required for completion rate calculation");
      yield expect(service.calculateCompletionRate(mockHabitId, mockUserId, "2024-01-01", "")).rejects.toThrow("All parameters are required for completion rate calculation");
    }));
    it("should calculate 0% rate for no completions", (0, _asyncToGenerator2.default)(function* () {
      var _require = require("firebase/firestore"),
        getDocs = _require.getDocs;
      getDocs.mockResolvedValue({
        docs: []
      });
      var result = yield service.calculateCompletionRate(mockHabitId, mockUserId, "2024-01-01", "2024-01-07");
      expect(result.rate).toBe(0);
      expect(result.totalDays).toBe(7);
      expect(result.completedDays).toBe(0);
    }));
  });
  describe("getCompletionHistory", function () {
    it("should throw error for missing habitId", (0, _asyncToGenerator2.default)(function* () {
      yield expect(service.getCompletionHistory("", mockUserId)).rejects.toThrow("Habit ID and User ID are required");
    }));
    it("should throw error for missing userId", (0, _asyncToGenerator2.default)(function* () {
      yield expect(service.getCompletionHistory(mockHabitId, "")).rejects.toThrow("Habit ID and User ID are required");
    }));
    it("should return empty history for no completions", (0, _asyncToGenerator2.default)(function* () {
      var _require2 = require("firebase/firestore"),
        getDocs = _require2.getDocs;
      getDocs.mockResolvedValue({
        docs: []
      });
      var result = yield service.getCompletionHistory(mockHabitId, mockUserId);
      expect(result.completions).toEqual([]);
      expect(result.totalCount).toBe(0);
      expect(result.period).toBe("No completions");
    }));
  });
  describe("getCompletionDetail", function () {
    it("should throw error for missing completionId", (0, _asyncToGenerator2.default)(function* () {
      yield expect(service.getCompletionDetail("", mockUserId)).rejects.toThrow("Completion ID and User ID are required");
    }));
    it("should throw error for missing userId", (0, _asyncToGenerator2.default)(function* () {
      yield expect(service.getCompletionDetail("completion123", "")).rejects.toThrow("Completion ID and User ID are required");
    }));
  });
  describe("getGroupedCompletions", function () {
    it("should throw error for missing habitId", (0, _asyncToGenerator2.default)(function* () {
      yield expect(service.getGroupedCompletions("", mockUserId)).rejects.toThrow("Habit ID and User ID are required");
    }));
    it("should throw error for missing userId", (0, _asyncToGenerator2.default)(function* () {
      yield expect(service.getGroupedCompletions(mockHabitId, "")).rejects.toThrow("Habit ID and User ID are required");
    }));
  });
  describe("getCompletionStatistics", function () {
    it("should throw error for missing habitId", (0, _asyncToGenerator2.default)(function* () {
      yield expect(service.getCompletionStatistics("", mockUserId)).rejects.toThrow("Habit ID and User ID are required");
    }));
    it("should throw error for missing userId", (0, _asyncToGenerator2.default)(function* () {
      yield expect(service.getCompletionStatistics(mockHabitId, "")).rejects.toThrow("Habit ID and User ID are required");
    }));
  });
  describe("private helper methods", function () {
    it("should calculate relative time correctly", function () {
      var now = new Date();
      var today = _firestore.Timestamp.fromDate(now);
      var yesterday = _firestore.Timestamp.fromDate(new Date(now.getTime() - 24 * 60 * 60 * 1000));
      var weekAgo = _firestore.Timestamp.fromDate(new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000));
      var getRelativeTimeString = service.getRelativeTimeString.bind(service);
      expect(getRelativeTimeString(today)).toBe("Today");
      expect(getRelativeTimeString(yesterday)).toBe("Yesterday");
      expect(getRelativeTimeString(weekAgo)).toBe("1 week ago");
    });
    it("should calculate week start correctly", function () {
      var getWeekStart = service.getWeekStart.bind(service);
      expect(getWeekStart("2024-01-03")).toBe("2024-01-01");
      expect(getWeekStart("2024-01-07")).toBe("2024-01-01");
      expect(getWeekStart("2024-01-01")).toBe("2024-01-01");
    });
    it("should calculate week end correctly", function () {
      var getWeekEnd = service.getWeekEnd.bind(service);
      expect(getWeekEnd("2024-01-01")).toBe("2024-01-07");
    });
  });
});
describe("completionService singleton", function () {
  it("should export a singleton instance", function () {
    expect(_completionService.completionService).toBeInstanceOf(_completionService.CompletionService);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJkYiIsIkFQUF9JRCIsImNvbGxlY3Rpb24iLCJqZXN0IiwiZm4iLCJkb2MiLCJnZXREb2NzIiwicXVlcnkiLCJ3aGVyZSIsIm9yZGVyQnkiLCJydW5UcmFuc2FjdGlvbiIsInNlcnZlclRpbWVzdGFtcCIsInNlY29uZHMiLCJEYXRlIiwibm93IiwiVGltZXN0YW1wIiwidG9NaWxsaXMiLCJ0b0RhdGUiLCJmcm9tRGF0ZSIsImRhdGUiLCJnZXRUaW1lIiwiZ2V0SGFiaXRDb21wbGV0aW9uc0NvbGxlY3Rpb24iLCJwYXRoIiwiZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlIiwiZXJyb3IiLCJtZXNzYWdlIiwicmV0cnlXaXRoQmFja29mZiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiZGVmYXVsdCIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9maXJlc3RvcmUiLCJfY29tcGxldGlvblNlcnZpY2UiLCJfZGF0ZVV0aWxzIiwiX3JlcXVpcmUzIiwiZGVzY3JpYmUiLCJzZXJ2aWNlIiwibW9ja1VzZXJJZCIsIm1vY2tIYWJpdElkIiwibW9ja1RpbWV6b25lIiwiZ2V0VXNlclRpbWV6b25lIiwiYmVmb3JlRWFjaCIsIkNvbXBsZXRpb25TZXJ2aWNlIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwiY29tcGxldGlvbiIsImhhYml0SWQiLCJ1c2VySWQiLCJjb21wbGV0ZWRBdCIsInRpbWV6b25lIiwiZGlmZmljdWx0eSIsImV4cGVjdCIsInJlY29yZENvbXBsZXRpb24iLCJyZWplY3RzIiwidG9UaHJvdyIsImZ1dHVyZURhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImNhbGN1bGF0ZUNvbXBsZXRpb25SYXRlIiwiX3JlcXVpcmUiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRvY3MiLCJyZXN1bHQiLCJyYXRlIiwidG9CZSIsInRvdGFsRGF5cyIsImNvbXBsZXRlZERheXMiLCJnZXRDb21wbGV0aW9uSGlzdG9yeSIsIl9yZXF1aXJlMiIsImNvbXBsZXRpb25zIiwidG9FcXVhbCIsInRvdGFsQ291bnQiLCJwZXJpb2QiLCJnZXRDb21wbGV0aW9uRGV0YWlsIiwiZ2V0R3JvdXBlZENvbXBsZXRpb25zIiwiZ2V0Q29tcGxldGlvblN0YXRpc3RpY3MiLCJ0b2RheSIsInllc3RlcmRheSIsIndlZWtBZ28iLCJnZXRSZWxhdGl2ZVRpbWVTdHJpbmciLCJiaW5kIiwiZ2V0V2Vla1N0YXJ0IiwiZ2V0V2Vla0VuZCIsImNvbXBsZXRpb25TZXJ2aWNlIiwidG9CZUluc3RhbmNlT2YiXSwic291cmNlcyI6WyJjb21wbGV0aW9uU2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRpbWVzdGFtcCB9IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7XG4gICAgQ29tcGxldGlvblNlcnZpY2UsXG4gICAgY29tcGxldGlvblNlcnZpY2UsXG59IGZyb20gXCIuLi9zZXJ2aWNlcy9maXJlYmFzZS9jb21wbGV0aW9uU2VydmljZVwiO1xuaW1wb3J0IHsgZ2V0VXNlclRpbWV6b25lIH0gZnJvbSBcIi4uL3V0aWxzL2RhdGVVdGlsc1wiO1xuXG4vLyBNb2NrIEZpcmViYXNlXG5qZXN0Lm1vY2soXCIuLi9maXJlYmFzZUNvbmZpZ1wiLCAoKSA9PiAoe1xuICAgIGRiOiB7fSxcbiAgICBBUFBfSUQ6IFwidGVzdC1hcHBcIixcbn0pKTtcblxuamVzdC5tb2NrKFwiZmlyZWJhc2UvZmlyZXN0b3JlXCIsICgpID0+ICh7XG4gICAgY29sbGVjdGlvbjogamVzdC5mbigpLFxuICAgIGRvYzogamVzdC5mbigpLFxuICAgIGdldERvY3M6IGplc3QuZm4oKSxcbiAgICBxdWVyeTogamVzdC5mbigpLFxuICAgIHdoZXJlOiBqZXN0LmZuKCksXG4gICAgb3JkZXJCeTogamVzdC5mbigpLFxuICAgIHJ1blRyYW5zYWN0aW9uOiBqZXN0LmZuKCksXG4gICAgc2VydmVyVGltZXN0YW1wOiBqZXN0LmZuKCgpID0+ICh7IHNlY29uZHM6IERhdGUubm93KCkgLyAxMDAwIH0pKSxcbiAgICBUaW1lc3RhbXA6IHtcbiAgICAgICAgbm93OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgICBzZWNvbmRzOiBEYXRlLm5vdygpIC8gMTAwMCxcbiAgICAgICAgICAgIHRvTWlsbGlzOiAoKSA9PiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgdG9EYXRlOiAoKSA9PiBuZXcgRGF0ZSgpLFxuICAgICAgICB9KSksXG4gICAgICAgIGZyb21EYXRlOiBqZXN0LmZuKChkYXRlOiBEYXRlKSA9PiAoe1xuICAgICAgICAgICAgc2Vjb25kczogZGF0ZS5nZXRUaW1lKCkgLyAxMDAwLFxuICAgICAgICAgICAgdG9NaWxsaXM6ICgpID0+IGRhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgdG9EYXRlOiAoKSA9PiBkYXRlLFxuICAgICAgICB9KSksXG4gICAgfSxcbn0pKTtcblxuamVzdC5tb2NrKFwiLi4vc2VydmljZXMvZmlyZWJhc2UvY29sbGVjdGlvbnNcIiwgKCkgPT4gKHtcbiAgICBnZXRIYWJpdENvbXBsZXRpb25zQ29sbGVjdGlvbjogamVzdC5mbigoKSA9PiAoeyBwYXRoOiBcImNvbXBsZXRpb25zXCIgfSkpLFxufSkpO1xuXG5qZXN0Lm1vY2soXCIuLi91dGlscy9lcnJvckhhbmRsaW5nXCIsICgpID0+ICh7XG4gICAgZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlOiBqZXN0LmZuKChlcnJvcikgPT4gZXJyb3IubWVzc2FnZSksXG4gICAgcmV0cnlXaXRoQmFja29mZjogamVzdC5mbigoZm4pID0+IGZuKCkpLFxufSkpO1xuXG5kZXNjcmliZShcIkNvbXBsZXRpb25TZXJ2aWNlXCIsICgpID0+IHtcbiAgICBsZXQgc2VydmljZTogQ29tcGxldGlvblNlcnZpY2U7XG4gICAgY29uc3QgbW9ja1VzZXJJZCA9IFwidXNlcjEyM1wiO1xuICAgIGNvbnN0IG1vY2tIYWJpdElkID0gXCJoYWJpdDQ1NlwiO1xuICAgIGNvbnN0IG1vY2tUaW1lem9uZSA9IGdldFVzZXJUaW1lem9uZSgpO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIHNlcnZpY2UgPSBuZXcgQ29tcGxldGlvblNlcnZpY2UoKTtcbiAgICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcInJlY29yZENvbXBsZXRpb25cIiwgKCkgPT4ge1xuICAgICAgICBpdChcInNob3VsZCB0aHJvdyBlcnJvciBmb3IgbWlzc2luZyBoYWJpdElkXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb24gPSB7XG4gICAgICAgICAgICAgICAgaGFiaXRJZDogXCJcIixcbiAgICAgICAgICAgICAgICB1c2VySWQ6IG1vY2tVc2VySWQsXG4gICAgICAgICAgICAgICAgY29tcGxldGVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICAgICAgICAgICAgICB0aW1lem9uZTogbW9ja1RpbWV6b25lLFxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IFwiZWFzeVwiIGFzIGNvbnN0LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVjb3JkQ29tcGxldGlvbihjb21wbGV0aW9uKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAgICAgICAgIFwiSGFiaXQgSUQgYW5kIFVzZXIgSUQgYXJlIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCB0aHJvdyBlcnJvciBmb3IgbWlzc2luZyB1c2VySWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbiA9IHtcbiAgICAgICAgICAgICAgICBoYWJpdElkOiBtb2NrSGFiaXRJZCxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgY29tcGxldGVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICAgICAgICAgICAgICB0aW1lem9uZTogbW9ja1RpbWV6b25lLFxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IFwiZWFzeVwiIGFzIGNvbnN0LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVjb3JkQ29tcGxldGlvbihjb21wbGV0aW9uKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAgICAgICAgIFwiSGFiaXQgSUQgYW5kIFVzZXIgSUQgYXJlIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCB0aHJvdyBlcnJvciBmb3IgZnV0dXJlIGNvbXBsZXRpb24gZGF0ZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZnV0dXJlRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBmdXR1cmVEYXRlLnNldERhdGUoZnV0dXJlRGF0ZS5nZXREYXRlKCkgKyAxKTtcblxuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbiA9IHtcbiAgICAgICAgICAgICAgICBoYWJpdElkOiBtb2NrSGFiaXRJZCxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IG1vY2tVc2VySWQsXG4gICAgICAgICAgICAgICAgY29tcGxldGVkQXQ6IFRpbWVzdGFtcC5mcm9tRGF0ZShmdXR1cmVEYXRlKSxcbiAgICAgICAgICAgICAgICB0aW1lem9uZTogbW9ja1RpbWV6b25lLFxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IFwiZWFzeVwiIGFzIGNvbnN0LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVjb3JkQ29tcGxldGlvbihjb21wbGV0aW9uKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAgICAgICAgIFwiQ2Fubm90IHJlY29yZCBjb21wbGV0aW9ucyBmb3IgZnV0dXJlIGRhdGVzXCIsXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiY2FsY3VsYXRlQ29tcGxldGlvblJhdGVcIiwgKCkgPT4ge1xuICAgICAgICBpdChcInNob3VsZCB0aHJvdyBlcnJvciBmb3IgbWlzc2luZyBwYXJhbWV0ZXJzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmNhbGN1bGF0ZUNvbXBsZXRpb25SYXRlKFxuICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBtb2NrVXNlcklkLFxuICAgICAgICAgICAgICAgICAgICBcIjIwMjQtMDEtMDFcIixcbiAgICAgICAgICAgICAgICAgICAgXCIyMDI0LTAxLTA3XCIsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAgICAgICAgIFwiQWxsIHBhcmFtZXRlcnMgYXJlIHJlcXVpcmVkIGZvciBjb21wbGV0aW9uIHJhdGUgY2FsY3VsYXRpb25cIixcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmNhbGN1bGF0ZUNvbXBsZXRpb25SYXRlKFxuICAgICAgICAgICAgICAgICAgICBtb2NrSGFiaXRJZCxcbiAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgXCIyMDI0LTAxLTAxXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiMjAyNC0wMS0wN1wiLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICApLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgICAgICAgICBcIkFsbCBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZCBmb3IgY29tcGxldGlvbiByYXRlIGNhbGN1bGF0aW9uXCIsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgICAgICAgc2VydmljZS5jYWxjdWxhdGVDb21wbGV0aW9uUmF0ZShcbiAgICAgICAgICAgICAgICAgICAgbW9ja0hhYml0SWQsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiMjAyNC0wMS0wN1wiLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICApLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgICAgICAgICBcIkFsbCBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZCBmb3IgY29tcGxldGlvbiByYXRlIGNhbGN1bGF0aW9uXCIsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgICAgICAgc2VydmljZS5jYWxjdWxhdGVDb21wbGV0aW9uUmF0ZShcbiAgICAgICAgICAgICAgICAgICAgbW9ja0hhYml0SWQsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgICAgICAgICAgICAgIFwiMjAyNC0wMS0wMVwiLFxuICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICApLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgICAgICAgICBcIkFsbCBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZCBmb3IgY29tcGxldGlvbiByYXRlIGNhbGN1bGF0aW9uXCIsXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBjYWxjdWxhdGUgMCUgcmF0ZSBmb3Igbm8gY29tcGxldGlvbnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gTW9jayBlbXB0eSByZXN1bHRzXG4gICAgICAgICAgICBjb25zdCB7IGdldERvY3MgfSA9IHJlcXVpcmUoXCJmaXJlYmFzZS9maXJlc3RvcmVcIik7XG4gICAgICAgICAgICBnZXREb2NzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgICBkb2NzOiBbXSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNhbGN1bGF0ZUNvbXBsZXRpb25SYXRlKFxuICAgICAgICAgICAgICAgIG1vY2tIYWJpdElkLFxuICAgICAgICAgICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgICAgICAgICAgXCIyMDI0LTAxLTAxXCIsXG4gICAgICAgICAgICAgICAgXCIyMDI0LTAxLTA3XCIsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LnJhdGUpLnRvQmUoMCk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LnRvdGFsRGF5cykudG9CZSg3KTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuY29tcGxldGVkRGF5cykudG9CZSgwKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImdldENvbXBsZXRpb25IaXN0b3J5XCIsICgpID0+IHtcbiAgICAgICAgaXQoXCJzaG91bGQgdGhyb3cgZXJyb3IgZm9yIG1pc3NpbmcgaGFiaXRJZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgICAgICAgc2VydmljZS5nZXRDb21wbGV0aW9uSGlzdG9yeShcIlwiLCBtb2NrVXNlcklkKSxcbiAgICAgICAgICAgICkucmVqZWN0cy50b1Rocm93KFwiSGFiaXQgSUQgYW5kIFVzZXIgSUQgYXJlIHJlcXVpcmVkXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCB0aHJvdyBlcnJvciBmb3IgbWlzc2luZyB1c2VySWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgICAgICAgIHNlcnZpY2UuZ2V0Q29tcGxldGlvbkhpc3RvcnkobW9ja0hhYml0SWQsIFwiXCIpLFxuICAgICAgICAgICAgKS5yZWplY3RzLnRvVGhyb3coXCJIYWJpdCBJRCBhbmQgVXNlciBJRCBhcmUgcmVxdWlyZWRcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBlbXB0eSBoaXN0b3J5IGZvciBubyBjb21wbGV0aW9uc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBNb2NrIGVtcHR5IHJlc3VsdHNcbiAgICAgICAgICAgIGNvbnN0IHsgZ2V0RG9jcyB9ID0gcmVxdWlyZShcImZpcmViYXNlL2ZpcmVzdG9yZVwiKTtcbiAgICAgICAgICAgIGdldERvY3MubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgIGRvY3M6IFtdLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0Q29tcGxldGlvbkhpc3RvcnkoXG4gICAgICAgICAgICAgICAgbW9ja0hhYml0SWQsXG4gICAgICAgICAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuY29tcGxldGlvbnMpLnRvRXF1YWwoW10pO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC50b3RhbENvdW50KS50b0JlKDApO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5wZXJpb2QpLnRvQmUoXCJObyBjb21wbGV0aW9uc1wiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImdldENvbXBsZXRpb25EZXRhaWxcIiwgKCkgPT4ge1xuICAgICAgICBpdChcInNob3VsZCB0aHJvdyBlcnJvciBmb3IgbWlzc2luZyBjb21wbGV0aW9uSWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZ2V0Q29tcGxldGlvbkRldGFpbChcIlwiLCBtb2NrVXNlcklkKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAgICAgICAgIFwiQ29tcGxldGlvbiBJRCBhbmQgVXNlciBJRCBhcmUgcmVxdWlyZWRcIixcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHRocm93IGVycm9yIGZvciBtaXNzaW5nIHVzZXJJZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgICAgICAgc2VydmljZS5nZXRDb21wbGV0aW9uRGV0YWlsKFwiY29tcGxldGlvbjEyM1wiLCBcIlwiKSxcbiAgICAgICAgICAgICkucmVqZWN0cy50b1Rocm93KFwiQ29tcGxldGlvbiBJRCBhbmQgVXNlciBJRCBhcmUgcmVxdWlyZWRcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJnZXRHcm91cGVkQ29tcGxldGlvbnNcIiwgKCkgPT4ge1xuICAgICAgICBpdChcInNob3VsZCB0aHJvdyBlcnJvciBmb3IgbWlzc2luZyBoYWJpdElkXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmdldEdyb3VwZWRDb21wbGV0aW9ucyhcIlwiLCBtb2NrVXNlcklkKSxcbiAgICAgICAgICAgICkucmVqZWN0cy50b1Rocm93KFwiSGFiaXQgSUQgYW5kIFVzZXIgSUQgYXJlIHJlcXVpcmVkXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCB0aHJvdyBlcnJvciBmb3IgbWlzc2luZyB1c2VySWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgICAgICAgIHNlcnZpY2UuZ2V0R3JvdXBlZENvbXBsZXRpb25zKG1vY2tIYWJpdElkLCBcIlwiKSxcbiAgICAgICAgICAgICkucmVqZWN0cy50b1Rocm93KFwiSGFiaXQgSUQgYW5kIFVzZXIgSUQgYXJlIHJlcXVpcmVkXCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiZ2V0Q29tcGxldGlvblN0YXRpc3RpY3NcIiwgKCkgPT4ge1xuICAgICAgICBpdChcInNob3VsZCB0aHJvdyBlcnJvciBmb3IgbWlzc2luZyBoYWJpdElkXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmdldENvbXBsZXRpb25TdGF0aXN0aWNzKFwiXCIsIG1vY2tVc2VySWQpLFxuICAgICAgICAgICAgKS5yZWplY3RzLnRvVGhyb3coXCJIYWJpdCBJRCBhbmQgVXNlciBJRCBhcmUgcmVxdWlyZWRcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHRocm93IGVycm9yIGZvciBtaXNzaW5nIHVzZXJJZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgICAgICAgc2VydmljZS5nZXRDb21wbGV0aW9uU3RhdGlzdGljcyhtb2NrSGFiaXRJZCwgXCJcIiksXG4gICAgICAgICAgICApLnJlamVjdHMudG9UaHJvdyhcIkhhYml0IElEIGFuZCBVc2VyIElEIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcInByaXZhdGUgaGVscGVyIG1ldGhvZHNcIiwgKCkgPT4ge1xuICAgICAgICBpdChcInNob3VsZCBjYWxjdWxhdGUgcmVsYXRpdmUgdGltZSBjb3JyZWN0bHlcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gVGltZXN0YW1wLmZyb21EYXRlKG5vdyk7XG4gICAgICAgICAgICBjb25zdCB5ZXN0ZXJkYXkgPSBUaW1lc3RhbXAuZnJvbURhdGUoXG4gICAgICAgICAgICAgICAgbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHdlZWtBZ28gPSBUaW1lc3RhbXAuZnJvbURhdGUoXG4gICAgICAgICAgICAgICAgbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIEFjY2VzcyBwcml2YXRlIG1ldGhvZCB0aHJvdWdoIGFueSBjYXN0aW5nIGZvciB0ZXN0aW5nXG4gICAgICAgICAgICBjb25zdCBnZXRSZWxhdGl2ZVRpbWVTdHJpbmcgPSAoc2VydmljZSBhcyBhbnkpLmdldFJlbGF0aXZlVGltZVN0cmluZy5iaW5kKFxuICAgICAgICAgICAgICAgIHNlcnZpY2UsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBleHBlY3QoZ2V0UmVsYXRpdmVUaW1lU3RyaW5nKHRvZGF5KSkudG9CZShcIlRvZGF5XCIpO1xuICAgICAgICAgICAgZXhwZWN0KGdldFJlbGF0aXZlVGltZVN0cmluZyh5ZXN0ZXJkYXkpKS50b0JlKFwiWWVzdGVyZGF5XCIpO1xuICAgICAgICAgICAgZXhwZWN0KGdldFJlbGF0aXZlVGltZVN0cmluZyh3ZWVrQWdvKSkudG9CZShcIjEgd2VlayBhZ29cIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGNhbGN1bGF0ZSB3ZWVrIHN0YXJ0IGNvcnJlY3RseVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBBY2Nlc3MgcHJpdmF0ZSBtZXRob2QgdGhyb3VnaCBhbnkgY2FzdGluZyBmb3IgdGVzdGluZ1xuICAgICAgICAgICAgY29uc3QgZ2V0V2Vla1N0YXJ0ID0gKHNlcnZpY2UgYXMgYW55KS5nZXRXZWVrU3RhcnQuYmluZChzZXJ2aWNlKTtcblxuICAgICAgICAgICAgLy8gVGVzdCB2YXJpb3VzIGRheXMgb2YgdGhlIHdlZWtcbiAgICAgICAgICAgIGV4cGVjdChnZXRXZWVrU3RhcnQoXCIyMDI0LTAxLTAzXCIpKS50b0JlKFwiMjAyNC0wMS0wMVwiKTsgLy8gV2VkbmVzZGF5IC0+IE1vbmRheVxuICAgICAgICAgICAgZXhwZWN0KGdldFdlZWtTdGFydChcIjIwMjQtMDEtMDdcIikpLnRvQmUoXCIyMDI0LTAxLTAxXCIpOyAvLyBTdW5kYXkgLT4gTW9uZGF5XG4gICAgICAgICAgICBleHBlY3QoZ2V0V2Vla1N0YXJ0KFwiMjAyNC0wMS0wMVwiKSkudG9CZShcIjIwMjQtMDEtMDFcIik7IC8vIE1vbmRheSAtPiBNb25kYXlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgY2FsY3VsYXRlIHdlZWsgZW5kIGNvcnJlY3RseVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBBY2Nlc3MgcHJpdmF0ZSBtZXRob2QgdGhyb3VnaCBhbnkgY2FzdGluZyBmb3IgdGVzdGluZ1xuICAgICAgICAgICAgY29uc3QgZ2V0V2Vla0VuZCA9IChzZXJ2aWNlIGFzIGFueSkuZ2V0V2Vla0VuZC5iaW5kKHNlcnZpY2UpO1xuXG4gICAgICAgICAgICBleHBlY3QoZ2V0V2Vla0VuZChcIjIwMjQtMDEtMDFcIikpLnRvQmUoXCIyMDI0LTAxLTA3XCIpOyAvLyBNb25kYXkgLT4gU3VuZGF5XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbmRlc2NyaWJlKFwiY29tcGxldGlvblNlcnZpY2Ugc2luZ2xldG9uXCIsICgpID0+IHtcbiAgICBpdChcInNob3VsZCBleHBvcnQgYSBzaW5nbGV0b24gaW5zdGFuY2VcIiwgKCkgPT4ge1xuICAgICAgICBleHBlY3QoY29tcGxldGlvblNlcnZpY2UpLnRvQmVJbnN0YW5jZU9mKENvbXBsZXRpb25TZXJ2aWNlKTtcbiAgICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFRQUEsV0FBQSxHQUFLQyxJQUFJLHNCQUFzQjtFQUFBLE9BQU87SUFDbENDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDTkMsTUFBTSxFQUFFO0VBQ1osQ0FBQztBQUFBLENBQUMsQ0FBQztBQUVISCxXQUFBLEdBQUtDLElBQUksQ0FBQyxv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