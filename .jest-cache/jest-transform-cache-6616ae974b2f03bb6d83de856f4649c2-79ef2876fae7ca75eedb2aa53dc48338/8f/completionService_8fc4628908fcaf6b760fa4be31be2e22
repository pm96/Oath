0260b361383113037d99d39ca65dc361
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.completionService = exports.CompletionService = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _firestore = require("firebase/firestore");
var _firebaseConfig = require("../../firebaseConfig");
var _dateUtils = require("../../utils/dateUtils");
var _errorHandling = require("../../utils/errorHandling");
var _collections = require("./collections");
var _habitStreakSchemas = require("./habitStreakSchemas");
var CompletionService = exports.CompletionService = function () {
  function CompletionService() {
    (0, _classCallCheck2.default)(this, CompletionService);
  }
  return (0, _createClass2.default)(CompletionService, [{
    key: "recordCompletion",
    value: (function () {
      var _recordCompletion = (0, _asyncToGenerator2.default)(function* (completion) {
        if (!completion.habitId || !completion.userId) {
          throw new Error("Habit ID and User ID are required");
        }
        var userTimezone = completion.timezone || (0, _dateUtils.getUserTimezone)();
        var completionDateString = (0, _dateUtils.timestampToDateString)(completion.completedAt, userTimezone);
        var currentDateString = (0, _dateUtils.getCurrentDateString)(userTimezone);
        if (completionDateString > currentDateString) {
          throw new Error("Cannot record completions for future dates");
        }
        try {
          return yield (0, _errorHandling.retryWithBackoff)((0, _asyncToGenerator2.default)(function* () {
            return yield (0, _firestore.runTransaction)(_firebaseConfig.db, function () {
              var _ref2 = (0, _asyncToGenerator2.default)(function* (transaction) {
                var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
                var existingCompletionsQuery = (0, _firestore.query)(completionsCollection, (0, _firestore.where)("habitId", "==", completion.habitId), (0, _firestore.where)("userId", "==", completion.userId));
                var existingSnapshot = yield (0, _firestore.getDocs)(existingCompletionsQuery);
                var existingCompletions = existingSnapshot.docs.map(function (doc) {
                  return (0, _habitStreakSchemas.transformFirestoreToCompletion)(doc.id, doc.data());
                }).filter(function (comp) {
                  var compDateString = (0, _dateUtils.timestampToDateString)(comp.completedAt, userTimezone);
                  return compDateString === completionDateString;
                });
                if (existingCompletions.length > 0) {
                  throw new Error("Habit already completed for this date");
                }
                var completionData = {
                  habitId: completion.habitId,
                  userId: completion.userId,
                  completedAt: completion.completedAt,
                  timezone: userTimezone,
                  notes: completion.notes || "",
                  difficulty: completion.difficulty,
                  createdAt: (0, _firestore.serverTimestamp)()
                };
                var completionRef = (0, _firestore.doc)(completionsCollection);
                transaction.set(completionRef, completionData);
                var newCompletion = Object.assign({
                  id: completionRef.id
                }, completion, {
                  timezone: userTimezone
                });
                return newCompletion;
              });
              return function (_x2) {
                return _ref2.apply(this, arguments);
              };
            }());
          }));
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to record completion: ${message}`);
        }
      });
      function recordCompletion(_x) {
        return _recordCompletion.apply(this, arguments);
      }
      return recordCompletion;
    }())
  }, {
    key: "getCompletionHistory",
    value: (function () {
      var _getCompletionHistory = (0, _asyncToGenerator2.default)(function* (habitId, userId) {
        var _this = this;
        var limit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 50;
        var startAfter = arguments.length > 3 ? arguments[3] : undefined;
        if (!habitId || !userId) {
          throw new Error("Habit ID and User ID are required");
        }
        try {
          return yield (0, _errorHandling.retryWithBackoff)((0, _asyncToGenerator2.default)(function* () {
            var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
            var completionsQuery = (0, _firestore.query)(completionsCollection, (0, _firestore.where)("habitId", "==", habitId), (0, _firestore.where)("userId", "==", userId), (0, _firestore.orderBy)("completedAt", "desc"));
            if (startAfter) {
              completionsQuery = (0, _firestore.query)(completionsQuery, (0, _firestore.where)("completedAt", "<", startAfter));
            }
            var completionsSnapshot = yield (0, _firestore.getDocs)(completionsQuery);
            var completions = completionsSnapshot.docs.slice(0, limit).map(function (doc) {
              return (0, _habitStreakSchemas.transformFirestoreToCompletion)(doc.id, doc.data());
            });
            var totalCount = completions.length;
            var period = _this.calculatePeriodFromCompletions(completions);
            var completionRate = yield _this.calculateCompletionRate(habitId, userId, period.startDate, period.endDate);
            return {
              completions: completions,
              totalCount: totalCount,
              completionRate: completionRate.rate,
              period: period.description
            };
          }));
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to get completion history: ${message}`);
        }
      });
      function getCompletionHistory(_x3, _x4) {
        return _getCompletionHistory.apply(this, arguments);
      }
      return getCompletionHistory;
    }())
  }, {
    key: "calculateCompletionRate",
    value: (function () {
      var _calculateCompletionRate = (0, _asyncToGenerator2.default)(function* (habitId, userId, startDate, endDate) {
        if (!habitId || !userId || !startDate || !endDate) {
          throw new Error("All parameters are required for completion rate calculation");
        }
        try {
          return yield (0, _errorHandling.retryWithBackoff)((0, _asyncToGenerator2.default)(function* () {
            var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
            var completionsQuery = (0, _firestore.query)(completionsCollection, (0, _firestore.where)("habitId", "==", habitId), (0, _firestore.where)("userId", "==", userId));
            var completionsSnapshot = yield (0, _firestore.getDocs)(completionsQuery);
            var allCompletions = completionsSnapshot.docs.map(function (doc) {
              return (0, _habitStreakSchemas.transformFirestoreToCompletion)(doc.id, doc.data());
            });
            var timezone = (0, _dateUtils.getUserTimezone)();
            var completionsInRange = allCompletions.filter(function (completion) {
              var completionDate = (0, _dateUtils.timestampToDateString)(completion.completedAt, timezone);
              return completionDate >= startDate && completionDate <= endDate;
            });
            var start = new Date(startDate);
            var end = new Date(endDate);
            var totalDays = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;
            var uniqueCompletionDates = new Set(completionsInRange.map(function (completion) {
              return (0, _dateUtils.timestampToDateString)(completion.completedAt, timezone);
            }));
            var completedDays = uniqueCompletionDates.size;
            var rate = totalDays > 0 ? completedDays / totalDays * 100 : 0;
            return {
              period: `${startDate} to ${endDate}`,
              startDate: startDate,
              endDate: endDate,
              totalDays: totalDays,
              completedDays: completedDays,
              rate: Math.round(rate * 100) / 100
            };
          }));
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to calculate completion rate: ${message}`);
        }
      });
      function calculateCompletionRate(_x5, _x6, _x7, _x8) {
        return _calculateCompletionRate.apply(this, arguments);
      }
      return calculateCompletionRate;
    }())
  }, {
    key: "getGroupedCompletions",
    value: (function () {
      var _getGroupedCompletions = (0, _asyncToGenerator2.default)(function* (habitId, userId) {
        var _this2 = this;
        var months = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 6;
        if (!habitId || !userId) {
          throw new Error("Habit ID and User ID are required");
        }
        try {
          return yield (0, _errorHandling.retryWithBackoff)((0, _asyncToGenerator2.default)(function* () {
            var timezone = (0, _dateUtils.getUserTimezone)();
            var endDate = (0, _dateUtils.getCurrentDateString)(timezone);
            var startDate = (0, _dateUtils.formatDateToString)(new Date(Date.now() - months * 30 * 24 * 60 * 60 * 1000), timezone);
            var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
            var completionsQuery = (0, _firestore.query)(completionsCollection, (0, _firestore.where)("habitId", "==", habitId), (0, _firestore.where)("userId", "==", userId), (0, _firestore.orderBy)("completedAt", "desc"));
            var completionsSnapshot = yield (0, _firestore.getDocs)(completionsQuery);
            var allCompletions = completionsSnapshot.docs.map(function (doc) {
              return (0, _habitStreakSchemas.transformFirestoreToCompletion)(doc.id, doc.data());
            }).filter(function (completion) {
              var completionDate = (0, _dateUtils.timestampToDateString)(completion.completedAt, timezone);
              return completionDate >= startDate && completionDate <= endDate;
            });
            var weeklyGroups = _this2.groupCompletionsByWeek(allCompletions, timezone);
            var monthlyGroups = _this2.groupCompletionsByMonth(allCompletions, timezone);
            return {
              weekly: weeklyGroups,
              monthly: monthlyGroups
            };
          }));
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to get grouped completions: ${message}`);
        }
      });
      function getGroupedCompletions(_x9, _x0) {
        return _getGroupedCompletions.apply(this, arguments);
      }
      return getGroupedCompletions;
    }())
  }, {
    key: "getCompletionDetail",
    value: (function () {
      var _getCompletionDetail = (0, _asyncToGenerator2.default)(function* (completionId, userId) {
        var _this3 = this;
        if (!completionId || !userId) {
          throw new Error("Completion ID and User ID are required");
        }
        try {
          return yield (0, _errorHandling.retryWithBackoff)((0, _asyncToGenerator2.default)(function* () {
            var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
            var completionDoc = yield (0, _firestore.getDocs)((0, _firestore.query)(completionsCollection, (0, _firestore.where)("__name__", "==", completionId)));
            if (completionDoc.empty) {
              throw new Error("Completion not found");
            }
            var completionData = completionDoc.docs[0].data();
            var completion = (0, _habitStreakSchemas.transformFirestoreToCompletion)(completionDoc.docs[0].id, completionData);
            if (!(0, _habitStreakSchemas.validateUserOwnership)(userId, completion.userId)) {
              throw new Error("Unauthorized access to completion data");
            }
            var timezone = completion.timezone || (0, _dateUtils.getUserTimezone)();
            var completionDate = (0, _dateUtils.timestampToDateString)(completion.completedAt, timezone);
            return {
              completion: completion,
              dayOfWeek: (0, _dateUtils.getDayName)(completionDate),
              timeOfDay: completion.completedAt.toDate().toLocaleTimeString(),
              relativeTime: _this3.getRelativeTimeString(completion.completedAt)
            };
          }));
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to get completion detail: ${message}`);
        }
      });
      function getCompletionDetail(_x1, _x10) {
        return _getCompletionDetail.apply(this, arguments);
      }
      return getCompletionDetail;
    }())
  }, {
    key: "getCompletionStatistics",
    value: (function () {
      var _getCompletionStatistics = (0, _asyncToGenerator2.default)(function* (habitId, userId) {
        if (!habitId || !userId) {
          throw new Error("Habit ID and User ID are required");
        }
        try {
          var timezone = (0, _dateUtils.getUserTimezone)();
          var today = (0, _dateUtils.getCurrentDateString)(timezone);
          var weekStart = (0, _dateUtils.formatDateToString)(new Date(Date.now() - 7 * 24 * 60 * 60 * 1000), timezone);
          var monthStart = (0, _dateUtils.formatDateToString)(new Date(Date.now() - 30 * 24 * 60 * 60 * 1000), timezone);
          var quarterStart = (0, _dateUtils.formatDateToString)(new Date(Date.now() - 90 * 24 * 60 * 60 * 1000), timezone);
          var firstCompletion = yield this.getFirstCompletion(habitId, userId);
          var allTimeStart = firstCompletion ? (0, _dateUtils.timestampToDateString)(firstCompletion.completedAt, timezone) : today;
          var _yield$Promise$all = yield Promise.all([this.calculateCompletionRate(habitId, userId, weekStart, today), this.calculateCompletionRate(habitId, userId, monthStart, today), this.calculateCompletionRate(habitId, userId, quarterStart, today), this.calculateCompletionRate(habitId, userId, allTimeStart, today)]),
            _yield$Promise$all2 = (0, _slicedToArray2.default)(_yield$Promise$all, 4),
            weekly = _yield$Promise$all2[0],
            monthly = _yield$Promise$all2[1],
            quarterly = _yield$Promise$all2[2],
            allTime = _yield$Promise$all2[3];
          return {
            weekly: weekly,
            monthly: monthly,
            quarterly: quarterly,
            allTime: allTime
          };
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to get completion statistics: ${message}`);
        }
      });
      function getCompletionStatistics(_x11, _x12) {
        return _getCompletionStatistics.apply(this, arguments);
      }
      return getCompletionStatistics;
    }())
  }, {
    key: "groupCompletionsByWeek",
    value: function groupCompletionsByWeek(completions, timezone) {
      var _this4 = this;
      var weekGroups = new Map();
      completions.forEach(function (completion) {
        var completionDate = (0, _dateUtils.timestampToDateString)(completion.completedAt, timezone);
        var weekStart = _this4.getWeekStart(completionDate);
        var weekKey = weekStart;
        if (!weekGroups.has(weekKey)) {
          weekGroups.set(weekKey, []);
        }
        weekGroups.get(weekKey).push(completion);
      });
      return Array.from(weekGroups.entries()).map(function (_ref7) {
        var _ref8 = (0, _slicedToArray2.default)(_ref7, 2),
          weekStart = _ref8[0],
          weekCompletions = _ref8[1];
        var weekEnd = _this4.getWeekEnd(weekStart);
        var uniqueDates = new Set(weekCompletions.map(function (c) {
          return (0, _dateUtils.timestampToDateString)(c.completedAt, timezone);
        }));
        return {
          weekStart: weekStart,
          weekEnd: weekEnd,
          completions: weekCompletions,
          completionCount: weekCompletions.length,
          completionRate: uniqueDates.size / 7 * 100
        };
      }).sort(function (a, b) {
        return b.weekStart.localeCompare(a.weekStart);
      });
    }
  }, {
    key: "groupCompletionsByMonth",
    value: function groupCompletionsByMonth(completions, timezone) {
      var monthGroups = new Map();
      completions.forEach(function (completion) {
        var completionDate = (0, _dateUtils.timestampToDateString)(completion.completedAt, timezone);
        var monthKey = completionDate.substring(0, 7);
        if (!monthGroups.has(monthKey)) {
          monthGroups.set(monthKey, []);
        }
        monthGroups.get(monthKey).push(completion);
      });
      return Array.from(monthGroups.entries()).map(function (_ref9) {
        var _ref0 = (0, _slicedToArray2.default)(_ref9, 2),
          month = _ref0[0],
          monthCompletions = _ref0[1];
        var _month$split = month.split("-"),
          _month$split2 = (0, _slicedToArray2.default)(_month$split, 2),
          year = _month$split2[0],
          monthNum = _month$split2[1];
        var monthName = new Date(parseInt(year), parseInt(monthNum) - 1, 1).toLocaleDateString("en-US", {
          month: "long",
          year: "numeric"
        });
        var daysInMonth = new Date(parseInt(year), parseInt(monthNum), 0).getDate();
        var uniqueDates = new Set(monthCompletions.map(function (c) {
          return (0, _dateUtils.timestampToDateString)(c.completedAt, timezone);
        }));
        return {
          month: month,
          monthName: monthName,
          completions: monthCompletions,
          completionCount: monthCompletions.length,
          completionRate: uniqueDates.size / daysInMonth * 100
        };
      }).sort(function (a, b) {
        return b.month.localeCompare(a.month);
      });
    }
  }, {
    key: "getWeekStart",
    value: function getWeekStart(dateString) {
      var date = new Date(dateString);
      var dayOfWeek = date.getDay();
      var daysToMonday = dayOfWeek === 0 ? 6 : dayOfWeek - 1;
      var monday = new Date(date);
      monday.setDate(date.getDate() - daysToMonday);
      return (0, _dateUtils.formatDateToString)(monday);
    }
  }, {
    key: "getWeekEnd",
    value: function getWeekEnd(weekStart) {
      var monday = new Date(weekStart);
      var sunday = new Date(monday);
      sunday.setDate(monday.getDate() + 6);
      return (0, _dateUtils.formatDateToString)(sunday);
    }
  }, {
    key: "calculatePeriodFromCompletions",
    value: function calculatePeriodFromCompletions(completions) {
      if (completions.length === 0) {
        var today = (0, _dateUtils.getCurrentDateString)();
        return {
          startDate: today,
          endDate: today,
          description: "No completions"
        };
      }
      var timezone = (0, _dateUtils.getUserTimezone)();
      var dates = completions.map(function (c) {
        return (0, _dateUtils.timestampToDateString)(c.completedAt, timezone);
      }).sort();
      var startDate = dates[0];
      var endDate = dates[dates.length - 1];
      return {
        startDate: startDate,
        endDate: endDate,
        description: `${startDate} to ${endDate}`
      };
    }
  }, {
    key: "getRelativeTimeString",
    value: function getRelativeTimeString(timestamp) {
      var now = new Date();
      var completionDate = timestamp.toDate();
      var diffMs = now.getTime() - completionDate.getTime();
      var diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
      if (diffDays === 0) {
        return "Today";
      } else if (diffDays === 1) {
        return "Yesterday";
      } else if (diffDays < 7) {
        return `${diffDays} days ago`;
      } else if (diffDays < 30) {
        var weeks = Math.floor(diffDays / 7);
        return weeks === 1 ? "1 week ago" : `${weeks} weeks ago`;
      } else if (diffDays < 365) {
        var months = Math.floor(diffDays / 30);
        return months === 1 ? "1 month ago" : `${months} months ago`;
      } else {
        var years = Math.floor(diffDays / 365);
        return years === 1 ? "1 year ago" : `${years} years ago`;
      }
    }
  }, {
    key: "getFirstCompletion",
    value: (function () {
      var _getFirstCompletion = (0, _asyncToGenerator2.default)(function* (habitId, userId) {
        try {
          var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
          var firstCompletionQuery = (0, _firestore.query)(completionsCollection, (0, _firestore.where)("habitId", "==", habitId), (0, _firestore.where)("userId", "==", userId), (0, _firestore.orderBy)("completedAt", "asc"));
          var snapshot = yield (0, _firestore.getDocs)(firstCompletionQuery);
          if (snapshot.empty) {
            return null;
          }
          var firstDoc = snapshot.docs[0];
          return (0, _habitStreakSchemas.transformFirestoreToCompletion)(firstDoc.id, firstDoc.data());
        } catch (_unused) {
          return null;
        }
      });
      function getFirstCompletion(_x13, _x14) {
        return _getFirstCompletion.apply(this, arguments);
      }
      return getFirstCompletion;
    }())
  }]);
}();
var completionService = exports.completionService = new CompletionService();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZmlyZXN0b3JlIiwicmVxdWlyZSIsIl9maXJlYmFzZUNvbmZpZyIsIl9kYXRlVXRpbHMiLCJfZXJyb3JIYW5kbGluZyIsIl9jb2xsZWN0aW9ucyIsIl9oYWJpdFN0cmVha1NjaGVtYXMiLCJDb21wbGV0aW9uU2VydmljZSIsImV4cG9ydHMiLCJfY2xhc3NDYWxsQ2hlY2syIiwiZGVmYXVsdCIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsIl9yZWNvcmRDb21wbGV0aW9uIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiY29tcGxldGlvbiIsImhhYml0SWQiLCJ1c2VySWQiLCJFcnJvciIsInVzZXJUaW1lem9uZSIsInRpbWV6b25lIiwiZ2V0VXNlclRpbWV6b25lIiwiY29tcGxldGlvbkRhdGVTdHJpbmciLCJ0aW1lc3RhbXBUb0RhdGVTdHJpbmciLCJjb21wbGV0ZWRBdCIsImN1cnJlbnREYXRlU3RyaW5nIiwiZ2V0Q3VycmVudERhdGVTdHJpbmciLCJyZXRyeVdpdGhCYWNrb2ZmIiwicnVuVHJhbnNhY3Rpb24iLCJkYiIsIl9yZWYyIiwidHJhbnNhY3Rpb24iLCJjb21wbGV0aW9uc0NvbGxlY3Rpb24iLCJnZXRIYWJpdENvbXBsZXRpb25zQ29sbGVjdGlvbiIsImV4aXN0aW5nQ29tcGxldGlvbnNRdWVyeSIsInF1ZXJ5Iiwid2hlcmUiLCJleGlzdGluZ1NuYXBzaG90IiwiZ2V0RG9jcyIsImV4aXN0aW5nQ29tcGxldGlvbnMiLCJkb2NzIiwibWFwIiwiZG9jIiwidHJhbnNmb3JtRmlyZXN0b3JlVG9Db21wbGV0aW9uIiwiaWQiLCJkYXRhIiwiZmlsdGVyIiwiY29tcCIsImNvbXBEYXRlU3RyaW5nIiwibGVuZ3RoIiwiY29tcGxldGlvbkRhdGEiLCJub3RlcyIsImRpZmZpY3VsdHkiLCJjcmVhdGVkQXQiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJjb21wbGV0aW9uUmVmIiwic2V0IiwibmV3Q29tcGxldGlvbiIsIk9iamVjdCIsImFzc2lnbiIsIl94MiIsImFwcGx5IiwiYXJndW1lbnRzIiwiZXJyb3IiLCJtZXNzYWdlIiwiZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlIiwicmVjb3JkQ29tcGxldGlvbiIsIl94IiwiX2dldENvbXBsZXRpb25IaXN0b3J5IiwiX3RoaXMiLCJsaW1pdCIsInVuZGVmaW5lZCIsInN0YXJ0QWZ0ZXIiLCJjb21wbGV0aW9uc1F1ZXJ5Iiwib3JkZXJCeSIsImNvbXBsZXRpb25zU25hcHNob3QiLCJjb21wbGV0aW9ucyIsInNsaWNlIiwidG90YWxDb3VudCIsInBlcmlvZCIsImNhbGN1bGF0ZVBlcmlvZEZyb21Db21wbGV0aW9ucyIsImNvbXBsZXRpb25SYXRlIiwiY2FsY3VsYXRlQ29tcGxldGlvblJhdGUiLCJzdGFydERhdGUiLCJlbmREYXRlIiwicmF0ZSIsImRlc2NyaXB0aW9uIiwiZ2V0Q29tcGxldGlvbkhpc3RvcnkiLCJfeDMiLCJfeDQiLCJfY2FsY3VsYXRlQ29tcGxldGlvblJhdGUiLCJhbGxDb21wbGV0aW9ucyIsImNvbXBsZXRpb25zSW5SYW5nZSIsImNvbXBsZXRpb25EYXRlIiwic3RhcnQiLCJEYXRlIiwiZW5kIiwidG90YWxEYXlzIiwiTWF0aCIsImNlaWwiLCJnZXRUaW1lIiwidW5pcXVlQ29tcGxldGlvbkRhdGVzIiwiU2V0IiwiY29tcGxldGVkRGF5cyIsInNpemUiLCJyb3VuZCIsIl94NSIsIl94NiIsIl94NyIsIl94OCIsIl9nZXRHcm91cGVkQ29tcGxldGlvbnMiLCJfdGhpczIiLCJtb250aHMiLCJmb3JtYXREYXRlVG9TdHJpbmciLCJub3ciLCJ3ZWVrbHlHcm91cHMiLCJncm91cENvbXBsZXRpb25zQnlXZWVrIiwibW9udGhseUdyb3VwcyIsImdyb3VwQ29tcGxldGlvbnNCeU1vbnRoIiwid2Vla2x5IiwibW9udGhseSIsImdldEdyb3VwZWRDb21wbGV0aW9ucyIsIl94OSIsIl94MCIsIl9nZXRDb21wbGV0aW9uRGV0YWlsIiwiY29tcGxldGlvbklkIiwiX3RoaXMzIiwiY29tcGxldGlvbkRvYyIsImVtcHR5IiwidmFsaWRhdGVVc2VyT3duZXJzaGlwIiwiZGF5T2ZXZWVrIiwiZ2V0RGF5TmFtZSIsInRpbWVPZkRheSIsInRvRGF0ZSIsInRvTG9jYWxlVGltZVN0cmluZyIsInJlbGF0aXZlVGltZSIsImdldFJlbGF0aXZlVGltZVN0cmluZyIsImdldENvbXBsZXRpb25EZXRhaWwiLCJfeDEiLCJfeDEwIiwiX2dldENvbXBsZXRpb25TdGF0aXN0aWNzIiwidG9kYXkiLCJ3ZWVrU3RhcnQiLCJtb250aFN0YXJ0IiwicXVhcnRlclN0YXJ0IiwiZmlyc3RDb21wbGV0aW9uIiwiZ2V0Rmlyc3RDb21wbGV0aW9uIiwiYWxsVGltZVN0YXJ0IiwiX3lpZWxkJFByb21pc2UkYWxsIiwiUHJvbWlzZSIsImFsbCIsIl95aWVsZCRQcm9taXNlJGFsbDIiLCJfc2xpY2VkVG9BcnJheTIiLCJxdWFydGVybHkiLCJhbGxUaW1lIiwiZ2V0Q29tcGxldGlvblN0YXRpc3RpY3MiLCJfeDExIiwiX3gxMiIsIl90aGlzNCIsIndlZWtHcm91cHMiLCJNYXAiLCJmb3JFYWNoIiwiZ2V0V2Vla1N0YXJ0Iiwid2Vla0tleSIsImhhcyIsImdldCIsInB1c2giLCJBcnJheSIsImZyb20iLCJlbnRyaWVzIiwiX3JlZjciLCJfcmVmOCIsIndlZWtDb21wbGV0aW9ucyIsIndlZWtFbmQiLCJnZXRXZWVrRW5kIiwidW5pcXVlRGF0ZXMiLCJjIiwiY29tcGxldGlvbkNvdW50Iiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsIm1vbnRoR3JvdXBzIiwibW9udGhLZXkiLCJzdWJzdHJpbmciLCJfcmVmOSIsIl9yZWYwIiwibW9udGgiLCJtb250aENvbXBsZXRpb25zIiwiX21vbnRoJHNwbGl0Iiwic3BsaXQiLCJfbW9udGgkc3BsaXQyIiwieWVhciIsIm1vbnRoTnVtIiwibW9udGhOYW1lIiwicGFyc2VJbnQiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJkYXlzSW5Nb250aCIsImdldERhdGUiLCJkYXRlU3RyaW5nIiwiZGF0ZSIsImdldERheSIsImRheXNUb01vbmRheSIsIm1vbmRheSIsInNldERhdGUiLCJzdW5kYXkiLCJkYXRlcyIsInRpbWVzdGFtcCIsImRpZmZNcyIsImRpZmZEYXlzIiwiZmxvb3IiLCJ3ZWVrcyIsInllYXJzIiwiX2dldEZpcnN0Q29tcGxldGlvbiIsImZpcnN0Q29tcGxldGlvblF1ZXJ5Iiwic25hcHNob3QiLCJmaXJzdERvYyIsIl91bnVzZWQiLCJfeDEzIiwiX3gxNCIsImNvbXBsZXRpb25TZXJ2aWNlIl0sInNvdXJjZXMiOlsiY29tcGxldGlvblNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICBkb2MsXG4gICAgZ2V0RG9jcyxcbiAgICBvcmRlckJ5LFxuICAgIHF1ZXJ5LFxuICAgIHJ1blRyYW5zYWN0aW9uLFxuICAgIHNlcnZlclRpbWVzdGFtcCxcbiAgICBUaW1lc3RhbXAsXG4gICAgd2hlcmUsXG59IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7IGRiIH0gZnJvbSBcIi4uLy4uL2ZpcmViYXNlQ29uZmlnXCI7XG5pbXBvcnQgeyBIYWJpdENvbXBsZXRpb24gfSBmcm9tIFwiLi4vLi4vdHlwZXMvaGFiaXQtc3RyZWFrc1wiO1xuaW1wb3J0IHtcbiAgICBmb3JtYXREYXRlVG9TdHJpbmcsXG4gICAgZ2V0Q3VycmVudERhdGVTdHJpbmcsXG4gICAgZ2V0RGF5TmFtZSxcbiAgICBnZXRVc2VyVGltZXpvbmUsXG4gICAgdGltZXN0YW1wVG9EYXRlU3RyaW5nLFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvZGF0ZVV0aWxzXCI7XG5pbXBvcnQge1xuICAgIGdldFVzZXJGcmllbmRseUVycm9yTWVzc2FnZSxcbiAgICByZXRyeVdpdGhCYWNrb2ZmLFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvZXJyb3JIYW5kbGluZ1wiO1xuaW1wb3J0IHsgZ2V0SGFiaXRDb21wbGV0aW9uc0NvbGxlY3Rpb24gfSBmcm9tIFwiLi9jb2xsZWN0aW9uc1wiO1xuaW1wb3J0IHtcbiAgICB0cmFuc2Zvcm1GaXJlc3RvcmVUb0NvbXBsZXRpb24sXG4gICAgdmFsaWRhdGVVc2VyT3duZXJzaGlwLFxufSBmcm9tIFwiLi9oYWJpdFN0cmVha1NjaGVtYXNcIjtcblxuLyoqXG4gKiBDb21wbGV0aW9uIHRyYWNraW5nIGludGVyZmFjZXMgYW5kIHR5cGVzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkhpc3Rvcnkge1xuICAgIGNvbXBsZXRpb25zOiBIYWJpdENvbXBsZXRpb25bXTtcbiAgICB0b3RhbENvdW50OiBudW1iZXI7XG4gICAgY29tcGxldGlvblJhdGU6IG51bWJlcjtcbiAgICBwZXJpb2Q6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uUmF0ZSB7XG4gICAgcGVyaW9kOiBzdHJpbmc7XG4gICAgc3RhcnREYXRlOiBzdHJpbmc7XG4gICAgZW5kRGF0ZTogc3RyaW5nO1xuICAgIHRvdGFsRGF5czogbnVtYmVyO1xuICAgIGNvbXBsZXRlZERheXM6IG51bWJlcjtcbiAgICByYXRlOiBudW1iZXI7IC8vIFBlcmNlbnRhZ2UgKDAtMTAwKVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyb3VwZWRDb21wbGV0aW9ucyB7XG4gICAgd2Vla2x5OiBXZWVrbHlHcm91cFtdO1xuICAgIG1vbnRobHk6IE1vbnRobHlHcm91cFtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlZWtseUdyb3VwIHtcbiAgICB3ZWVrU3RhcnQ6IHN0cmluZzsgLy8gWVlZWS1NTS1ERCBmb3JtYXQgKE1vbmRheSlcbiAgICB3ZWVrRW5kOiBzdHJpbmc7IC8vIFlZWVktTU0tREQgZm9ybWF0IChTdW5kYXkpXG4gICAgY29tcGxldGlvbnM6IEhhYml0Q29tcGxldGlvbltdO1xuICAgIGNvbXBsZXRpb25Db3VudDogbnVtYmVyO1xuICAgIGNvbXBsZXRpb25SYXRlOiBudW1iZXI7IC8vIFBlcmNlbnRhZ2UgZm9yIHRoYXQgd2Vla1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vbnRobHlHcm91cCB7XG4gICAgbW9udGg6IHN0cmluZzsgLy8gWVlZWS1NTSBmb3JtYXRcbiAgICBtb250aE5hbWU6IHN0cmluZzsgLy8gXCJKYW51YXJ5IDIwMjRcIlxuICAgIGNvbXBsZXRpb25zOiBIYWJpdENvbXBsZXRpb25bXTtcbiAgICBjb21wbGV0aW9uQ291bnQ6IG51bWJlcjtcbiAgICBjb21wbGV0aW9uUmF0ZTogbnVtYmVyOyAvLyBQZXJjZW50YWdlIGZvciB0aGF0IG1vbnRoXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkRldGFpbCB7XG4gICAgY29tcGxldGlvbjogSGFiaXRDb21wbGV0aW9uO1xuICAgIGRheU9mV2Vlazogc3RyaW5nO1xuICAgIHRpbWVPZkRheTogc3RyaW5nO1xuICAgIHJlbGF0aXZlVGltZTogc3RyaW5nOyAvLyBcIjIgZGF5cyBhZ29cIiwgXCJUb2RheVwiLCBldGMuXG59XG5cbi8qKlxuICogQ29tcGxldGlvblNlcnZpY2UgSW1wbGVtZW50YXRpb25cbiAqXG4gKiBIYW5kbGVzIGhhYml0IGNvbXBsZXRpb24gdHJhY2tpbmcsIGhpc3Rvcnkgc3RvcmFnZSBhbmQgcmV0cmlldmFsLFxuICogY29tcGxldGlvbiByYXRlIGNhbGN1bGF0aW9ucywgYW5kIGdyb3VwaW5nIGxvZ2ljIGZvciBhbmFseXRpY3MuXG4gKiBSZXF1aXJlbWVudHM6IDUuMSwgNS4yLCA1LjMsIDUuNCwgNS41LCAxMi4xXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21wbGV0aW9uU2VydmljZSB7XG4gICAgLyoqXG4gICAgICogUmVjb3JkIGEgbmV3IGhhYml0IGNvbXBsZXRpb24gd2l0aCB0aW1lc3RhbXAgdmFsaWRhdGlvblxuICAgICAqIFJlcXVpcmVtZW50czogNS4xLCAxMi4xXG4gICAgICovXG4gICAgYXN5bmMgcmVjb3JkQ29tcGxldGlvbihcbiAgICAgICAgY29tcGxldGlvbjogT21pdDxIYWJpdENvbXBsZXRpb24sIFwiaWRcIj4sXG4gICAgKTogUHJvbWlzZTxIYWJpdENvbXBsZXRpb24+IHtcbiAgICAgICAgaWYgKCFjb21wbGV0aW9uLmhhYml0SWQgfHwgIWNvbXBsZXRpb24udXNlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJIYWJpdCBJRCBhbmQgVXNlciBJRCBhcmUgcmVxdWlyZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWYWxpZGF0ZSB0aW1lem9uZS1hd2FyZSBjb21wbGV0aW9uXG4gICAgICAgIGNvbnN0IHVzZXJUaW1lem9uZSA9IGNvbXBsZXRpb24udGltZXpvbmUgfHwgZ2V0VXNlclRpbWV6b25lKCk7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25EYXRlU3RyaW5nID0gdGltZXN0YW1wVG9EYXRlU3RyaW5nKFxuICAgICAgICAgICAgY29tcGxldGlvbi5jb21wbGV0ZWRBdCxcbiAgICAgICAgICAgIHVzZXJUaW1lem9uZSxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgY3VycmVudERhdGVTdHJpbmcgPSBnZXRDdXJyZW50RGF0ZVN0cmluZyh1c2VyVGltZXpvbmUpO1xuXG4gICAgICAgIC8vIEVuc3VyZSBjb21wbGV0aW9uIGlzIGZvciBjdXJyZW50IGRheSBvciBlYXJsaWVyIChwcmV2ZW50IGZ1dHVyZSBjb21wbGV0aW9ucylcbiAgICAgICAgaWYgKGNvbXBsZXRpb25EYXRlU3RyaW5nID4gY3VycmVudERhdGVTdHJpbmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCByZWNvcmQgY29tcGxldGlvbnMgZm9yIGZ1dHVyZSBkYXRlc1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcmV0cnlXaXRoQmFja29mZihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJ1blRyYW5zYWN0aW9uKGRiLCBhc3luYyAodHJhbnNhY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIGNvbXBsZXRpb24gb24gdGhlIHNhbWUgZGF0ZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uc0NvbGxlY3Rpb24gPSBnZXRIYWJpdENvbXBsZXRpb25zQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0NvbXBsZXRpb25zUXVlcnkgPSBxdWVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zQ29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlKFwiaGFiaXRJZFwiLCBcIj09XCIsIGNvbXBsZXRpb24uaGFiaXRJZCksXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZShcInVzZXJJZFwiLCBcIj09XCIsIGNvbXBsZXRpb24udXNlcklkKSxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoZXhpc3RpbmdDb21wbGV0aW9uc1F1ZXJ5KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0NvbXBsZXRpb25zID0gZXhpc3RpbmdTbmFwc2hvdC5kb2NzXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2MpID0+IHRyYW5zZm9ybUZpcmVzdG9yZVRvQ29tcGxldGlvbihkb2MuaWQsIGRvYy5kYXRhKCkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoY29tcCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBEYXRlU3RyaW5nID0gdGltZXN0YW1wVG9EYXRlU3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wLmNvbXBsZXRlZEF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyVGltZXpvbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcERhdGVTdHJpbmcgPT09IGNvbXBsZXRpb25EYXRlU3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nQ29tcGxldGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSGFiaXQgYWxyZWFkeSBjb21wbGV0ZWQgZm9yIHRoaXMgZGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBjb21wbGV0aW9uIHJlY29yZCB3aXRoIG1ldGFkYXRhXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25EYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFiaXRJZDogY29tcGxldGlvbi5oYWJpdElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjb21wbGV0aW9uLnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZEF0OiBjb21wbGV0aW9uLmNvbXBsZXRlZEF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXpvbmU6IHVzZXJUaW1lem9uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGVzOiBjb21wbGV0aW9uLm5vdGVzIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5OiBjb21wbGV0aW9uLmRpZmZpY3VsdHksXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25SZWYgPSBkb2MoY29tcGxldGlvbnNDb2xsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uc2V0KGNvbXBsZXRpb25SZWYsIGNvbXBsZXRpb25EYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDb21wbGV0aW9uOiBIYWJpdENvbXBsZXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogY29tcGxldGlvblJlZi5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbXBsZXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lem9uZTogdXNlclRpbWV6b25lLFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdDb21wbGV0aW9uO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlKGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHJlY29yZCBjb21wbGV0aW9uOiAke21lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY29tcGxldGlvbiBoaXN0b3J5IGZvciBhIGhhYml0IHdpdGggcGFnaW5hdGlvblxuICAgICAqIFJlcXVpcmVtZW50czogNS4yLCA1LjRcbiAgICAgKi9cbiAgICBhc3luYyBnZXRDb21wbGV0aW9uSGlzdG9yeShcbiAgICAgICAgaGFiaXRJZDogc3RyaW5nLFxuICAgICAgICB1c2VySWQ6IHN0cmluZyxcbiAgICAgICAgbGltaXQ6IG51bWJlciA9IDUwLFxuICAgICAgICBzdGFydEFmdGVyPzogVGltZXN0YW1wLFxuICAgICk6IFByb21pc2U8Q29tcGxldGlvbkhpc3Rvcnk+IHtcbiAgICAgICAgaWYgKCFoYWJpdElkIHx8ICF1c2VySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkhhYml0IElEIGFuZCBVc2VyIElEIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcmV0cnlXaXRoQmFja29mZihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnNDb2xsZWN0aW9uID0gZ2V0SGFiaXRDb21wbGV0aW9uc0NvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBsZXQgY29tcGxldGlvbnNRdWVyeSA9IHF1ZXJ5KFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uc0NvbGxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlKFwiaGFiaXRJZFwiLCBcIj09XCIsIGhhYml0SWQpLFxuICAgICAgICAgICAgICAgICAgICB3aGVyZShcInVzZXJJZFwiLCBcIj09XCIsIHVzZXJJZCksXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyQnkoXCJjb21wbGV0ZWRBdFwiLCBcImRlc2NcIiksXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8vIEFkZCBwYWdpbmF0aW9uIGlmIHN0YXJ0QWZ0ZXIgaXMgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRBZnRlcikge1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uc1F1ZXJ5ID0gcXVlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uc1F1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmUoXCJjb21wbGV0ZWRBdFwiLCBcIjxcIiwgc3RhcnRBZnRlciksXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnNTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29tcGxldGlvbnNRdWVyeSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnMgPSBjb21wbGV0aW9uc1NuYXBzaG90LmRvY3NcbiAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIGxpbWl0KVxuICAgICAgICAgICAgICAgICAgICAubWFwKChkb2MpID0+IHRyYW5zZm9ybUZpcmVzdG9yZVRvQ29tcGxldGlvbihkb2MuaWQsIGRvYy5kYXRhKCkpKTtcblxuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBjb21wbGV0aW9uIHJhdGUgZm9yIHRoZSBwZXJpb2RcbiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbENvdW50ID0gY29tcGxldGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBlcmlvZCA9IHRoaXMuY2FsY3VsYXRlUGVyaW9kRnJvbUNvbXBsZXRpb25zKGNvbXBsZXRpb25zKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uUmF0ZSA9IGF3YWl0IHRoaXMuY2FsY3VsYXRlQ29tcGxldGlvblJhdGUoXG4gICAgICAgICAgICAgICAgICAgIGhhYml0SWQsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgcGVyaW9kLnN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgcGVyaW9kLmVuZERhdGUsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50LFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uUmF0ZTogY29tcGxldGlvblJhdGUucmF0ZSxcbiAgICAgICAgICAgICAgICAgICAgcGVyaW9kOiBwZXJpb2QuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGdldFVzZXJGcmllbmRseUVycm9yTWVzc2FnZShlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgY29tcGxldGlvbiBoaXN0b3J5OiAke21lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgY29tcGxldGlvbiByYXRlIGZvciBhIHNwZWNpZmljIHRpbWUgcGVyaW9kXG4gICAgICogUmVxdWlyZW1lbnRzOiA1LjMsIDUuNVxuICAgICAqL1xuICAgIGFzeW5jIGNhbGN1bGF0ZUNvbXBsZXRpb25SYXRlKFxuICAgICAgICBoYWJpdElkOiBzdHJpbmcsXG4gICAgICAgIHVzZXJJZDogc3RyaW5nLFxuICAgICAgICBzdGFydERhdGU6IHN0cmluZyxcbiAgICAgICAgZW5kRGF0ZTogc3RyaW5nLFxuICAgICk6IFByb21pc2U8Q29tcGxldGlvblJhdGU+IHtcbiAgICAgICAgaWYgKCFoYWJpdElkIHx8ICF1c2VySWQgfHwgIXN0YXJ0RGF0ZSB8fCAhZW5kRGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiQWxsIHBhcmFtZXRlcnMgYXJlIHJlcXVpcmVkIGZvciBjb21wbGV0aW9uIHJhdGUgY2FsY3VsYXRpb25cIixcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJldHJ5V2l0aEJhY2tvZmYoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25zQ29sbGVjdGlvbiA9IGdldEhhYml0Q29tcGxldGlvbnNDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnNRdWVyeSA9IHF1ZXJ5KFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uc0NvbGxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlKFwiaGFiaXRJZFwiLCBcIj09XCIsIGhhYml0SWQpLFxuICAgICAgICAgICAgICAgICAgICB3aGVyZShcInVzZXJJZFwiLCBcIj09XCIsIHVzZXJJZCksXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25zU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbXBsZXRpb25zUXVlcnkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFsbENvbXBsZXRpb25zID0gY29tcGxldGlvbnNTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1GaXJlc3RvcmVUb0NvbXBsZXRpb24oZG9jLmlkLCBkb2MuZGF0YSgpKSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgLy8gRmlsdGVyIGNvbXBsZXRpb25zIHdpdGhpbiB0aGUgZGF0ZSByYW5nZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWV6b25lID0gZ2V0VXNlclRpbWV6b25lKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnNJblJhbmdlID0gYWxsQ29tcGxldGlvbnMuZmlsdGVyKChjb21wbGV0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25EYXRlID0gdGltZXN0YW1wVG9EYXRlU3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbi5jb21wbGV0ZWRBdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWV6b25lLFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGxldGlvbkRhdGUgPj0gc3RhcnREYXRlICYmIGNvbXBsZXRpb25EYXRlIDw9IGVuZERhdGU7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgdG90YWwgZGF5cyBpbiB0aGUgcGVyaW9kXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShzdGFydERhdGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKGVuZERhdGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsRGF5cyA9XG4gICAgICAgICAgICAgICAgICAgIE1hdGguY2VpbCgoZW5kLmdldFRpbWUoKSAtIHN0YXJ0LmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpICtcbiAgICAgICAgICAgICAgICAgICAgMTtcblxuICAgICAgICAgICAgICAgIC8vIEdldCB1bmlxdWUgY29tcGxldGlvbiBkYXRlc1xuICAgICAgICAgICAgICAgIGNvbnN0IHVuaXF1ZUNvbXBsZXRpb25EYXRlcyA9IG5ldyBTZXQoXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zSW5SYW5nZS5tYXAoKGNvbXBsZXRpb24pID0+XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBUb0RhdGVTdHJpbmcoY29tcGxldGlvbi5jb21wbGV0ZWRBdCwgdGltZXpvbmUpLFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0ZWREYXlzID0gdW5pcXVlQ29tcGxldGlvbkRhdGVzLnNpemU7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF0ZSA9IHRvdGFsRGF5cyA+IDAgPyAoY29tcGxldGVkRGF5cyAvIHRvdGFsRGF5cykgKiAxMDAgOiAwO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcGVyaW9kOiBgJHtzdGFydERhdGV9IHRvICR7ZW5kRGF0ZX1gLFxuICAgICAgICAgICAgICAgICAgICBzdGFydERhdGUsXG4gICAgICAgICAgICAgICAgICAgIGVuZERhdGUsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRGF5cyxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkRGF5cyxcbiAgICAgICAgICAgICAgICAgICAgcmF0ZTogTWF0aC5yb3VuZChyYXRlICogMTAwKSAvIDEwMCwgLy8gUm91bmQgdG8gMiBkZWNpbWFsIHBsYWNlc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBnZXRVc2VyRnJpZW5kbHlFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY2FsY3VsYXRlIGNvbXBsZXRpb24gcmF0ZTogJHttZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNvbXBsZXRpb25zIGdyb3VwZWQgYnkgd2Vla2x5IGFuZCBtb250aGx5IHBlcmlvZHNcbiAgICAgKiBSZXF1aXJlbWVudHM6IDUuMlxuICAgICAqL1xuICAgIGFzeW5jIGdldEdyb3VwZWRDb21wbGV0aW9ucyhcbiAgICAgICAgaGFiaXRJZDogc3RyaW5nLFxuICAgICAgICB1c2VySWQ6IHN0cmluZyxcbiAgICAgICAgbW9udGhzOiBudW1iZXIgPSA2LFxuICAgICk6IFByb21pc2U8R3JvdXBlZENvbXBsZXRpb25zPiB7XG4gICAgICAgIGlmICghaGFiaXRJZCB8fCAhdXNlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJIYWJpdCBJRCBhbmQgVXNlciBJRCBhcmUgcmVxdWlyZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJldHJ5V2l0aEJhY2tvZmYoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWV6b25lID0gZ2V0VXNlclRpbWV6b25lKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kRGF0ZSA9IGdldEN1cnJlbnREYXRlU3RyaW5nKHRpbWV6b25lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSBmb3JtYXREYXRlVG9TdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKERhdGUubm93KCkgLSBtb250aHMgKiAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgICAgICAgICAgICB0aW1lem9uZSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgLy8gR2V0IGFsbCBjb21wbGV0aW9ucyBpbiB0aGUgcGVyaW9kXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnNDb2xsZWN0aW9uID0gZ2V0SGFiaXRDb21wbGV0aW9uc0NvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uc1F1ZXJ5ID0gcXVlcnkoXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zQ29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgd2hlcmUoXCJoYWJpdElkXCIsIFwiPT1cIiwgaGFiaXRJZCksXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlKFwidXNlcklkXCIsIFwiPT1cIiwgdXNlcklkKSxcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJCeShcImNvbXBsZXRlZEF0XCIsIFwiZGVzY1wiKSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnNTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29tcGxldGlvbnNRdWVyeSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxsQ29tcGxldGlvbnMgPSBjb21wbGV0aW9uc1NuYXBzaG90LmRvY3NcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jKSA9PiB0cmFuc2Zvcm1GaXJlc3RvcmVUb0NvbXBsZXRpb24oZG9jLmlkLCBkb2MuZGF0YSgpKSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoY29tcGxldGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGUgPSB0aW1lc3RhbXBUb0RhdGVTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbi5jb21wbGV0ZWRBdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lem9uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGxldGlvbkRhdGUgPj0gc3RhcnREYXRlICYmIGNvbXBsZXRpb25EYXRlIDw9IGVuZERhdGU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gR3JvdXAgYnkgd2Vla3MgYW5kIG1vbnRoc1xuICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtseUdyb3VwcyA9IHRoaXMuZ3JvdXBDb21wbGV0aW9uc0J5V2VlayhcbiAgICAgICAgICAgICAgICAgICAgYWxsQ29tcGxldGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHRpbWV6b25lLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9udGhseUdyb3VwcyA9IHRoaXMuZ3JvdXBDb21wbGV0aW9uc0J5TW9udGgoXG4gICAgICAgICAgICAgICAgICAgIGFsbENvbXBsZXRpb25zLFxuICAgICAgICAgICAgICAgICAgICB0aW1lem9uZSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgd2Vla2x5OiB3ZWVrbHlHcm91cHMsXG4gICAgICAgICAgICAgICAgICAgIG1vbnRobHk6IG1vbnRobHlHcm91cHMsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGdldFVzZXJGcmllbmRseUVycm9yTWVzc2FnZShlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgZ3JvdXBlZCBjb21wbGV0aW9uczogJHttZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgY29tcGxldGlvblxuICAgICAqIFJlcXVpcmVtZW50czogNS40XG4gICAgICovXG4gICAgYXN5bmMgZ2V0Q29tcGxldGlvbkRldGFpbChcbiAgICAgICAgY29tcGxldGlvbklkOiBzdHJpbmcsXG4gICAgICAgIHVzZXJJZDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8Q29tcGxldGlvbkRldGFpbD4ge1xuICAgICAgICBpZiAoIWNvbXBsZXRpb25JZCB8fCAhdXNlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb21wbGV0aW9uIElEIGFuZCBVc2VyIElEIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcmV0cnlXaXRoQmFja29mZihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnNDb2xsZWN0aW9uID0gZ2V0SGFiaXRDb21wbGV0aW9uc0NvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uRG9jID0gYXdhaXQgZ2V0RG9jcyhcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkoY29tcGxldGlvbnNDb2xsZWN0aW9uLCB3aGVyZShcIl9fbmFtZV9fXCIsIFwiPT1cIiwgY29tcGxldGlvbklkKSksXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmIChjb21wbGV0aW9uRG9jLmVtcHR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbXBsZXRpb24gbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25EYXRhID0gY29tcGxldGlvbkRvYy5kb2NzWzBdLmRhdGEoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uID0gdHJhbnNmb3JtRmlyZXN0b3JlVG9Db21wbGV0aW9uKFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uRG9jLmRvY3NbMF0uaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25EYXRhLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBWYWxpZGF0ZSB1c2VyIG93bmVyc2hpcFxuICAgICAgICAgICAgICAgIGlmICghdmFsaWRhdGVVc2VyT3duZXJzaGlwKHVzZXJJZCwgY29tcGxldGlvbi51c2VySWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYXV0aG9yaXplZCBhY2Nlc3MgdG8gY29tcGxldGlvbiBkYXRhXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWV6b25lID0gY29tcGxldGlvbi50aW1lem9uZSB8fCBnZXRVc2VyVGltZXpvbmUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0ZSA9IHRpbWVzdGFtcFRvRGF0ZVN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbi5jb21wbGV0ZWRBdCxcbiAgICAgICAgICAgICAgICAgICAgdGltZXpvbmUsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGRheU9mV2VlazogZ2V0RGF5TmFtZShjb21wbGV0aW9uRGF0ZSksXG4gICAgICAgICAgICAgICAgICAgIHRpbWVPZkRheTogY29tcGxldGlvbi5jb21wbGV0ZWRBdC50b0RhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVUaW1lOiB0aGlzLmdldFJlbGF0aXZlVGltZVN0cmluZyhjb21wbGV0aW9uLmNvbXBsZXRlZEF0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlKGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBjb21wbGV0aW9uIGRldGFpbDogJHttZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNvbXBsZXRpb24gc3RhdGlzdGljcyBmb3IgbXVsdGlwbGUgdGltZSBwZXJpb2RzXG4gICAgICogUmVxdWlyZW1lbnRzOiA1LjMsIDUuNVxuICAgICAqL1xuICAgIGFzeW5jIGdldENvbXBsZXRpb25TdGF0aXN0aWNzKFxuICAgICAgICBoYWJpdElkOiBzdHJpbmcsXG4gICAgICAgIHVzZXJJZDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8e1xuICAgICAgICB3ZWVrbHk6IENvbXBsZXRpb25SYXRlO1xuICAgICAgICBtb250aGx5OiBDb21wbGV0aW9uUmF0ZTtcbiAgICAgICAgcXVhcnRlcmx5OiBDb21wbGV0aW9uUmF0ZTtcbiAgICAgICAgYWxsVGltZTogQ29tcGxldGlvblJhdGU7XG4gICAgfT4ge1xuICAgICAgICBpZiAoIWhhYml0SWQgfHwgIXVzZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSGFiaXQgSUQgYW5kIFVzZXIgSUQgYXJlIHJlcXVpcmVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWV6b25lID0gZ2V0VXNlclRpbWV6b25lKCk7XG4gICAgICAgICAgICBjb25zdCB0b2RheSA9IGdldEN1cnJlbnREYXRlU3RyaW5nKHRpbWV6b25lKTtcblxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGRpZmZlcmVudCB0aW1lIHBlcmlvZHNcbiAgICAgICAgICAgIGNvbnN0IHdlZWtTdGFydCA9IGZvcm1hdERhdGVUb1N0cmluZyhcbiAgICAgICAgICAgICAgICBuZXcgRGF0ZShEYXRlLm5vdygpIC0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgICAgICAgIHRpbWV6b25lLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoU3RhcnQgPSBmb3JtYXREYXRlVG9TdHJpbmcoXG4gICAgICAgICAgICAgICAgbmV3IERhdGUoRGF0ZS5ub3coKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgICAgICAgICAgdGltZXpvbmUsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgcXVhcnRlclN0YXJ0ID0gZm9ybWF0RGF0ZVRvU3RyaW5nKFxuICAgICAgICAgICAgICAgIG5ldyBEYXRlKERhdGUubm93KCkgLSA5MCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgICAgICAgIHRpbWV6b25lLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBmaXJzdCBjb21wbGV0aW9uIGRhdGUgZm9yIGFsbC10aW1lIGNhbGN1bGF0aW9uXG4gICAgICAgICAgICBjb25zdCBmaXJzdENvbXBsZXRpb24gPSBhd2FpdCB0aGlzLmdldEZpcnN0Q29tcGxldGlvbihoYWJpdElkLCB1c2VySWQpO1xuICAgICAgICAgICAgY29uc3QgYWxsVGltZVN0YXJ0ID0gZmlyc3RDb21wbGV0aW9uXG4gICAgICAgICAgICAgICAgPyB0aW1lc3RhbXBUb0RhdGVTdHJpbmcoZmlyc3RDb21wbGV0aW9uLmNvbXBsZXRlZEF0LCB0aW1lem9uZSlcbiAgICAgICAgICAgICAgICA6IHRvZGF5O1xuXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgcmF0ZXMgZm9yIGFsbCBwZXJpb2RzXG4gICAgICAgICAgICBjb25zdCBbd2Vla2x5LCBtb250aGx5LCBxdWFydGVybHksIGFsbFRpbWVdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQ29tcGxldGlvblJhdGUoaGFiaXRJZCwgdXNlcklkLCB3ZWVrU3RhcnQsIHRvZGF5KSxcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUNvbXBsZXRpb25SYXRlKGhhYml0SWQsIHVzZXJJZCwgbW9udGhTdGFydCwgdG9kYXkpLFxuICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQ29tcGxldGlvblJhdGUoaGFiaXRJZCwgdXNlcklkLCBxdWFydGVyU3RhcnQsIHRvZGF5KSxcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUNvbXBsZXRpb25SYXRlKGhhYml0SWQsIHVzZXJJZCwgYWxsVGltZVN0YXJ0LCB0b2RheSksXG4gICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB3ZWVrbHksXG4gICAgICAgICAgICAgICAgbW9udGhseSxcbiAgICAgICAgICAgICAgICBxdWFydGVybHksXG4gICAgICAgICAgICAgICAgYWxsVGltZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlKGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBjb21wbGV0aW9uIHN0YXRpc3RpY3M6ICR7bWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByaXZhdGUgaGVscGVyIG1ldGhvZHNcblxuICAgIC8qKlxuICAgICAqIEdyb3VwIGNvbXBsZXRpb25zIGJ5IHdlZWsgKE1vbmRheSB0byBTdW5kYXkpXG4gICAgICovXG4gICAgcHJpdmF0ZSBncm91cENvbXBsZXRpb25zQnlXZWVrKFxuICAgICAgICBjb21wbGV0aW9uczogSGFiaXRDb21wbGV0aW9uW10sXG4gICAgICAgIHRpbWV6b25lOiBzdHJpbmcsXG4gICAgKTogV2Vla2x5R3JvdXBbXSB7XG4gICAgICAgIGNvbnN0IHdlZWtHcm91cHMgPSBuZXcgTWFwPHN0cmluZywgSGFiaXRDb21wbGV0aW9uW10+KCk7XG5cbiAgICAgICAgY29tcGxldGlvbnMuZm9yRWFjaCgoY29tcGxldGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGUgPSB0aW1lc3RhbXBUb0RhdGVTdHJpbmcoXG4gICAgICAgICAgICAgICAgY29tcGxldGlvbi5jb21wbGV0ZWRBdCxcbiAgICAgICAgICAgICAgICB0aW1lem9uZSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCB3ZWVrU3RhcnQgPSB0aGlzLmdldFdlZWtTdGFydChjb21wbGV0aW9uRGF0ZSk7XG4gICAgICAgICAgICBjb25zdCB3ZWVrS2V5ID0gd2Vla1N0YXJ0O1xuXG4gICAgICAgICAgICBpZiAoIXdlZWtHcm91cHMuaGFzKHdlZWtLZXkpKSB7XG4gICAgICAgICAgICAgICAgd2Vla0dyb3Vwcy5zZXQod2Vla0tleSwgW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2Vla0dyb3Vwcy5nZXQod2Vla0tleSkhLnB1c2goY29tcGxldGlvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHdlZWtHcm91cHMuZW50cmllcygpKVxuICAgICAgICAgICAgLm1hcCgoW3dlZWtTdGFydCwgd2Vla0NvbXBsZXRpb25zXSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtFbmQgPSB0aGlzLmdldFdlZWtFbmQod2Vla1N0YXJ0KTtcbiAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVEYXRlcyA9IG5ldyBTZXQoXG4gICAgICAgICAgICAgICAgICAgIHdlZWtDb21wbGV0aW9ucy5tYXAoKGMpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBUb0RhdGVTdHJpbmcoYy5jb21wbGV0ZWRBdCwgdGltZXpvbmUpLFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB3ZWVrU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIHdlZWtFbmQsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zOiB3ZWVrQ29tcGxldGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25Db3VudDogd2Vla0NvbXBsZXRpb25zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvblJhdGU6ICh1bmlxdWVEYXRlcy5zaXplIC8gNykgKiAxMDAsIC8vIDcgZGF5cyBpbiBhIHdlZWtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLndlZWtTdGFydC5sb2NhbGVDb21wYXJlKGEud2Vla1N0YXJ0KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR3JvdXAgY29tcGxldGlvbnMgYnkgbW9udGhcbiAgICAgKi9cbiAgICBwcml2YXRlIGdyb3VwQ29tcGxldGlvbnNCeU1vbnRoKFxuICAgICAgICBjb21wbGV0aW9uczogSGFiaXRDb21wbGV0aW9uW10sXG4gICAgICAgIHRpbWV6b25lOiBzdHJpbmcsXG4gICAgKTogTW9udGhseUdyb3VwW10ge1xuICAgICAgICBjb25zdCBtb250aEdyb3VwcyA9IG5ldyBNYXA8c3RyaW5nLCBIYWJpdENvbXBsZXRpb25bXT4oKTtcblxuICAgICAgICBjb21wbGV0aW9ucy5mb3JFYWNoKChjb21wbGV0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0ZSA9IHRpbWVzdGFtcFRvRGF0ZVN0cmluZyhcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uLmNvbXBsZXRlZEF0LFxuICAgICAgICAgICAgICAgIHRpbWV6b25lLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoS2V5ID0gY29tcGxldGlvbkRhdGUuc3Vic3RyaW5nKDAsIDcpOyAvLyBZWVlZLU1NXG5cbiAgICAgICAgICAgIGlmICghbW9udGhHcm91cHMuaGFzKG1vbnRoS2V5KSkge1xuICAgICAgICAgICAgICAgIG1vbnRoR3JvdXBzLnNldChtb250aEtleSwgW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9udGhHcm91cHMuZ2V0KG1vbnRoS2V5KSEucHVzaChjb21wbGV0aW9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20obW9udGhHcm91cHMuZW50cmllcygpKVxuICAgICAgICAgICAgLm1hcCgoW21vbnRoLCBtb250aENvbXBsZXRpb25zXSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFt5ZWFyLCBtb250aE51bV0gPSBtb250aC5zcGxpdChcIi1cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9udGhOYW1lID0gbmV3IERhdGUoXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHllYXIpLFxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtb250aE51bSkgLSAxLFxuICAgICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIiwgeyBtb250aDogXCJsb25nXCIsIHllYXI6IFwibnVtZXJpY1wiIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZGF5c0luTW9udGggPSBuZXcgRGF0ZShcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoeWVhciksXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KG1vbnRoTnVtKSxcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICApLmdldERhdGUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVEYXRlcyA9IG5ldyBTZXQoXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoQ29tcGxldGlvbnMubWFwKChjKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wVG9EYXRlU3RyaW5nKGMuY29tcGxldGVkQXQsIHRpbWV6b25lKSxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbW9udGgsXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbnM6IG1vbnRoQ29tcGxldGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25Db3VudDogbW9udGhDb21wbGV0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25SYXRlOiAodW5pcXVlRGF0ZXMuc2l6ZSAvIGRheXNJbk1vbnRoKSAqIDEwMCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLm1vbnRoLmxvY2FsZUNvbXBhcmUoYS5tb250aCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgTW9uZGF5IG9mIHRoZSB3ZWVrIGZvciBhIGdpdmVuIGRhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldFdlZWtTdGFydChkYXRlU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gICAgICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgICAgIGNvbnN0IGRheXNUb01vbmRheSA9IGRheU9mV2VlayA9PT0gMCA/IDYgOiBkYXlPZldlZWsgLSAxOyAvLyBTdW5kYXkgPSAwLCBNb25kYXkgPSAxXG5cbiAgICAgICAgY29uc3QgbW9uZGF5ID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgICAgIG1vbmRheS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gZGF5c1RvTW9uZGF5KTtcblxuICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZVRvU3RyaW5nKG1vbmRheSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBTdW5kYXkgb2YgdGhlIHdlZWsgZm9yIGEgZ2l2ZW4gTW9uZGF5XG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRXZWVrRW5kKHdlZWtTdGFydDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgbW9uZGF5ID0gbmV3IERhdGUod2Vla1N0YXJ0KTtcbiAgICAgICAgY29uc3Qgc3VuZGF5ID0gbmV3IERhdGUobW9uZGF5KTtcbiAgICAgICAgc3VuZGF5LnNldERhdGUobW9uZGF5LmdldERhdGUoKSArIDYpO1xuXG4gICAgICAgIHJldHVybiBmb3JtYXREYXRlVG9TdHJpbmcoc3VuZGF5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgcGVyaW9kIGRlc2NyaXB0aW9uIGZyb20gY29tcGxldGlvbnNcbiAgICAgKi9cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVBlcmlvZEZyb21Db21wbGV0aW9ucyhjb21wbGV0aW9uczogSGFiaXRDb21wbGV0aW9uW10pOiB7XG4gICAgICAgIHN0YXJ0RGF0ZTogc3RyaW5nO1xuICAgICAgICBlbmREYXRlOiBzdHJpbmc7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgfSB7XG4gICAgICAgIGlmIChjb21wbGV0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gZ2V0Q3VycmVudERhdGVTdHJpbmcoKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhcnREYXRlOiB0b2RheSxcbiAgICAgICAgICAgICAgICBlbmREYXRlOiB0b2RheSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJObyBjb21wbGV0aW9uc1wiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRpbWV6b25lID0gZ2V0VXNlclRpbWV6b25lKCk7XG4gICAgICAgIGNvbnN0IGRhdGVzID0gY29tcGxldGlvbnNcbiAgICAgICAgICAgIC5tYXAoKGMpID0+IHRpbWVzdGFtcFRvRGF0ZVN0cmluZyhjLmNvbXBsZXRlZEF0LCB0aW1lem9uZSkpXG4gICAgICAgICAgICAuc29ydCgpO1xuXG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IGRhdGVzWzBdO1xuICAgICAgICBjb25zdCBlbmREYXRlID0gZGF0ZXNbZGF0ZXMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgIGVuZERhdGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7c3RhcnREYXRlfSB0byAke2VuZERhdGV9YCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgcmVsYXRpdmUgdGltZSBzdHJpbmcgZm9yIGEgdGltZXN0YW1wXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRSZWxhdGl2ZVRpbWVTdHJpbmcodGltZXN0YW1wOiBUaW1lc3RhbXApOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0ZSA9IHRpbWVzdGFtcC50b0RhdGUoKTtcbiAgICAgICAgY29uc3QgZGlmZk1zID0gbm93LmdldFRpbWUoKSAtIGNvbXBsZXRpb25EYXRlLmdldFRpbWUoKTtcbiAgICAgICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmZsb29yKGRpZmZNcyAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG5cbiAgICAgICAgaWYgKGRpZmZEYXlzID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJUb2RheVwiO1xuICAgICAgICB9IGVsc2UgaWYgKGRpZmZEYXlzID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJZZXN0ZXJkYXlcIjtcbiAgICAgICAgfSBlbHNlIGlmIChkaWZmRGF5cyA8IDcpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHtkaWZmRGF5c30gZGF5cyBhZ29gO1xuICAgICAgICB9IGVsc2UgaWYgKGRpZmZEYXlzIDwgMzApIHtcbiAgICAgICAgICAgIGNvbnN0IHdlZWtzID0gTWF0aC5mbG9vcihkaWZmRGF5cyAvIDcpO1xuICAgICAgICAgICAgcmV0dXJuIHdlZWtzID09PSAxID8gXCIxIHdlZWsgYWdvXCIgOiBgJHt3ZWVrc30gd2Vla3MgYWdvYDtcbiAgICAgICAgfSBlbHNlIGlmIChkaWZmRGF5cyA8IDM2NSkge1xuICAgICAgICAgICAgY29uc3QgbW9udGhzID0gTWF0aC5mbG9vcihkaWZmRGF5cyAvIDMwKTtcbiAgICAgICAgICAgIHJldHVybiBtb250aHMgPT09IDEgPyBcIjEgbW9udGggYWdvXCIgOiBgJHttb250aHN9IG1vbnRocyBhZ29gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeWVhcnMgPSBNYXRoLmZsb29yKGRpZmZEYXlzIC8gMzY1KTtcbiAgICAgICAgICAgIHJldHVybiB5ZWFycyA9PT0gMSA/IFwiMSB5ZWFyIGFnb1wiIDogYCR7eWVhcnN9IHllYXJzIGFnb2A7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZpcnN0IGNvbXBsZXRpb24gZm9yIGEgaGFiaXRcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGdldEZpcnN0Q29tcGxldGlvbihcbiAgICAgICAgaGFiaXRJZDogc3RyaW5nLFxuICAgICAgICB1c2VySWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPEhhYml0Q29tcGxldGlvbiB8IG51bGw+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25zQ29sbGVjdGlvbiA9IGdldEhhYml0Q29tcGxldGlvbnNDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBmaXJzdENvbXBsZXRpb25RdWVyeSA9IHF1ZXJ5KFxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zQ29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICB3aGVyZShcImhhYml0SWRcIiwgXCI9PVwiLCBoYWJpdElkKSxcbiAgICAgICAgICAgICAgICB3aGVyZShcInVzZXJJZFwiLCBcIj09XCIsIHVzZXJJZCksXG4gICAgICAgICAgICAgICAgb3JkZXJCeShcImNvbXBsZXRlZEF0XCIsIFwiYXNjXCIpLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGZpcnN0Q29tcGxldGlvblF1ZXJ5KTtcbiAgICAgICAgICAgIGlmIChzbmFwc2hvdC5lbXB0eSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBmaXJzdERvYyA9IHNuYXBzaG90LmRvY3NbMF07XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtRmlyZXN0b3JlVG9Db21wbGV0aW9uKGZpcnN0RG9jLmlkLCBmaXJzdERvYy5kYXRhKCkpO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBSZXR1cm4gbnVsbCBpZiB0aGVyZSdzIGFuIGVycm9yIGdldHRpbmcgZmlyc3QgY29tcGxldGlvblxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgY29tcGxldGlvblNlcnZpY2UgPSBuZXcgQ29tcGxldGlvblNlcnZpY2UoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsSUFBQUEsVUFBQSxHQUFBQyxPQUFBO0FBVUEsSUFBQUMsZUFBQSxHQUFBRCxPQUFBO0FBRUEsSUFBQUUsVUFBQSxHQUFBRixPQUFBO0FBT0EsSUFBQUcs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