f87c60e32539cd1052d92e0bb7148595
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.streakService = exports.StreakService = void 0;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _firestore = require("firebase/firestore");
var _firebaseConfig = require("../../firebaseConfig");
var _habitStreaks = require("../../types/habit-streaks");
var _dateUtils = require("../../utils/dateUtils");
var _errorHandling = require("../../utils/errorHandling");
var _collections = require("./collections");
var _habitStreakSchemas = require("./habitStreakSchemas");
var StreakService = exports.StreakService = function () {
  function StreakService() {
    (0, _classCallCheck2.default)(this, StreakService);
  }
  return (0, _createClass2.default)(StreakService, [{
    key: "calculateStreak",
    value: (function () {
      var _calculateStreak = (0, _asyncToGenerator2.default)(function* (habitId, userId) {
        var _this = this;
        if (!habitId || !userId) {
          throw new Error("Habit ID and User ID are required");
        }
        try {
          return yield (0, _errorHandling.retryWithBackoff)((0, _asyncToGenerator2.default)(function* () {
            return yield (0, _firestore.runTransaction)(_firebaseConfig.db, function () {
              var _ref2 = (0, _asyncToGenerator2.default)(function* (transaction) {
                var streakId = (0, _habitStreakSchemas.generateStreakId)(userId, habitId);
                var streaksCollection = (0, _collections.getHabitStreaksCollection)();
                var streakDocRef = (0, _firestore.doc)(streaksCollection, streakId);
                var streakDoc = yield transaction.get(streakDocRef);
                var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
                var completionsQuery = (0, _firestore.query)(completionsCollection, (0, _firestore.where)("habitId", "==", habitId), (0, _firestore.where)("userId", "==", userId));
                var completionsSnapshot = yield (0, _firestore.getDocs)(completionsQuery);
                var completions = completionsSnapshot.docs.map(function (doc) {
                  return (0, _habitStreakSchemas.transformFirestoreToCompletion)(doc.id, doc.data());
                }).sort(function (a, b) {
                  return a.completedAt.toMillis() - b.completedAt.toMillis();
                });
                var calculatedStreak = _this.calculateStreakFromCompletions(completions, habitId, userId);
                var existingStreak = null;
                if (streakDoc.exists()) {
                  existingStreak = (0, _habitStreakSchemas.transformFirestoreToStreak)(streakDoc.data());
                }
                var updatedStreak = _this.mergeStreakData(calculatedStreak, existingStreak);
                var integrityCheck = yield dataIntegrityService.verifyStreakIntegrity(habitId, userId, updatedStreak);
                if (!integrityCheck.isValid) {
                  console.warn("Streak integrity issues detected:", integrityCheck.errors);
                  var finalStreak = integrityCheck.correctedData || updatedStreak;
                  var _streakData = (0, _habitStreakSchemas.transformStreakToFirestore)(finalStreak);
                  transaction.set(streakDocRef, _streakData);
                  return finalStreak;
                }
                var streakData = (0, _habitStreakSchemas.transformStreakToFirestore)(updatedStreak);
                transaction.set(streakDocRef, streakData);
                return updatedStreak;
              });
              return function (_x3) {
                return _ref2.apply(this, arguments);
              };
            }());
          }));
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to calculate streak: ${message}`);
        }
      });
      function calculateStreak(_x, _x2) {
        return _calculateStreak.apply(this, arguments);
      }
      return calculateStreak;
    }())
  }, {
    key: "recordCompletion",
    value: (function () {
      var _recordCompletion = (0, _asyncToGenerator2.default)(function* (completion) {
        if (!completion.habitId || !completion.userId) {
          throw new Error("Habit ID and User ID are required");
        }
        var userTimezone = completion.timezone || (0, _dateUtils.getUserTimezone)();
        var completionDateString = (0, _dateUtils.timestampToDateString)(completion.completedAt, userTimezone);
        var currentDateString = (0, _dateUtils.getCurrentDateString)(userTimezone);
        if (completionDateString > currentDateString) {
          throw new Error("Cannot record completions for future dates");
        }
        try {
          return yield (0, _errorHandling.retryWithBackoff)((0, _asyncToGenerator2.default)(function* () {
            return yield (0, _firestore.runTransaction)(_firebaseConfig.db, function () {
              var _ref4 = (0, _asyncToGenerator2.default)(function* (transaction) {
                var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
                var existingCompletionsQuery = (0, _firestore.query)(completionsCollection, (0, _firestore.where)("habitId", "==", completion.habitId), (0, _firestore.where)("userId", "==", completion.userId));
                var existingSnapshot = yield (0, _firestore.getDocs)(existingCompletionsQuery);
                var existingCompletions = existingSnapshot.docs.map(function (doc) {
                  return (0, _habitStreakSchemas.transformFirestoreToCompletion)(doc.id, doc.data());
                }).filter(function (comp) {
                  var compDateString = (0, _dateUtils.timestampToDateString)(comp.completedAt, userTimezone);
                  return compDateString === completionDateString;
                });
                if (existingCompletions.length > 0) {
                  throw new Error("Habit already completed for this date");
                }
                var completionData = {
                  habitId: completion.habitId,
                  userId: completion.userId,
                  completedAt: completion.completedAt,
                  timezone: userTimezone,
                  notes: completion.notes || "",
                  difficulty: completion.difficulty,
                  createdAt: (0, _firestore.serverTimestamp)()
                };
                var completionRef = (0, _firestore.doc)(completionsCollection);
                transaction.set(completionRef, completionData);
                var newCompletion = Object.assign({
                  id: completionRef.id
                }, completion, {
                  timezone: userTimezone
                });
                yield syncService.queueOperation({
                  type: "completion",
                  action: "create",
                  data: completionData,
                  userId: completion.userId,
                  habitId: completion.habitId
                });
                return newCompletion;
              });
              return function (_x5) {
                return _ref4.apply(this, arguments);
              };
            }());
          }));
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to record completion: ${message}`);
        }
      });
      function recordCompletion(_x4) {
        return _recordCompletion.apply(this, arguments);
      }
      return recordCompletion;
    }())
  }, {
    key: "recordCompletionWithMilestoneCheck",
    value: (function () {
      var _recordCompletionWithMilestoneCheck = (0, _asyncToGenerator2.default)(function* (completion) {
        var recordedCompletion = yield this.recordCompletion(completion);
        var updatedStreak = yield this.calculateStreak(completion.habitId, completion.userId);
        var newMilestones = yield this.checkMilestones(updatedStreak);
        return {
          completion: recordedCompletion,
          newMilestones: newMilestones,
          updatedStreak: updatedStreak
        };
      });
      function recordCompletionWithMilestoneCheck(_x6) {
        return _recordCompletionWithMilestoneCheck.apply(this, arguments);
      }
      return recordCompletionWithMilestoneCheck;
    }())
  }, {
    key: "useStreakFreeze",
    value: (function () {
      var _useStreakFreeze = (0, _asyncToGenerator2.default)(function* (habitId, userId, missedDate) {
        if (!habitId || !userId || !missedDate) {
          throw new Error("Habit ID, User ID, and missed date are required");
        }
        try {
          return yield (0, _errorHandling.retryWithBackoff)((0, _asyncToGenerator2.default)(function* () {
            return yield (0, _firestore.runTransaction)(_firebaseConfig.db, function () {
              var _ref6 = (0, _asyncToGenerator2.default)(function* (transaction) {
                var streakId = (0, _habitStreakSchemas.generateStreakId)(userId, habitId);
                var streaksCollection = (0, _collections.getHabitStreaksCollection)();
                var streakDocRef = (0, _firestore.doc)(streaksCollection, streakId);
                var streakDoc = yield transaction.get(streakDocRef);
                if (!streakDoc.exists()) {
                  throw new Error("Streak data not found");
                }
                var streak = (0, _habitStreakSchemas.transformFirestoreToStreak)(streakDoc.data());
                if (!(0, _habitStreakSchemas.validateUserOwnership)(userId, streak.userId)) {
                  throw new Error("Unauthorized access to streak data");
                }
                if (streak.freezesAvailable <= 0) {
                  return false;
                }
                var updatedStreak = Object.assign({}, streak, {
                  freezesAvailable: streak.freezesAvailable - 1,
                  freezesUsed: streak.freezesUsed + 1
                });
                var protectedCompletion = {
                  habitId: habitId,
                  userId: userId,
                  completedAt: _firestore.Timestamp.fromDate((0, _dateUtils.parseDateString)(missedDate)),
                  timezone: (0, _dateUtils.getUserTimezone)(),
                  notes: "Protected by streak freeze",
                  difficulty: "easy",
                  createdAt: (0, _firestore.serverTimestamp)()
                };
                var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
                var completionRef = (0, _firestore.doc)(completionsCollection);
                transaction.set(completionRef, protectedCompletion);
                var streakData = (0, _habitStreakSchemas.transformStreakToFirestore)(updatedStreak);
                transaction.set(streakDocRef, streakData);
                return true;
              });
              return function (_x0) {
                return _ref6.apply(this, arguments);
              };
            }());
          }));
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to use streak freeze: ${message}`);
        }
      });
      function useStreakFreeze(_x7, _x8, _x9) {
        return _useStreakFreeze.apply(this, arguments);
      }
      return useStreakFreeze;
    }())
  }, {
    key: "getHabitCalendar",
    value: (function () {
      var _getHabitCalendar = (0, _asyncToGenerator2.default)(function* (habitId, userId, days, timezone) {
        var _this2 = this;
        if (!habitId || !userId) {
          throw new Error("Habit ID and User ID are required");
        }
        try {
          return yield (0, _errorHandling.retryWithBackoff)((0, _asyncToGenerator2.default)(function* () {
            var endDate = (0, _dateUtils.getCurrentDateString)(timezone);
            var startDate = (0, _dateUtils.formatDateToString)(new Date(Date.now() - (days - 1) * 24 * 60 * 60 * 1000), timezone);
            var completionsCollection = (0, _collections.getHabitCompletionsCollection)();
            var completionsQuery = (0, _firestore.query)(completionsCollection, (0, _firestore.where)("habitId", "==", habitId), (0, _firestore.where)("userId", "==", userId));
            var completionsSnapshot = yield (0, _firestore.getDocs)(completionsQuery);
            var completions = completionsSnapshot.docs.map(function (doc) {
              return (0, _habitStreakSchemas.transformFirestoreToCompletion)(doc.id, doc.data());
            }).filter(function (completion) {
              var compDateString = (0, _dateUtils.timestampToDateString)(completion.completedAt, timezone);
              return compDateString >= startDate && compDateString <= endDate;
            });
            var streak = yield _this2.getHabitStreak(habitId, userId);
            var dateRange = (0, _dateUtils.generateDateRange)(startDate, endDate);
            var calendarDays = dateRange.map(function (date) {
              var completion = completions.find(function (comp) {
                return (0, _dateUtils.timestampToDateString)(comp.completedAt, timezone) === date;
              });
              var isInStreak = _this2.isDateInCurrentStreak(date, streak);
              return {
                date: date,
                completed: !!completion,
                isToday: (0, _dateUtils.isToday)(date, timezone),
                isInStreak: isInStreak,
                completionTime: completion ? completion.completedAt.toDate().toLocaleTimeString() : undefined,
                notes: completion == null ? void 0 : completion.notes
              };
            });
            return calendarDays;
          }));
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to get habit calendar: ${message}`);
        }
      });
      function getHabitCalendar(_x1, _x10, _x11, _x12) {
        return _getHabitCalendar.apply(this, arguments);
      }
      return getHabitCalendar;
    }())
  }, {
    key: "checkMilestones",
    value: (function () {
      var _checkMilestones = (0, _asyncToGenerator2.default)(function* (streak) {
        var newMilestones = [];
        var existingMilestoneDays = streak.milestones.map(function (m) {
          return m.days;
        });
        for (var milestoneDay of _habitStreaks.MILESTONE_DAYS) {
          if (streak.currentStreak >= milestoneDay && !existingMilestoneDays.includes(milestoneDay)) {
            var milestone = {
              days: milestoneDay,
              achievedAt: _firestore.Timestamp.now(),
              celebrated: false
            };
            newMilestones.push(milestone);
            if (milestoneDay === 30) {
              streak.freezesAvailable += 1;
            }
          }
        }
        if (newMilestones.length > 0) {
          var updatedStreak = Object.assign({}, streak, {
            milestones: [].concat((0, _toConsumableArray2.default)(streak.milestones), newMilestones),
            freezesAvailable: streak.freezesAvailable
          });
          var streakId = (0, _habitStreakSchemas.generateStreakId)(streak.userId, streak.habitId);
          var streaksCollection = (0, _collections.getHabitStreaksCollection)();
          var streakDocRef = (0, _firestore.doc)(streaksCollection, streakId);
          var streakData = (0, _habitStreakSchemas.transformStreakToFirestore)(updatedStreak);
          yield (0, _firestore.runTransaction)(_firebaseConfig.db, function () {
            var _ref8 = (0, _asyncToGenerator2.default)(function* (transaction) {
              transaction.set(streakDocRef, streakData);
            });
            return function (_x14) {
              return _ref8.apply(this, arguments);
            };
          }());
          for (var _milestone of newMilestones) {
            try {
              var habitName = yield this.getHabitName(streak.habitId);
              console.log(`Milestone achieved: ${_milestone.days} days for ${habitName}`);
            } catch (error) {
              console.error("Error logging milestone achievement:", error);
            }
          }
        }
        return newMilestones;
      });
      function checkMilestones(_x13) {
        return _checkMilestones.apply(this, arguments);
      }
      return checkMilestones;
    }())
  }, {
    key: "getHabitStreak",
    value: (function () {
      var _getHabitStreak = (0, _asyncToGenerator2.default)(function* (habitId, userId) {
        if (!habitId || !userId) {
          throw new Error("Habit ID and User ID are required");
        }
        try {
          var streakId = (0, _habitStreakSchemas.generateStreakId)(userId, habitId);
          var streaksCollection = (0, _collections.getHabitStreaksCollection)();
          var streakDocRef = (0, _firestore.doc)(streaksCollection, streakId);
          var streakDoc = yield (0, _firestore.getDoc)(streakDocRef);
          if (!streakDoc.exists()) {
            return null;
          }
          var streakData = streakDoc.data();
          if (!(0, _habitStreakSchemas.validateStreakDocument)(streakData)) {
            throw new Error("Invalid streak data format");
          }
          return (0, _habitStreakSchemas.transformFirestoreToStreak)(streakData);
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to get habit streak: ${message}`);
        }
      });
      function getHabitStreak(_x15, _x16) {
        return _getHabitStreak.apply(this, arguments);
      }
      return getHabitStreak;
    }())
  }, {
    key: "initializeHabitStreak",
    value: (function () {
      var _initializeHabitStreak = (0, _asyncToGenerator2.default)(function* (habitId, userId) {
        if (!habitId || !userId) {
          throw new Error("Habit ID and User ID are required");
        }
        var currentDate = (0, _dateUtils.getCurrentDateString)((0, _dateUtils.getUserTimezone)());
        var initialStreak = {
          habitId: habitId,
          userId: userId,
          currentStreak: 0,
          bestStreak: 0,
          lastCompletionDate: "",
          streakStartDate: currentDate,
          freezesAvailable: 0,
          freezesUsed: 0,
          milestones: []
        };
        try {
          var streakId = (0, _habitStreakSchemas.generateStreakId)(userId, habitId);
          var streaksCollection = (0, _collections.getHabitStreaksCollection)();
          var streakDocRef = (0, _firestore.doc)(streaksCollection, streakId);
          var streakData = (0, _habitStreakSchemas.transformStreakToFirestore)(initialStreak);
          yield (0, _firestore.runTransaction)(_firebaseConfig.db, function () {
            var _ref9 = (0, _asyncToGenerator2.default)(function* (transaction) {
              transaction.set(streakDocRef, streakData);
            });
            return function (_x19) {
              return _ref9.apply(this, arguments);
            };
          }());
          return initialStreak;
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to initialize habit streak: ${message}`);
        }
      });
      function initializeHabitStreak(_x17, _x18) {
        return _initializeHabitStreak.apply(this, arguments);
      }
      return initializeHabitStreak;
    }())
  }, {
    key: "resetStreak",
    value: (function () {
      var _resetStreak = (0, _asyncToGenerator2.default)(function* (habitId, userId, resetDate) {
        var _this3 = this;
        if (!habitId || !userId || !resetDate) {
          throw new Error("Habit ID, User ID, and reset date are required");
        }
        try {
          return yield (0, _errorHandling.retryWithBackoff)((0, _asyncToGenerator2.default)(function* () {
            return yield (0, _firestore.runTransaction)(_firebaseConfig.db, function () {
              var _ref1 = (0, _asyncToGenerator2.default)(function* (transaction) {
                var streakId = (0, _habitStreakSchemas.generateStreakId)(userId, habitId);
                var streaksCollection = (0, _collections.getHabitStreaksCollection)();
                var streakDocRef = (0, _firestore.doc)(streaksCollection, streakId);
                var streakDoc = yield transaction.get(streakDocRef);
                if (!streakDoc.exists()) {
                  throw new Error("Streak data not found");
                }
                var streak = (0, _habitStreakSchemas.transformFirestoreToStreak)(streakDoc.data());
                if (!(0, _habitStreakSchemas.validateUserOwnership)(userId, streak.userId)) {
                  throw new Error("Unauthorized access to streak data");
                }
                var resetStreak = Object.assign({}, streak, {
                  currentStreak: 0,
                  lastCompletionDate: "",
                  streakStartDate: resetDate
                });
                var streakData = (0, _habitStreakSchemas.transformStreakToFirestore)(resetStreak);
                transaction.set(streakDocRef, streakData);
                try {
                  var habitName = yield _this3.getHabitName(habitId);
                  console.log(`Streak broken for ${habitName}, recovery notification will be scheduled`);
                } catch (error) {
                  console.error("Error scheduling recovery notification:", error);
                }
                return resetStreak;
              });
              return function (_x23) {
                return _ref1.apply(this, arguments);
              };
            }());
          }));
        } catch (error) {
          var message = (0, _errorHandling.getUserFriendlyErrorMessage)(error);
          throw new Error(`Failed to reset streak: ${message}`);
        }
      });
      function resetStreak(_x20, _x21, _x22) {
        return _resetStreak.apply(this, arguments);
      }
      return resetStreak;
    }())
  }, {
    key: "calculateStreakFromCompletions",
    value: function calculateStreakFromCompletions(completions, habitId, userId) {
      var _completions$;
      if (completions.length === 0) {
        return {
          habitId: habitId,
          userId: userId,
          currentStreak: 0,
          bestStreak: 0,
          lastCompletionDate: "",
          streakStartDate: (0, _dateUtils.getCurrentDateString)((0, _dateUtils.getUserTimezone)()),
          freezesAvailable: 0,
          freezesUsed: 0,
          milestones: []
        };
      }
      var timezone = ((_completions$ = completions[0]) == null ? void 0 : _completions$.timezone) || (0, _dateUtils.getUserTimezone)();
      var completionDates = completions.map(function (comp) {
        return (0, _dateUtils.timestampToDateString)(comp.completedAt, timezone);
      });
      var uniqueDates = Array.from(new Set(completionDates)).sort();
      var currentStreak = 0;
      var streakStartDate = "";
      var today = (0, _dateUtils.getCurrentDateString)(timezone);
      var yesterday = (0, _dateUtils.formatDateToString)(new Date(Date.now() - 24 * 60 * 60 * 1000), timezone);
      var lastCompletionDate = uniqueDates[uniqueDates.length - 1];
      if (lastCompletionDate === today || lastCompletionDate === yesterday) {
        currentStreak = 1;
        streakStartDate = lastCompletionDate;
        for (var i = uniqueDates.length - 2; i >= 0; i--) {
          var currentDate = uniqueDates[i + 1];
          var previousDate = uniqueDates[i];
          if ((0, _dateUtils.areConsecutiveDays)(previousDate, currentDate)) {
            currentStreak++;
            streakStartDate = previousDate;
          } else {
            break;
          }
        }
      }
      var bestStreak = 0;
      var tempStreak = 1;
      for (var _i = 1; _i < uniqueDates.length; _i++) {
        if ((0, _dateUtils.areConsecutiveDays)(uniqueDates[_i - 1], uniqueDates[_i])) {
          tempStreak++;
        } else {
          bestStreak = Math.max(bestStreak, tempStreak);
          tempStreak = 1;
        }
      }
      bestStreak = Math.max(bestStreak, tempStreak, currentStreak);
      return {
        habitId: habitId,
        userId: userId,
        currentStreak: currentStreak,
        bestStreak: bestStreak,
        lastCompletionDate: lastCompletionDate,
        streakStartDate: streakStartDate,
        freezesAvailable: 0,
        freezesUsed: 0,
        milestones: []
      };
    }
  }, {
    key: "mergeStreakData",
    value: function mergeStreakData(calculated, existing) {
      if (!existing) {
        return calculated;
      }
      return Object.assign({}, calculated, {
        freezesAvailable: existing.freezesAvailable,
        freezesUsed: existing.freezesUsed,
        milestones: existing.milestones,
        bestStreak: Math.max(calculated.bestStreak, existing.bestStreak)
      });
    }
  }, {
    key: "getHabitName",
    value: function () {
      var _getHabitName = (0, _asyncToGenerator2.default)(function* (habitId) {
        try {
          var goalRef = (0, _firestore.doc)(_firebaseConfig.db, `artifacts/oath-app/public/data/goals/${habitId}`);
          var goalDoc = yield (0, _firestore.getDoc)(goalRef);
          if (goalDoc.exists()) {
            var goalData = goalDoc.data();
            return goalData.description || "Your habit";
          }
          return "Your habit";
        } catch (error) {
          console.error("Error getting habit name:", error);
          return "Your habit";
        }
      });
      function getHabitName(_x24) {
        return _getHabitName.apply(this, arguments);
      }
      return getHabitName;
    }()
  }, {
    key: "isDateInCurrentStreak",
    value: function isDateInCurrentStreak(date, streak) {
      if (!streak || streak.currentStreak === 0 || !streak.streakStartDate) {
        return false;
      }
      var streakStart = (0, _dateUtils.parseDateString)(streak.streakStartDate);
      var checkDate = (0, _dateUtils.parseDateString)(date);
      var streakEnd = new Date(streakStart);
      streakEnd.setDate(streakEnd.getDate() + streak.currentStreak - 1);
      return checkDate >= streakStart && checkDate <= streakEnd;
    }
  }]);
}();
var streakService = exports.streakService = new StreakService();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZmlyZXN0b3JlIiwicmVxdWlyZSIsIl9maXJlYmFzZUNvbmZpZyIsIl9oYWJpdFN0cmVha3MiLCJfZGF0ZVV0aWxzIiwiX2Vycm9ySGFuZGxpbmciLCJfY29sbGVjdGlvbnMiLCJfaGFiaXRTdHJlYWtTY2hlbWFzIiwiU3RyZWFrU2VydmljZSIsImV4cG9ydHMiLCJfY2xhc3NDYWxsQ2hlY2syIiwiZGVmYXVsdCIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsIl9jYWxjdWxhdGVTdHJlYWsiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJoYWJpdElkIiwidXNlcklkIiwiX3RoaXMiLCJFcnJvciIsInJldHJ5V2l0aEJhY2tvZmYiLCJydW5UcmFuc2FjdGlvbiIsImRiIiwiX3JlZjIiLCJ0cmFuc2FjdGlvbiIsInN0cmVha0lkIiwiZ2VuZXJhdGVTdHJlYWtJZCIsInN0cmVha3NDb2xsZWN0aW9uIiwiZ2V0SGFiaXRTdHJlYWtzQ29sbGVjdGlvbiIsInN0cmVha0RvY1JlZiIsImRvYyIsInN0cmVha0RvYyIsImdldCIsImNvbXBsZXRpb25zQ29sbGVjdGlvbiIsImdldEhhYml0Q29tcGxldGlvbnNDb2xsZWN0aW9uIiwiY29tcGxldGlvbnNRdWVyeSIsInF1ZXJ5Iiwid2hlcmUiLCJjb21wbGV0aW9uc1NuYXBzaG90IiwiZ2V0RG9jcyIsImNvbXBsZXRpb25zIiwiZG9jcyIsIm1hcCIsInRyYW5zZm9ybUZpcmVzdG9yZVRvQ29tcGxldGlvbiIsImlkIiwiZGF0YSIsInNvcnQiLCJhIiwiYiIsImNvbXBsZXRlZEF0IiwidG9NaWxsaXMiLCJjYWxjdWxhdGVkU3RyZWFrIiwiY2FsY3VsYXRlU3RyZWFrRnJvbUNvbXBsZXRpb25zIiwiZXhpc3RpbmdTdHJlYWsiLCJleGlzdHMiLCJ0cmFuc2Zvcm1GaXJlc3RvcmVUb1N0cmVhayIsInVwZGF0ZWRTdHJlYWsiLCJtZXJnZVN0cmVha0RhdGEiLCJpbnRlZ3JpdHlDaGVjayIsImRhdGFJbnRlZ3JpdHlTZXJ2aWNlIiwidmVyaWZ5U3RyZWFrSW50ZWdyaXR5IiwiaXNWYWxpZCIsImNvbnNvbGUiLCJ3YXJuIiwiZXJyb3JzIiwiZmluYWxTdHJlYWsiLCJjb3JyZWN0ZWREYXRhIiwic3RyZWFrRGF0YSIsInRyYW5zZm9ybVN0cmVha1RvRmlyZXN0b3JlIiwic2V0IiwiX3gzIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJlcnJvciIsIm1lc3NhZ2UiLCJnZXRVc2VyRnJpZW5kbHlFcnJvck1lc3NhZ2UiLCJjYWxjdWxhdGVTdHJlYWsiLCJfeCIsIl94MiIsIl9yZWNvcmRDb21wbGV0aW9uIiwiY29tcGxldGlvbiIsInVzZXJUaW1lem9uZSIsInRpbWV6b25lIiwiZ2V0VXNlclRpbWV6b25lIiwiY29tcGxldGlvbkRhdGVTdHJpbmciLCJ0aW1lc3RhbXBUb0RhdGVTdHJpbmciLCJjdXJyZW50RGF0ZVN0cmluZyIsImdldEN1cnJlbnREYXRlU3RyaW5nIiwiX3JlZjQiLCJleGlzdGluZ0NvbXBsZXRpb25zUXVlcnkiLCJleGlzdGluZ1NuYXBzaG90IiwiZXhpc3RpbmdDb21wbGV0aW9ucyIsImZpbHRlciIsImNvbXAiLCJjb21wRGF0ZVN0cmluZyIsImxlbmd0aCIsImNvbXBsZXRpb25EYXRhIiwibm90ZXMiLCJkaWZmaWN1bHR5IiwiY3JlYXRlZEF0Iiwic2VydmVyVGltZXN0YW1wIiwiY29tcGxldGlvblJlZiIsIm5ld0NvbXBsZXRpb24iLCJPYmplY3QiLCJhc3NpZ24iLCJzeW5jU2VydmljZSIsInF1ZXVlT3BlcmF0aW9uIiwidHlwZSIsImFjdGlvbiIsIl94NSIsInJlY29yZENvbXBsZXRpb24iLCJfeDQiLCJfcmVjb3JkQ29tcGxldGlvbldpdGhNaWxlc3RvbmVDaGVjayIsInJlY29yZGVkQ29tcGxldGlvbiIsIm5ld01pbGVzdG9uZXMiLCJjaGVja01pbGVzdG9uZXMiLCJyZWNvcmRDb21wbGV0aW9uV2l0aE1pbGVzdG9uZUNoZWNrIiwiX3g2IiwiX3VzZVN0cmVha0ZyZWV6ZSIsIm1pc3NlZERhdGUiLCJfcmVmNiIsInN0cmVhayIsInZhbGlkYXRlVXNlck93bmVyc2hpcCIsImZyZWV6ZXNBdmFpbGFibGUiLCJmcmVlemVzVXNlZCIsInByb3RlY3RlZENvbXBsZXRpb24iLCJUaW1lc3RhbXAiLCJmcm9tRGF0ZSIsInBhcnNlRGF0ZVN0cmluZyIsIl94MCIsInVzZVN0cmVha0ZyZWV6ZSIsIl94NyIsIl94OCIsIl94OSIsIl9nZXRIYWJpdENhbGVuZGFyIiwiZGF5cyIsIl90aGlzMiIsImVuZERhdGUiLCJzdGFydERhdGUiLCJmb3JtYXREYXRlVG9TdHJpbmciLCJEYXRlIiwibm93IiwiZ2V0SGFiaXRTdHJlYWsiLCJkYXRlUmFuZ2UiLCJnZW5lcmF0ZURhdGVSYW5nZSIsImNhbGVuZGFyRGF5cyIsImRhdGUiLCJmaW5kIiwiaXNJblN0cmVhayIsImlzRGF0ZUluQ3VycmVudFN0cmVhayIsImNvbXBsZXRlZCIsImlzVG9kYXkiLCJjb21wbGV0aW9uVGltZSIsInRvRGF0ZSIsInRvTG9jYWxlVGltZVN0cmluZyIsInVuZGVmaW5lZCIsImdldEhhYml0Q2FsZW5kYXIiLCJfeDEiLCJfeDEwIiwiX3gxMSIsIl94MTIiLCJfY2hlY2tNaWxlc3RvbmVzIiwiZXhpc3RpbmdNaWxlc3RvbmVEYXlzIiwibWlsZXN0b25lcyIsIm0iLCJtaWxlc3RvbmVEYXkiLCJNSUxFU1RPTkVfREFZUyIsImN1cnJlbnRTdHJlYWsiLCJpbmNsdWRlcyIsIm1pbGVzdG9uZSIsImFjaGlldmVkQXQiLCJjZWxlYnJhdGVkIiwicHVzaCIsImNvbmNhdCIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJfcmVmOCIsIl94MTQiLCJoYWJpdE5hbWUiLCJnZXRIYWJpdE5hbWUiLCJsb2ciLCJfeDEzIiwiX2dldEhhYml0U3RyZWFrIiwiZ2V0RG9jIiwidmFsaWRhdGVTdHJlYWtEb2N1bWVudCIsIl94MTUiLCJfeDE2IiwiX2luaXRpYWxpemVIYWJpdFN0cmVhayIsImN1cnJlbnREYXRlIiwiaW5pdGlhbFN0cmVhayIsImJlc3RTdHJlYWsiLCJsYXN0Q29tcGxldGlvbkRhdGUiLCJzdHJlYWtTdGFydERhdGUiLCJfcmVmOSIsIl94MTkiLCJpbml0aWFsaXplSGFiaXRTdHJlYWsiLCJfeDE3IiwiX3gxOCIsIl9yZXNldFN0cmVhayIsInJlc2V0RGF0ZSIsIl90aGlzMyIsIl9yZWYxIiwicmVzZXRTdHJlYWsiLCJfeDIzIiwiX3gyMCIsIl94MjEiLCJfeDIyIiwiX2NvbXBsZXRpb25zJCIsImNvbXBsZXRpb25EYXRlcyIsInVuaXF1ZURhdGVzIiwiQXJyYXkiLCJmcm9tIiwiU2V0IiwidG9kYXkiLCJ5ZXN0ZXJkYXkiLCJpIiwicHJldmlvdXNEYXRlIiwiYXJlQ29uc2VjdXRpdmVEYXlzIiwidGVtcFN0cmVhayIsIk1hdGgiLCJtYXgiLCJjYWxjdWxhdGVkIiwiZXhpc3RpbmciLCJfZ2V0SGFiaXROYW1lIiwiZ29hbFJlZiIsImdvYWxEb2MiLCJnb2FsRGF0YSIsImRlc2NyaXB0aW9uIiwiX3gyNCIsInN0cmVha1N0YXJ0IiwiY2hlY2tEYXRlIiwic3RyZWFrRW5kIiwic2V0RGF0ZSIsImdldERhdGUiLCJzdHJlYWtTZXJ2aWNlIl0sInNvdXJjZXMiOlsic3RyZWFrU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIGRvYyxcbiAgICBnZXREb2MsXG4gICAgZ2V0RG9jcyxcbiAgICBxdWVyeSxcbiAgICBydW5UcmFuc2FjdGlvbixcbiAgICBzZXJ2ZXJUaW1lc3RhbXAsXG4gICAgVGltZXN0YW1wLFxuICAgIHdoZXJlLFxufSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5pbXBvcnQgeyBkYiB9IGZyb20gXCIuLi8uLi9maXJlYmFzZUNvbmZpZ1wiO1xuaW1wb3J0IHtcbiAgICBDYWxlbmRhckRheSxcbiAgICBIYWJpdENvbXBsZXRpb24sXG4gICAgSGFiaXRTdHJlYWssXG4gICAgTUlMRVNUT05FX0RBWVMsXG4gICAgU3RyZWFrTWlsZXN0b25lLFxufSBmcm9tIFwiLi4vLi4vdHlwZXMvaGFiaXQtc3RyZWFrc1wiO1xuaW1wb3J0IHtcbiAgICBhcmVDb25zZWN1dGl2ZURheXMsXG4gICAgZm9ybWF0RGF0ZVRvU3RyaW5nLFxuICAgIGdlbmVyYXRlRGF0ZVJhbmdlLFxuICAgIGdldEN1cnJlbnREYXRlU3RyaW5nLFxuICAgIGdldFVzZXJUaW1lem9uZSxcbiAgICBpc1RvZGF5LFxuICAgIHBhcnNlRGF0ZVN0cmluZyxcbiAgICB0aW1lc3RhbXBUb0RhdGVTdHJpbmcsXG59IGZyb20gXCIuLi8uLi91dGlscy9kYXRlVXRpbHNcIjtcbmltcG9ydCB7XG4gICAgZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlLFxuICAgIHJldHJ5V2l0aEJhY2tvZmYsXG59IGZyb20gXCIuLi8uLi91dGlscy9lcnJvckhhbmRsaW5nXCI7XG5pbXBvcnQge1xuICAgIGdldEhhYml0Q29tcGxldGlvbnNDb2xsZWN0aW9uLFxuICAgIGdldEhhYml0U3RyZWFrc0NvbGxlY3Rpb24sXG59IGZyb20gXCIuL2NvbGxlY3Rpb25zXCI7XG5pbXBvcnQgeyBTdHJlYWtTZXJ2aWNlIGFzIElTdHJlYWtTZXJ2aWNlIH0gZnJvbSBcIi4vaGFiaXRTdHJlYWtJbnRlcmZhY2VzXCI7XG5pbXBvcnQge1xuICAgIGdlbmVyYXRlU3RyZWFrSWQsXG4gICAgdHJhbnNmb3JtRmlyZXN0b3JlVG9Db21wbGV0aW9uLFxuICAgIHRyYW5zZm9ybUZpcmVzdG9yZVRvU3RyZWFrLFxuICAgIHRyYW5zZm9ybVN0cmVha1RvRmlyZXN0b3JlLFxuICAgIHZhbGlkYXRlU3RyZWFrRG9jdW1lbnQsXG4gICAgdmFsaWRhdGVVc2VyT3duZXJzaGlwLFxufSBmcm9tIFwiLi9oYWJpdFN0cmVha1NjaGVtYXNcIjtcblxuLyoqXG4gKiBTdHJlYWtTZXJ2aWNlIEltcGxlbWVudGF0aW9uXG4gKlxuICogSGFuZGxlcyBhbGwgc3RyZWFrIGNhbGN1bGF0aW9uLCB0cmFja2luZywgYW5kIG1hbmFnZW1lbnQgZnVuY3Rpb25hbGl0eVxuICogd2l0aCB0aW1lem9uZSBhd2FyZW5lc3MgYW5kIGRhdGEgaW50ZWdyaXR5IHByb3RlY3Rpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJlYWtTZXJ2aWNlIGltcGxlbWVudHMgSVN0cmVha1NlcnZpY2Uge1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBhbmQgdXBkYXRlIHN0cmVhayBpbmZvcm1hdGlvbiBmb3IgYSBoYWJpdFxuICAgICAqIFJlcXVpcmVtZW50czogMS4xLCAxLjIsIDEuMywgMTAuMiwgMTIuNFxuICAgICAqL1xuICAgIGFzeW5jIGNhbGN1bGF0ZVN0cmVhayhoYWJpdElkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxIYWJpdFN0cmVhaz4ge1xuICAgICAgICBpZiAoIWhhYml0SWQgfHwgIXVzZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSGFiaXQgSUQgYW5kIFVzZXIgSUQgYXJlIHJlcXVpcmVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXRyeVdpdGhCYWNrb2ZmKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgcnVuVHJhbnNhY3Rpb24oZGIsIGFzeW5jICh0cmFuc2FjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgY3VycmVudCBzdHJlYWsgZGF0YVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYWtJZCA9IGdlbmVyYXRlU3RyZWFrSWQodXNlcklkLCBoYWJpdElkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFrc0NvbGxlY3Rpb24gPSBnZXRIYWJpdFN0cmVha3NDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVha0RvY1JlZiA9IGRvYyhzdHJlYWtzQ29sbGVjdGlvbiwgc3RyZWFrSWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYWtEb2MgPSBhd2FpdCB0cmFuc2FjdGlvbi5nZXQoc3RyZWFrRG9jUmVmKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgYWxsIGNvbXBsZXRpb25zIGZvciB0aGlzIGhhYml0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25zQ29sbGVjdGlvbiA9IGdldEhhYml0Q29tcGxldGlvbnNDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25zUXVlcnkgPSBxdWVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zQ29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlKFwiaGFiaXRJZFwiLCBcIj09XCIsIGhhYml0SWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmUoXCJ1c2VySWRcIiwgXCI9PVwiLCB1c2VySWQpLFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uc1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb21wbGV0aW9uc1F1ZXJ5KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBUcmFuc2Zvcm0gY29tcGxldGlvbnMgYW5kIHNvcnQgYnkgZGF0ZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9ucyA9IGNvbXBsZXRpb25zU25hcHNob3QuZG9jc1xuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jKSA9PiB0cmFuc2Zvcm1GaXJlc3RvcmVUb0NvbXBsZXRpb24oZG9jLmlkLCBkb2MuZGF0YSgpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhLCBiKSA9PiBhLmNvbXBsZXRlZEF0LnRvTWlsbGlzKCkgLSBiLmNvbXBsZXRlZEF0LnRvTWlsbGlzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBzdHJlYWsgZnJvbSBjb21wbGV0aW9uc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWxjdWxhdGVkU3RyZWFrID0gdGhpcy5jYWxjdWxhdGVTdHJlYWtGcm9tQ29tcGxldGlvbnMoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhYml0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2Ugd2l0aCBleGlzdGluZyBkYXRhIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICBsZXQgZXhpc3RpbmdTdHJlYWs6IEhhYml0U3RyZWFrIHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHJlYWtEb2MuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nU3RyZWFrID0gdHJhbnNmb3JtRmlyZXN0b3JlVG9TdHJlYWsoc3RyZWFrRG9jLmRhdGEoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkU3RyZWFrID0gdGhpcy5tZXJnZVN0cmVha0RhdGEoXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxjdWxhdGVkU3RyZWFrLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdTdHJlYWssXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZ5IGRhdGEgaW50ZWdyaXR5IGJlZm9yZSBzYXZpbmdcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZWdyaXR5Q2hlY2sgPVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGF0YUludGVncml0eVNlcnZpY2UudmVyaWZ5U3RyZWFrSW50ZWdyaXR5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhYml0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRTdHJlYWssXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW50ZWdyaXR5Q2hlY2suaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiU3RyZWFrIGludGVncml0eSBpc3N1ZXMgZGV0ZWN0ZWQ6XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyaXR5Q2hlY2suZXJyb3JzLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSBjb3JyZWN0ZWQgZGF0YSBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsU3RyZWFrID0gaW50ZWdyaXR5Q2hlY2suY29ycmVjdGVkRGF0YSB8fCB1cGRhdGVkU3RyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIGNvcnJlY3RlZCBzdHJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVha0RhdGEgPSB0cmFuc2Zvcm1TdHJlYWtUb0ZpcmVzdG9yZShmaW5hbFN0cmVhayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5zZXQoc3RyZWFrRG9jUmVmLCBzdHJlYWtEYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbmFsU3RyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB1cGRhdGVkIHN0cmVha1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYWtEYXRhID0gdHJhbnNmb3JtU3RyZWFrVG9GaXJlc3RvcmUodXBkYXRlZFN0cmVhayk7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnNldChzdHJlYWtEb2NSZWYsIHN0cmVha0RhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkU3RyZWFrO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlKGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNhbGN1bGF0ZSBzdHJlYWs6ICR7bWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlY29yZCBhIG5ldyBoYWJpdCBjb21wbGV0aW9uIGFuZCB1cGRhdGUgc3RyZWFrXG4gICAgICogUmVxdWlyZW1lbnRzOiA1LjEsIDEyLjEsIDEwLjRcbiAgICAgKi9cbiAgICBhc3luYyByZWNvcmRDb21wbGV0aW9uKFxuICAgICAgICBjb21wbGV0aW9uOiBPbWl0PEhhYml0Q29tcGxldGlvbiwgXCJpZFwiPixcbiAgICApOiBQcm9taXNlPEhhYml0Q29tcGxldGlvbj4ge1xuICAgICAgICBpZiAoIWNvbXBsZXRpb24uaGFiaXRJZCB8fCAhY29tcGxldGlvbi51c2VySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkhhYml0IElEIGFuZCBVc2VyIElEIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZhbGlkYXRlIHRpbWV6b25lLWF3YXJlIGNvbXBsZXRpb25cbiAgICAgICAgY29uc3QgdXNlclRpbWV6b25lID0gY29tcGxldGlvbi50aW1lem9uZSB8fCBnZXRVc2VyVGltZXpvbmUoKTtcbiAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGVTdHJpbmcgPSB0aW1lc3RhbXBUb0RhdGVTdHJpbmcoXG4gICAgICAgICAgICBjb21wbGV0aW9uLmNvbXBsZXRlZEF0LFxuICAgICAgICAgICAgdXNlclRpbWV6b25lLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZVN0cmluZyA9IGdldEN1cnJlbnREYXRlU3RyaW5nKHVzZXJUaW1lem9uZSk7XG5cbiAgICAgICAgLy8gRW5zdXJlIGNvbXBsZXRpb24gaXMgZm9yIGN1cnJlbnQgZGF5IG9yIGVhcmxpZXIgKHByZXZlbnQgZnV0dXJlIGNvbXBsZXRpb25zKVxuICAgICAgICBpZiAoY29tcGxldGlvbkRhdGVTdHJpbmcgPiBjdXJyZW50RGF0ZVN0cmluZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHJlY29yZCBjb21wbGV0aW9ucyBmb3IgZnV0dXJlIGRhdGVzXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXRyeVdpdGhCYWNrb2ZmKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgcnVuVHJhbnNhY3Rpb24oZGIsIGFzeW5jICh0cmFuc2FjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgY29tcGxldGlvbiBvbiB0aGUgc2FtZSBkYXRlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25zQ29sbGVjdGlvbiA9IGdldEhhYml0Q29tcGxldGlvbnNDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQ29tcGxldGlvbnNRdWVyeSA9IHF1ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbnNDb2xsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmUoXCJoYWJpdElkXCIsIFwiPT1cIiwgY29tcGxldGlvbi5oYWJpdElkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlKFwidXNlcklkXCIsIFwiPT1cIiwgY29tcGxldGlvbi51c2VySWQpLFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhleGlzdGluZ0NvbXBsZXRpb25zUXVlcnkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQ29tcGxldGlvbnMgPSBleGlzdGluZ1NuYXBzaG90LmRvY3NcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYykgPT4gdHJhbnNmb3JtRmlyZXN0b3JlVG9Db21wbGV0aW9uKGRvYy5pZCwgZG9jLmRhdGEoKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChjb21wKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcERhdGVTdHJpbmcgPSB0aW1lc3RhbXBUb0RhdGVTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXAuY29tcGxldGVkQXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJUaW1lem9uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wRGF0ZVN0cmluZyA9PT0gY29tcGxldGlvbkRhdGVTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdDb21wbGV0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJIYWJpdCBhbHJlYWR5IGNvbXBsZXRlZCBmb3IgdGhpcyBkYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGNvbXBsZXRpb24gcmVjb3JkIHdpdGggbWV0YWRhdGFcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYWJpdElkOiBjb21wbGV0aW9uLmhhYml0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGNvbXBsZXRpb24udXNlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkQXQ6IGNvbXBsZXRpb24uY29tcGxldGVkQXQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lem9uZTogdXNlclRpbWV6b25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm90ZXM6IGNvbXBsZXRpb24ubm90ZXMgfHwgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IGNvbXBsZXRpb24uZGlmZmljdWx0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvblJlZiA9IGRvYyhjb21wbGV0aW9uc0NvbGxlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5zZXQoY29tcGxldGlvblJlZiwgY29tcGxldGlvbkRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbXBsZXRpb246IEhhYml0Q29tcGxldGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb21wbGV0aW9uUmVmLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29tcGxldGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWV6b25lOiB1c2VyVGltZXpvbmUsXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUXVldWUgZm9yIHN5bmMgdG8gb3RoZXIgZGV2aWNlc1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzeW5jU2VydmljZS5xdWV1ZU9wZXJhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNvbXBsZXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJjcmVhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGNvbXBsZXRpb25EYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjb21wbGV0aW9uLnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhYml0SWQ6IGNvbXBsZXRpb24uaGFiaXRJZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0NvbXBsZXRpb247XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBnZXRVc2VyRnJpZW5kbHlFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcmVjb3JkIGNvbXBsZXRpb246ICR7bWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlY29yZCBjb21wbGV0aW9uIGFuZCBjaGVjayBmb3IgbWlsZXN0b25lIGFjaGlldmVtZW50c1xuICAgICAqIFRoaXMgaXMgdGhlIG1haW4gbWV0aG9kIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGEgdXNlciBjb21wbGV0ZXMgYSBoYWJpdFxuICAgICAqIFJlcXVpcmVtZW50czogMy4xLCAzLjIsIDUuMVxuICAgICAqL1xuICAgIGFzeW5jIHJlY29yZENvbXBsZXRpb25XaXRoTWlsZXN0b25lQ2hlY2soXG4gICAgICAgIGNvbXBsZXRpb246IE9taXQ8SGFiaXRDb21wbGV0aW9uLCBcImlkXCI+LFxuICAgICk6IFByb21pc2U8e1xuICAgICAgICBjb21wbGV0aW9uOiBIYWJpdENvbXBsZXRpb247XG4gICAgICAgIG5ld01pbGVzdG9uZXM6IFN0cmVha01pbGVzdG9uZVtdO1xuICAgICAgICB1cGRhdGVkU3RyZWFrOiBIYWJpdFN0cmVhaztcbiAgICB9PiB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgY29tcGxldGlvblxuICAgICAgICBjb25zdCByZWNvcmRlZENvbXBsZXRpb24gPSBhd2FpdCB0aGlzLnJlY29yZENvbXBsZXRpb24oY29tcGxldGlvbik7XG5cbiAgICAgICAgLy8gUmVjYWxjdWxhdGUgc3RyZWFrIHdpdGggdGhlIG5ldyBjb21wbGV0aW9uXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRTdHJlYWsgPSBhd2FpdCB0aGlzLmNhbGN1bGF0ZVN0cmVhayhcbiAgICAgICAgICAgIGNvbXBsZXRpb24uaGFiaXRJZCxcbiAgICAgICAgICAgIGNvbXBsZXRpb24udXNlcklkLFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIENoZWNrIGZvciBuZXcgbWlsZXN0b25lc1xuICAgICAgICBjb25zdCBuZXdNaWxlc3RvbmVzID0gYXdhaXQgdGhpcy5jaGVja01pbGVzdG9uZXModXBkYXRlZFN0cmVhayk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBsZXRpb246IHJlY29yZGVkQ29tcGxldGlvbixcbiAgICAgICAgICAgIG5ld01pbGVzdG9uZXMsXG4gICAgICAgICAgICB1cGRhdGVkU3RyZWFrLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSBhIHN0cmVhayBmcmVlemUgdG8gcHJvdGVjdCBmcm9tIGEgbWlzc2VkIGRheVxuICAgICAqIFJlcXVpcmVtZW50czogNC4xLCA0LjIsIDQuNVxuICAgICAqL1xuICAgIGFzeW5jIHVzZVN0cmVha0ZyZWV6ZShcbiAgICAgICAgaGFiaXRJZDogc3RyaW5nLFxuICAgICAgICB1c2VySWQ6IHN0cmluZyxcbiAgICAgICAgbWlzc2VkRGF0ZTogc3RyaW5nLFxuICAgICk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBpZiAoIWhhYml0SWQgfHwgIXVzZXJJZCB8fCAhbWlzc2VkRGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSGFiaXQgSUQsIFVzZXIgSUQsIGFuZCBtaXNzZWQgZGF0ZSBhcmUgcmVxdWlyZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJldHJ5V2l0aEJhY2tvZmYoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBydW5UcmFuc2FjdGlvbihkYiwgYXN5bmMgKHRyYW5zYWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVha0lkID0gZ2VuZXJhdGVTdHJlYWtJZCh1c2VySWQsIGhhYml0SWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYWtzQ29sbGVjdGlvbiA9IGdldEhhYml0U3RyZWFrc0NvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFrRG9jUmVmID0gZG9jKHN0cmVha3NDb2xsZWN0aW9uLCBzdHJlYWtJZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVha0RvYyA9IGF3YWl0IHRyYW5zYWN0aW9uLmdldChzdHJlYWtEb2NSZWYpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RyZWFrRG9jLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdHJlYWsgZGF0YSBub3QgZm91bmRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYWsgPSB0cmFuc2Zvcm1GaXJlc3RvcmVUb1N0cmVhayhzdHJlYWtEb2MuZGF0YSgpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBWYWxpZGF0ZSB1c2VyIG93bmVyc2hpcFxuICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbGlkYXRlVXNlck93bmVyc2hpcCh1c2VySWQsIHN0cmVhay51c2VySWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmF1dGhvcml6ZWQgYWNjZXNzIHRvIHN0cmVhayBkYXRhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZnJlZXplIGlzIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFrLmZyZWV6ZXNBdmFpbGFibGUgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBmcmVlemVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFN0cmVhazogSGFiaXRTdHJlYWsgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5zdHJlYWssXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmVlemVzQXZhaWxhYmxlOiBzdHJlYWsuZnJlZXplc0F2YWlsYWJsZSAtIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmVlemVzVXNlZDogc3RyZWFrLmZyZWV6ZXNVc2VkICsgMSxcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBcInByb3RlY3RlZFwiIGNvbXBsZXRpb24gcmVjb3JkIGZvciB0aGUgbWlzc2VkIGRhdGVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdGVjdGVkQ29tcGxldGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhYml0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRBdDogVGltZXN0YW1wLmZyb21EYXRlKHBhcnNlRGF0ZVN0cmluZyhtaXNzZWREYXRlKSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lem9uZTogZ2V0VXNlclRpbWV6b25lKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RlczogXCJQcm90ZWN0ZWQgYnkgc3RyZWFrIGZyZWV6ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eTogXCJlYXN5XCIgYXMgY29uc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25zQ29sbGVjdGlvbiA9IGdldEhhYml0Q29tcGxldGlvbnNDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25SZWYgPSBkb2MoY29tcGxldGlvbnNDb2xsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uc2V0KGNvbXBsZXRpb25SZWYsIHByb3RlY3RlZENvbXBsZXRpb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzdHJlYWsgZGF0YVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYWtEYXRhID0gdHJhbnNmb3JtU3RyZWFrVG9GaXJlc3RvcmUodXBkYXRlZFN0cmVhayk7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnNldChzdHJlYWtEb2NSZWYsIHN0cmVha0RhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZ2V0VXNlckZyaWVuZGx5RXJyb3JNZXNzYWdlKGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHVzZSBzdHJlYWsgZnJlZXplOiAke21lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY2FsZW5kYXIgZGF0YSBmb3IgYSBoYWJpdCBzaG93aW5nIGNvbXBsZXRpb24gc3RhdHVzXG4gICAgICogUmVxdWlyZW1lbnRzOiAyLjEsIDIuMiwgMi4zLCAyLjQsIDIuNVxuICAgICAqL1xuICAgIGFzeW5jIGdldEhhYml0Q2FsZW5kYXIoXG4gICAgICAgIGhhYml0SWQ6IHN0cmluZyxcbiAgICAgICAgdXNlcklkOiBzdHJpbmcsXG4gICAgICAgIGRheXM6IG51bWJlcixcbiAgICAgICAgdGltZXpvbmU6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPENhbGVuZGFyRGF5W10+IHtcbiAgICAgICAgaWYgKCFoYWJpdElkIHx8ICF1c2VySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkhhYml0IElEIGFuZCBVc2VyIElEIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcmV0cnlXaXRoQmFja29mZihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IGRhdGUgcmFuZ2UgZm9yIGNhbGVuZGFyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kRGF0ZSA9IGdldEN1cnJlbnREYXRlU3RyaW5nKHRpbWV6b25lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSBmb3JtYXREYXRlVG9TdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKERhdGUubm93KCkgLSAoZGF5cyAtIDEpICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgICAgICAgICAgICAgIHRpbWV6b25lLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgY29tcGxldGlvbnMgZm9yIHRoZSBkYXRlIHJhbmdlXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnNDb2xsZWN0aW9uID0gZ2V0SGFiaXRDb21wbGV0aW9uc0NvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uc1F1ZXJ5ID0gcXVlcnkoXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zQ29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgd2hlcmUoXCJoYWJpdElkXCIsIFwiPT1cIiwgaGFiaXRJZCksXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlKFwidXNlcklkXCIsIFwiPT1cIiwgdXNlcklkKSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25zU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbXBsZXRpb25zUXVlcnkpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbnMgPSBjb21wbGV0aW9uc1NuYXBzaG90LmRvY3NcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jKSA9PiB0cmFuc2Zvcm1GaXJlc3RvcmVUb0NvbXBsZXRpb24oZG9jLmlkLCBkb2MuZGF0YSgpKSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoY29tcGxldGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcERhdGVTdHJpbmcgPSB0aW1lc3RhbXBUb0RhdGVTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbi5jb21wbGV0ZWRBdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lem9uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcERhdGVTdHJpbmcgPj0gc3RhcnREYXRlICYmIGNvbXBEYXRlU3RyaW5nIDw9IGVuZERhdGU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gR2V0IHN0cmVhayBkYXRhIGZvciBoaWdobGlnaHRpbmdcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYWsgPSBhd2FpdCB0aGlzLmdldEhhYml0U3RyZWFrKGhhYml0SWQsIHVzZXJJZCk7XG5cbiAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBjYWxlbmRhciBkYXlzXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVJhbmdlID0gZ2VuZXJhdGVEYXRlUmFuZ2Uoc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWxlbmRhckRheXM6IENhbGVuZGFyRGF5W10gPSBkYXRlUmFuZ2UubWFwKChkYXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb24gPSBjb21wbGV0aW9ucy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgKGNvbXApID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wVG9EYXRlU3RyaW5nKGNvbXAuY29tcGxldGVkQXQsIHRpbWV6b25lKSA9PT0gZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0luU3RyZWFrID0gdGhpcy5pc0RhdGVJbkN1cnJlbnRTdHJlYWsoZGF0ZSwgc3RyZWFrKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogISFjb21wbGV0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNUb2RheTogaXNUb2RheShkYXRlLCB0aW1lem9uZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0luU3RyZWFrLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvblRpbWU6IGNvbXBsZXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNvbXBsZXRpb24uY29tcGxldGVkQXQudG9EYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGVzOiBjb21wbGV0aW9uPy5ub3RlcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxlbmRhckRheXM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBnZXRVc2VyRnJpZW5kbHlFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IGhhYml0IGNhbGVuZGFyOiAke21lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBmb3IgbmV3IG1pbGVzdG9uZXMgYW5kIHJldHVybiBhbnkgdGhhdCBzaG91bGQgYmUgY2VsZWJyYXRlZFxuICAgICAqIFJlcXVpcmVtZW50czogMy4xLCAzLjIsIDQuNCwgMTEuMlxuICAgICAqL1xuICAgIGFzeW5jIGNoZWNrTWlsZXN0b25lcyhzdHJlYWs6IEhhYml0U3RyZWFrKTogUHJvbWlzZTxTdHJlYWtNaWxlc3RvbmVbXT4ge1xuICAgICAgICBjb25zdCBuZXdNaWxlc3RvbmVzOiBTdHJlYWtNaWxlc3RvbmVbXSA9IFtdO1xuICAgICAgICBjb25zdCBleGlzdGluZ01pbGVzdG9uZURheXMgPSBzdHJlYWsubWlsZXN0b25lcy5tYXAoKG0pID0+IG0uZGF5cyk7XG5cbiAgICAgICAgZm9yIChjb25zdCBtaWxlc3RvbmVEYXkgb2YgTUlMRVNUT05FX0RBWVMpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBzdHJlYWsuY3VycmVudFN0cmVhayA+PSBtaWxlc3RvbmVEYXkgJiZcbiAgICAgICAgICAgICAgICAhZXhpc3RpbmdNaWxlc3RvbmVEYXlzLmluY2x1ZGVzKG1pbGVzdG9uZURheSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pbGVzdG9uZTogU3RyZWFrTWlsZXN0b25lID0ge1xuICAgICAgICAgICAgICAgICAgICBkYXlzOiBtaWxlc3RvbmVEYXksXG4gICAgICAgICAgICAgICAgICAgIGFjaGlldmVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgY2VsZWJyYXRlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBuZXdNaWxlc3RvbmVzLnB1c2gobWlsZXN0b25lKTtcblxuICAgICAgICAgICAgICAgIC8vIEF3YXJkIHN0cmVhayBmcmVlemUgZm9yIDMwLWRheSBtaWxlc3RvbmVzIChSZXF1aXJlbWVudCA0LjQpXG4gICAgICAgICAgICAgICAgaWYgKG1pbGVzdG9uZURheSA9PT0gMzApIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFrLmZyZWV6ZXNBdmFpbGFibGUgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgc3RyZWFrIHdpdGggbmV3IG1pbGVzdG9uZXNcbiAgICAgICAgaWYgKG5ld01pbGVzdG9uZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFN0cmVhazogSGFiaXRTdHJlYWsgPSB7XG4gICAgICAgICAgICAgICAgLi4uc3RyZWFrLFxuICAgICAgICAgICAgICAgIG1pbGVzdG9uZXM6IFsuLi5zdHJlYWsubWlsZXN0b25lcywgLi4ubmV3TWlsZXN0b25lc10sXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGZyZWV6ZXMgaWYgMzAtZGF5IG1pbGVzdG9uZSB3YXMgYWNoaWV2ZWRcbiAgICAgICAgICAgICAgICBmcmVlemVzQXZhaWxhYmxlOiBzdHJlYWsuZnJlZXplc0F2YWlsYWJsZSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHN0cmVha0lkID0gZ2VuZXJhdGVTdHJlYWtJZChzdHJlYWsudXNlcklkLCBzdHJlYWsuaGFiaXRJZCk7XG4gICAgICAgICAgICBjb25zdCBzdHJlYWtzQ29sbGVjdGlvbiA9IGdldEhhYml0U3RyZWFrc0NvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVha0RvY1JlZiA9IGRvYyhzdHJlYWtzQ29sbGVjdGlvbiwgc3RyZWFrSWQpO1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFrRGF0YSA9IHRyYW5zZm9ybVN0cmVha1RvRmlyZXN0b3JlKHVwZGF0ZWRTdHJlYWspO1xuXG4gICAgICAgICAgICBhd2FpdCBydW5UcmFuc2FjdGlvbihkYiwgYXN5bmMgKHRyYW5zYWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uc2V0KHN0cmVha0RvY1JlZiwgc3RyZWFrRGF0YSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gU2VuZCBtaWxlc3RvbmUgbm90aWZpY2F0aW9ucyBmb3IgbmV3IG1pbGVzdG9uZXNcbiAgICAgICAgICAgIC8vIFJlcXVpcmVtZW50czogMTEuMlxuICAgICAgICAgICAgZm9yIChjb25zdCBtaWxlc3RvbmUgb2YgbmV3TWlsZXN0b25lcykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhYml0TmFtZSA9IGF3YWl0IHRoaXMuZ2V0SGFiaXROYW1lKHN0cmVhay5oYWJpdElkKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogTm90aWZpY2F0aW9uIHNlcnZpY2UgaW50ZWdyYXRpb24gd291bGQgYmUgYWRkZWQgaGVyZVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGBNaWxlc3RvbmUgYWNoaWV2ZWQ6ICR7bWlsZXN0b25lLmRheXN9IGRheXMgZm9yICR7aGFiaXROYW1lfWAsXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGxvZ2dpbmcgbWlsZXN0b25lIGFjaGlldmVtZW50OlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHRocm93IC0gbWlsZXN0b25lIHdhcyBhY2hpZXZlZCBzdWNjZXNzZnVsbHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3TWlsZXN0b25lcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgc3RyZWFrIGluZm9ybWF0aW9uIGZvciBhIHNwZWNpZmljIGhhYml0XG4gICAgICovXG4gICAgYXN5bmMgZ2V0SGFiaXRTdHJlYWsoXG4gICAgICAgIGhhYml0SWQ6IHN0cmluZyxcbiAgICAgICAgdXNlcklkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxIYWJpdFN0cmVhayB8IG51bGw+IHtcbiAgICAgICAgaWYgKCFoYWJpdElkIHx8ICF1c2VySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkhhYml0IElEIGFuZCBVc2VyIElEIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYWtJZCA9IGdlbmVyYXRlU3RyZWFrSWQodXNlcklkLCBoYWJpdElkKTtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVha3NDb2xsZWN0aW9uID0gZ2V0SGFiaXRTdHJlYWtzQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFrRG9jUmVmID0gZG9jKHN0cmVha3NDb2xsZWN0aW9uLCBzdHJlYWtJZCk7XG4gICAgICAgICAgICBjb25zdCBzdHJlYWtEb2MgPSBhd2FpdCBnZXREb2Moc3RyZWFrRG9jUmVmKTtcblxuICAgICAgICAgICAgaWYgKCFzdHJlYWtEb2MuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RyZWFrRGF0YSA9IHN0cmVha0RvYy5kYXRhKCk7XG4gICAgICAgICAgICBpZiAoIXZhbGlkYXRlU3RyZWFrRG9jdW1lbnQoc3RyZWFrRGF0YSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0cmVhayBkYXRhIGZvcm1hdFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUZpcmVzdG9yZVRvU3RyZWFrKHN0cmVha0RhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGdldFVzZXJGcmllbmRseUVycm9yTWVzc2FnZShlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgaGFiaXQgc3RyZWFrOiAke21lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHN0cmVhayBkYXRhIGZvciBhIG5ldyBoYWJpdFxuICAgICAqL1xuICAgIGFzeW5jIGluaXRpYWxpemVIYWJpdFN0cmVhayhcbiAgICAgICAgaGFiaXRJZDogc3RyaW5nLFxuICAgICAgICB1c2VySWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPEhhYml0U3RyZWFrPiB7XG4gICAgICAgIGlmICghaGFiaXRJZCB8fCAhdXNlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJIYWJpdCBJRCBhbmQgVXNlciBJRCBhcmUgcmVxdWlyZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGdldEN1cnJlbnREYXRlU3RyaW5nKGdldFVzZXJUaW1lem9uZSgpKTtcbiAgICAgICAgY29uc3QgaW5pdGlhbFN0cmVhazogSGFiaXRTdHJlYWsgPSB7XG4gICAgICAgICAgICBoYWJpdElkLFxuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgY3VycmVudFN0cmVhazogMCxcbiAgICAgICAgICAgIGJlc3RTdHJlYWs6IDAsXG4gICAgICAgICAgICBsYXN0Q29tcGxldGlvbkRhdGU6IFwiXCIsXG4gICAgICAgICAgICBzdHJlYWtTdGFydERhdGU6IGN1cnJlbnREYXRlLFxuICAgICAgICAgICAgZnJlZXplc0F2YWlsYWJsZTogMCxcbiAgICAgICAgICAgIGZyZWV6ZXNVc2VkOiAwLFxuICAgICAgICAgICAgbWlsZXN0b25lczogW10sXG4gICAgICAgIH07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVha0lkID0gZ2VuZXJhdGVTdHJlYWtJZCh1c2VySWQsIGhhYml0SWQpO1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFrc0NvbGxlY3Rpb24gPSBnZXRIYWJpdFN0cmVha3NDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBzdHJlYWtEb2NSZWYgPSBkb2Moc3RyZWFrc0NvbGxlY3Rpb24sIHN0cmVha0lkKTtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVha0RhdGEgPSB0cmFuc2Zvcm1TdHJlYWtUb0ZpcmVzdG9yZShpbml0aWFsU3RyZWFrKTtcblxuICAgICAgICAgICAgYXdhaXQgcnVuVHJhbnNhY3Rpb24oZGIsIGFzeW5jICh0cmFuc2FjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnNldChzdHJlYWtEb2NSZWYsIHN0cmVha0RhdGEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsU3RyZWFrO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGdldFVzZXJGcmllbmRseUVycm9yTWVzc2FnZShlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBpbml0aWFsaXplIGhhYml0IHN0cmVhazogJHttZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgYSBzdHJlYWsgKHVzZWQgd2hlbiBzdHJlYWsgaXMgYnJva2VuIGFuZCBubyBmcmVlemUgYXZhaWxhYmxlKVxuICAgICAqIFJlcXVpcmVtZW50czogMS4yLCAxMS4zXG4gICAgICovXG4gICAgYXN5bmMgcmVzZXRTdHJlYWsoXG4gICAgICAgIGhhYml0SWQ6IHN0cmluZyxcbiAgICAgICAgdXNlcklkOiBzdHJpbmcsXG4gICAgICAgIHJlc2V0RGF0ZTogc3RyaW5nLFxuICAgICk6IFByb21pc2U8SGFiaXRTdHJlYWs+IHtcbiAgICAgICAgaWYgKCFoYWJpdElkIHx8ICF1c2VySWQgfHwgIXJlc2V0RGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSGFiaXQgSUQsIFVzZXIgSUQsIGFuZCByZXNldCBkYXRlIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcmV0cnlXaXRoQmFja29mZihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJ1blRyYW5zYWN0aW9uKGRiLCBhc3luYyAodHJhbnNhY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFrSWQgPSBnZW5lcmF0ZVN0cmVha0lkKHVzZXJJZCwgaGFiaXRJZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVha3NDb2xsZWN0aW9uID0gZ2V0SGFiaXRTdHJlYWtzQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYWtEb2NSZWYgPSBkb2Moc3RyZWFrc0NvbGxlY3Rpb24sIHN0cmVha0lkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFrRG9jID0gYXdhaXQgdHJhbnNhY3Rpb24uZ2V0KHN0cmVha0RvY1JlZik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdHJlYWtEb2MuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0cmVhayBkYXRhIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhayA9IHRyYW5zZm9ybUZpcmVzdG9yZVRvU3RyZWFrKHN0cmVha0RvYy5kYXRhKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIHVzZXIgb3duZXJzaGlwXG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsaWRhdGVVc2VyT3duZXJzaGlwKHVzZXJJZCwgc3RyZWFrLnVzZXJJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYXV0aG9yaXplZCBhY2Nlc3MgdG8gc3RyZWFrIGRhdGFcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNldFN0cmVhazogSGFiaXRTdHJlYWsgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5zdHJlYWssXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RyZWFrOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENvbXBsZXRpb25EYXRlOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFrU3RhcnREYXRlOiByZXNldERhdGUsXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFrRGF0YSA9IHRyYW5zZm9ybVN0cmVha1RvRmlyZXN0b3JlKHJlc2V0U3RyZWFrKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uc2V0KHN0cmVha0RvY1JlZiwgc3RyZWFrRGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2VuZCByZWNvdmVyeSBub3RpZmljYXRpb24gYWZ0ZXIgc3RyZWFrIGlzIGJyb2tlblxuICAgICAgICAgICAgICAgICAgICAvLyBSZXF1aXJlbWVudHM6IDExLjNcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhYml0TmFtZSA9IGF3YWl0IHRoaXMuZ2V0SGFiaXROYW1lKGhhYml0SWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2NoZWR1bGUgcmVjb3Zlcnkgbm90aWZpY2F0aW9uIGZvciB0b21vcnJvdyAoaGFuZGxlZCBieSBDbG91ZCBGdW5jdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbm90aWZpY2F0aW9uIHdpbGwgYmUgc2VudCBieSB0aGUgc2NoZWR1bGVkIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgU3RyZWFrIGJyb2tlbiBmb3IgJHtoYWJpdE5hbWV9LCByZWNvdmVyeSBub3RpZmljYXRpb24gd2lsbCBiZSBzY2hlZHVsZWRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzY2hlZHVsaW5nIHJlY292ZXJ5IG5vdGlmaWNhdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgdGhyb3cgLSBzdHJlYWsgcmVzZXQgd2FzIHN1Y2Nlc3NmdWxcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNldFN0cmVhaztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGdldFVzZXJGcmllbmRseUVycm9yTWVzc2FnZShlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byByZXNldCBzdHJlYWs6ICR7bWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByaXZhdGUgaGVscGVyIG1ldGhvZHNcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBzdHJlYWsgZnJvbSBjb21wbGV0aW9uIHJlY29yZHNcbiAgICAgKi9cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVN0cmVha0Zyb21Db21wbGV0aW9ucyhcbiAgICAgICAgY29tcGxldGlvbnM6IEhhYml0Q29tcGxldGlvbltdLFxuICAgICAgICBoYWJpdElkOiBzdHJpbmcsXG4gICAgICAgIHVzZXJJZDogc3RyaW5nLFxuICAgICk6IEhhYml0U3RyZWFrIHtcbiAgICAgICAgaWYgKGNvbXBsZXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBoYWJpdElkLFxuICAgICAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RyZWFrOiAwLFxuICAgICAgICAgICAgICAgIGJlc3RTdHJlYWs6IDAsXG4gICAgICAgICAgICAgICAgbGFzdENvbXBsZXRpb25EYXRlOiBcIlwiLFxuICAgICAgICAgICAgICAgIHN0cmVha1N0YXJ0RGF0ZTogZ2V0Q3VycmVudERhdGVTdHJpbmcoZ2V0VXNlclRpbWV6b25lKCkpLFxuICAgICAgICAgICAgICAgIGZyZWV6ZXNBdmFpbGFibGU6IDAsXG4gICAgICAgICAgICAgICAgZnJlZXplc1VzZWQ6IDAsXG4gICAgICAgICAgICAgICAgbWlsZXN0b25lczogW10sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGltZXpvbmUgPSBjb21wbGV0aW9uc1swXT8udGltZXpvbmUgfHwgZ2V0VXNlclRpbWV6b25lKCk7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25EYXRlcyA9IGNvbXBsZXRpb25zLm1hcCgoY29tcCkgPT5cbiAgICAgICAgICAgIHRpbWVzdGFtcFRvRGF0ZVN0cmluZyhjb21wLmNvbXBsZXRlZEF0LCB0aW1lem9uZSksXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgYW5kIHNvcnRcbiAgICAgICAgY29uc3QgdW5pcXVlRGF0ZXMgPSBBcnJheS5mcm9tKG5ldyBTZXQoY29tcGxldGlvbkRhdGVzKSkuc29ydCgpO1xuXG4gICAgICAgIC8vIENhbGN1bGF0ZSBjdXJyZW50IHN0cmVhayAoZnJvbSBtb3N0IHJlY2VudCBjb21wbGV0aW9uIGJhY2t3YXJkcylcbiAgICAgICAgbGV0IGN1cnJlbnRTdHJlYWsgPSAwO1xuICAgICAgICBsZXQgc3RyZWFrU3RhcnREYXRlID0gXCJcIjtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBnZXRDdXJyZW50RGF0ZVN0cmluZyh0aW1lem9uZSk7XG4gICAgICAgIGNvbnN0IHllc3RlcmRheSA9IGZvcm1hdERhdGVUb1N0cmluZyhcbiAgICAgICAgICAgIG5ldyBEYXRlKERhdGUubm93KCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICAgICAgICAgIHRpbWV6b25lLFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSBjb21wbGV0aW9uIHRvZGF5IG9yIHllc3RlcmRheSB0byBzdGFydCBjb3VudGluZ1xuICAgICAgICBjb25zdCBsYXN0Q29tcGxldGlvbkRhdGUgPSB1bmlxdWVEYXRlc1t1bmlxdWVEYXRlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGxhc3RDb21wbGV0aW9uRGF0ZSA9PT0gdG9kYXkgfHwgbGFzdENvbXBsZXRpb25EYXRlID09PSB5ZXN0ZXJkYXkpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTdHJlYWsgPSAxO1xuICAgICAgICAgICAgc3RyZWFrU3RhcnREYXRlID0gbGFzdENvbXBsZXRpb25EYXRlO1xuXG4gICAgICAgICAgICAvLyBDb3VudCBiYWNrd2FyZHMgZm9yIGNvbnNlY3V0aXZlIGRheXNcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB1bmlxdWVEYXRlcy5sZW5ndGggLSAyOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gdW5pcXVlRGF0ZXNbaSArIDFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzRGF0ZSA9IHVuaXF1ZURhdGVzW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFyZUNvbnNlY3V0aXZlRGF5cyhwcmV2aW91c0RhdGUsIGN1cnJlbnREYXRlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RyZWFrKys7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVha1N0YXJ0RGF0ZSA9IHByZXZpb3VzRGF0ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxjdWxhdGUgYmVzdCBzdHJlYWsgKGxvbmdlc3QgY29uc2VjdXRpdmUgc2VxdWVuY2UpXG4gICAgICAgIGxldCBiZXN0U3RyZWFrID0gMDtcbiAgICAgICAgbGV0IHRlbXBTdHJlYWsgPSAxO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdW5pcXVlRGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhcmVDb25zZWN1dGl2ZURheXModW5pcXVlRGF0ZXNbaSAtIDFdLCB1bmlxdWVEYXRlc1tpXSkpIHtcbiAgICAgICAgICAgICAgICB0ZW1wU3RyZWFrKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJlc3RTdHJlYWsgPSBNYXRoLm1heChiZXN0U3RyZWFrLCB0ZW1wU3RyZWFrKTtcbiAgICAgICAgICAgICAgICB0ZW1wU3RyZWFrID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBiZXN0U3RyZWFrID0gTWF0aC5tYXgoYmVzdFN0cmVhaywgdGVtcFN0cmVhaywgY3VycmVudFN0cmVhayk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhhYml0SWQsXG4gICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICBjdXJyZW50U3RyZWFrLFxuICAgICAgICAgICAgYmVzdFN0cmVhayxcbiAgICAgICAgICAgIGxhc3RDb21wbGV0aW9uRGF0ZSxcbiAgICAgICAgICAgIHN0cmVha1N0YXJ0RGF0ZSxcbiAgICAgICAgICAgIGZyZWV6ZXNBdmFpbGFibGU6IDAsXG4gICAgICAgICAgICBmcmVlemVzVXNlZDogMCxcbiAgICAgICAgICAgIG1pbGVzdG9uZXM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1lcmdlIGNhbGN1bGF0ZWQgc3RyZWFrIHdpdGggZXhpc3Rpbmcgc3RyZWFrIGRhdGFcbiAgICAgKi9cbiAgICBwcml2YXRlIG1lcmdlU3RyZWFrRGF0YShcbiAgICAgICAgY2FsY3VsYXRlZDogSGFiaXRTdHJlYWssXG4gICAgICAgIGV4aXN0aW5nOiBIYWJpdFN0cmVhayB8IG51bGwsXG4gICAgKTogSGFiaXRTdHJlYWsge1xuICAgICAgICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsY3VsYXRlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jYWxjdWxhdGVkLFxuICAgICAgICAgICAgZnJlZXplc0F2YWlsYWJsZTogZXhpc3RpbmcuZnJlZXplc0F2YWlsYWJsZSxcbiAgICAgICAgICAgIGZyZWV6ZXNVc2VkOiBleGlzdGluZy5mcmVlemVzVXNlZCxcbiAgICAgICAgICAgIG1pbGVzdG9uZXM6IGV4aXN0aW5nLm1pbGVzdG9uZXMsXG4gICAgICAgICAgICAvLyBFbnN1cmUgYmVzdCBzdHJlYWsgbmV2ZXIgZGVjcmVhc2VzXG4gICAgICAgICAgICBiZXN0U3RyZWFrOiBNYXRoLm1heChjYWxjdWxhdGVkLmJlc3RTdHJlYWssIGV4aXN0aW5nLmJlc3RTdHJlYWspLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZ2V0SGFiaXROYW1lKGhhYml0SWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBBc3N1bWluZyBoYWJpdHMgYXJlIHN0b3JlZCBpbiB0aGUgZ29hbHMgY29sbGVjdGlvblxuICAgICAgICAgICAgY29uc3QgZ29hbFJlZiA9IGRvYyhcbiAgICAgICAgICAgICAgICBkYixcbiAgICAgICAgICAgICAgICBgYXJ0aWZhY3RzL29hdGgtYXBwL3B1YmxpYy9kYXRhL2dvYWxzLyR7aGFiaXRJZH1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IGdvYWxEb2MgPSBhd2FpdCBnZXREb2MoZ29hbFJlZik7XG5cbiAgICAgICAgICAgIGlmIChnb2FsRG9jLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ29hbERhdGEgPSBnb2FsRG9jLmRhdGEoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ29hbERhdGEuZGVzY3JpcHRpb24gfHwgXCJZb3VyIGhhYml0XCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBcIllvdXIgaGFiaXRcIjtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGhhYml0IG5hbWU6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBcIllvdXIgaGFiaXRcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgZGF0ZSBpcyB3aXRoaW4gdGhlIGN1cnJlbnQgc3RyZWFrIHBlcmlvZFxuICAgICAqL1xuICAgIHByaXZhdGUgaXNEYXRlSW5DdXJyZW50U3RyZWFrKFxuICAgICAgICBkYXRlOiBzdHJpbmcsXG4gICAgICAgIHN0cmVhazogSGFiaXRTdHJlYWsgfCBudWxsLFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXN0cmVhayB8fCBzdHJlYWsuY3VycmVudFN0cmVhayA9PT0gMCB8fCAhc3RyZWFrLnN0cmVha1N0YXJ0RGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RyZWFrU3RhcnQgPSBwYXJzZURhdGVTdHJpbmcoc3RyZWFrLnN0cmVha1N0YXJ0RGF0ZSk7XG4gICAgICAgIGNvbnN0IGNoZWNrRGF0ZSA9IHBhcnNlRGF0ZVN0cmluZyhkYXRlKTtcbiAgICAgICAgY29uc3Qgc3RyZWFrRW5kID0gbmV3IERhdGUoc3RyZWFrU3RhcnQpO1xuICAgICAgICBzdHJlYWtFbmQuc2V0RGF0ZShzdHJlYWtFbmQuZ2V0RGF0ZSgpICsgc3RyZWFrLmN1cnJlbnRTdHJlYWsgLSAxKTtcblxuICAgICAgICByZXR1cm4gY2hlY2tEYXRlID49IHN0cmVha1N0YXJ0ICYmIGNoZWNrRGF0ZSA8PSBzdHJlYWtFbmQ7XG4gICAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3Qgc3RyZWFrU2VydmljZSA9IG5ldyBTdHJlYWtTZXJ2aWNlKCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQVVBLElBQUFDLGVBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLGFBQUEsR0FBQUYsT0FBQTtBQU9BLElBQUFHLFVBQUEsR0FBQUgsT0FBQTtBQVVBLElBQUFJLGNBQUEsR0FBQUosT0FBQTtBQUlBLElBQUFLLFlBQUEsR0FBQUwsT0FBQTtBQUtBLElB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